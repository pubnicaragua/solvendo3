var S_=Object.defineProperty;var N_=(e,t,r)=>t in e?S_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Qd=(e,t,r)=>N_(e,typeof t!="symbol"?t+"":t,r);function C_(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function __(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var gb={exports:{}},_u={},vb={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),k_=Symbol.for("react.portal"),E_=Symbol.for("react.fragment"),P_=Symbol.for("react.strict_mode"),O_=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),A_=Symbol.for("react.context"),D_=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),M_=Symbol.for("react.memo"),$_=Symbol.for("react.lazy"),tv=Symbol.iterator;function L_(e){return e===null||typeof e!="object"?null:(e=tv&&e[tv]||e["@@iterator"],typeof e=="function"?e:null)}var yb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xb=Object.assign,bb={};function fo(e,t,r){this.props=e,this.context=t,this.refs=bb,this.updater=r||yb}fo.prototype.isReactComponent={};fo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wb(){}wb.prototype=fo.prototype;function np(e,t,r){this.props=e,this.context=t,this.refs=bb,this.updater=r||yb}var ap=np.prototype=new wb;ap.constructor=np;xb(ap,fo.prototype);ap.isPureReactComponent=!0;var rv=Array.isArray,jb=Object.prototype.hasOwnProperty,ip={current:null},Sb={key:!0,ref:!0,__self:!0,__source:!0};function Nb(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)jb.call(t,n)&&!Sb.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ks,type:e,key:i,ref:o,props:a,_owner:ip.current}}function R_(e,t){return{$$typeof:Ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function op(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ks}function z_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nv=/\/+/g;function Jd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?z_(""+e.key):t.toString(36)}function rc(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ks:case k_:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Jd(o,0):n,rv(a)?(r="",e!=null&&(r=e.replace(nv,"$&/")+"/"),rc(a,t,r,"",function(u){return u})):a!=null&&(op(a)&&(a=R_(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(nv,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",rv(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Jd(i,l);o+=rc(i,t,r,c,a)}else if(c=L_(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Jd(i,l++),o+=rc(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xl(e,t,r){if(e==null)return e;var n=[],a=0;return rc(e,n,"","",function(i){return t.call(r,i,a++)}),n}function F_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tt={current:null},nc={transition:null},U_={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:nc,ReactCurrentOwner:ip};function Cb(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:xl,forEach:function(e,t,r){xl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xl(e,function(){t++}),t},toArray:function(e){return xl(e,function(t){return t})||[]},only:function(e){if(!op(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=fo;me.Fragment=E_;me.Profiler=O_;me.PureComponent=np;me.StrictMode=P_;me.Suspense=I_;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U_;me.act=Cb;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xb({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ip.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)jb.call(t,c)&&!Sb.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ks,type:e.type,key:a,ref:i,props:n,_owner:o}};me.createContext=function(e){return e={$$typeof:A_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:T_,_context:e},e.Consumer=e};me.createElement=Nb;me.createFactory=function(e){var t=Nb.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:D_,render:e}};me.isValidElement=op;me.lazy=function(e){return{$$typeof:$_,_payload:{_status:-1,_result:e},_init:F_}};me.memo=function(e,t){return{$$typeof:M_,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=nc.transition;nc.transition={};try{e()}finally{nc.transition=t}};me.unstable_act=Cb;me.useCallback=function(e,t){return Tt.current.useCallback(e,t)};me.useContext=function(e){return Tt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return Tt.current.useDeferredValue(e)};me.useEffect=function(e,t){return Tt.current.useEffect(e,t)};me.useId=function(){return Tt.current.useId()};me.useImperativeHandle=function(e,t,r){return Tt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return Tt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return Tt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return Tt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return Tt.current.useReducer(e,t,r)};me.useRef=function(e){return Tt.current.useRef(e)};me.useState=function(e){return Tt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return Tt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return Tt.current.useTransition()};me.version="18.3.1";vb.exports=me;var g=vb.exports;const qn=_n(g),B_=C_({__proto__:null,default:qn},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=g,q_=Symbol.for("react.element"),H_=Symbol.for("react.fragment"),K_=Object.prototype.hasOwnProperty,V_=W_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G_={key:!0,ref:!0,__self:!0,__source:!0};function _b(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)K_.call(t,n)&&!G_.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:q_,type:e,key:i,ref:o,props:a,_owner:V_.current}}_u.Fragment=H_;_u.jsx=_b;_u.jsxs=_b;gb.exports=_u;var s=gb.exports,kb={exports:{}},lr={},Eb={exports:{}},Pb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,M){var q=O.length;O.push(M);e:for(;0<q;){var K=q-1>>>1,V=O[K];if(0<a(V,M))O[K]=M,O[q]=V,q=K;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var M=O[0],q=O.pop();if(q!==M){O[0]=q;e:for(var K=0,V=O.length,le=V>>>1;K<le;){var ge=2*(K+1)-1,ce=O[ge],P=ge+1,G=O[P];if(0>a(ce,q))P<V&&0>a(G,ce)?(O[K]=G,O[P]=q,K=P):(O[K]=ce,O[ge]=q,K=ge);else if(P<V&&0>a(G,q))O[K]=G,O[P]=q,K=P;else break e}}return M}function a(O,M){var q=O.sortIndex-M.sortIndex;return q!==0?q:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=O)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function j(O){if(x=!1,w(O),!v)if(r(c)!==null)v=!0,B(S);else{var M=r(u);M!==null&&E(j,M.startTime-O)}}function S(O,M){v=!1,x&&(x=!1,p(_),_=-1),m=!0;var q=h;try{for(w(M),f=r(c);f!==null&&(!(f.expirationTime>M)||O&&!T());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var V=K(f.expirationTime<=M);M=e.unstable_now(),typeof V=="function"?f.callback=V:f===r(c)&&n(c),w(M)}else n(c);f=r(c)}if(f!==null)var le=!0;else{var ge=r(u);ge!==null&&E(j,ge.startTime-M),le=!1}return le}finally{f=null,h=q,m=!1}}var N=!1,C=null,_=-1,A=5,k=-1;function T(){return!(e.unstable_now()-k<A)}function U(){if(C!==null){var O=e.unstable_now();k=O;var M=!0;try{M=C(!0,O)}finally{M?I():(N=!1,C=null)}}else N=!1}var I;if(typeof b=="function")I=function(){b(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=U,I=function(){te.postMessage(null)}}else I=function(){y(U,0)};function B(O){C=O,N||(N=!0,I())}function E(O,M){_=y(function(){O(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,B(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var q=h;h=M;try{return O()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=h;h=O;try{return M()}finally{h=q}},e.unstable_scheduleCallback=function(O,M,q){var K=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=q+V,O={id:d++,callback:M,priorityLevel:O,startTime:q,expirationTime:V,sortIndex:-1},q>K?(O.sortIndex=q,t(u,O),r(c)===null&&O===r(u)&&(x?(p(_),_=-1):x=!0,E(j,q-K))):(O.sortIndex=V,t(c,O),v||m||(v=!0,B(S))),O},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(O){var M=h;return function(){var q=h;h=M;try{return O.apply(this,arguments)}finally{h=q}}}})(Pb);Eb.exports=Pb;var Y_=Eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=g,ir=Y_;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ob=new Set,fs={};function ii(e,t){Gi(e,t),Gi(e+"Capture",t)}function Gi(e,t){for(fs[e]=t,e=0;e<t.length;e++)Ob.add(t[e])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ah=Object.prototype.hasOwnProperty,Q_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,av={},iv={};function J_(e){return ah.call(iv,e)?!0:ah.call(av,e)?!1:Q_.test(e)?iv[e]=!0:(av[e]=!0,!1)}function Z_(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function e4(e,t,r,n){if(t===null||typeof t>"u"||Z_(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new At(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new At(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new At(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new At(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new At(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new At(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mt[e]=new At(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mt[e]=new At(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mt[e]=new At(e,5,!1,e.toLowerCase(),null,!1,!1)});var sp=/[\-:]([a-z])/g;function lp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sp,lp);mt[t]=new At(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sp,lp);mt[t]=new At(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sp,lp);mt[t]=new At(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new At(e,1,!1,e.toLowerCase(),null,!1,!1)});mt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mt[e]=new At(e,1,!1,e.toLowerCase(),null,!0,!0)});function cp(e,t,r,n){var a=mt.hasOwnProperty(t)?mt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(e4(t,r,a,n)&&(r=null),n||a===null?J_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var kn=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),Ci=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),ih=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),Ab=Symbol.for("react.context"),dp=Symbol.for("react.forward_ref"),oh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),fp=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),Db=Symbol.for("react.offscreen"),ov=Symbol.iterator;function _o(e){return e===null||typeof e!="object"?null:(e=ov&&e[ov]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,Zd;function Wo(e){if(Zd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zd=t&&t[1]||""}return`
`+Zd+e}var ef=!1;function tf(e,t){if(!e||ef)return"";ef=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ef=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wo(e):""}function t4(e){switch(e.tag){case 5:return Wo(e.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return e=tf(e.type,!1),e;case 11:return e=tf(e.type.render,!1),e;case 1:return e=tf(e.type,!0),e;default:return""}}function lh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Ci:return"Portal";case ih:return"Profiler";case up:return"StrictMode";case oh:return"Suspense";case sh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ab:return(e.displayName||"Context")+".Consumer";case Tb:return(e._context.displayName||"Context")+".Provider";case dp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fp:return t=e.displayName||null,t!==null?t:lh(e.type)||"Memo";case Fn:t=e._payload,e=e._init;try{return lh(e(t))}catch{}}return null}function r4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lh(t);case 8:return t===up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ca(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ib(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n4(e){var t=Ib(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wl(e){e._valueTracker||(e._valueTracker=n4(e))}function Mb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ib(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ch(e,t){var r=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ca(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $b(e,t){t=t.checked,t!=null&&cp(e,"checked",t,!1)}function uh(e,t){$b(e,t);var r=ca(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dh(e,t.type,r):t.hasOwnProperty("defaultValue")&&dh(e,t.type,ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function dh(e,t,r){(t!=="number"||gc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var qo=Array.isArray;function zi(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ca(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function fh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(qo(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ca(r)}}function Lb(e,t){var r=ca(t.value),n=ca(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function uv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jl,zb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a4=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(e){a4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xo[t]=Xo[e]})});function Fb(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xo.hasOwnProperty(e)&&Xo[e]?(""+t).trim():t+"px"}function Ub(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Fb(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var i4=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mh(e,t){if(t){if(i4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=null;function hp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vh=null,Fi=null,Ui=null;function dv(e){if(e=Ys(e)){if(typeof vh!="function")throw Error(H(280));var t=e.stateNode;t&&(t=Tu(t),vh(e.stateNode,e.type,t))}}function Bb(e){Fi?Ui?Ui.push(e):Ui=[e]:Fi=e}function Wb(){if(Fi){var e=Fi,t=Ui;if(Ui=Fi=null,dv(e),t)for(e=0;e<t.length;e++)dv(t[e])}}function qb(e,t){return e(t)}function Hb(){}var rf=!1;function Kb(e,t,r){if(rf)return e(t,r);rf=!0;try{return qb(e,t,r)}finally{rf=!1,(Fi!==null||Ui!==null)&&(Hb(),Wb())}}function ms(e,t){var r=e.stateNode;if(r===null)return null;var n=Tu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var yh=!1;if(vn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){yh=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{yh=!1}function o4(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Qo=!1,vc=null,yc=!1,xh=null,s4={onError:function(e){Qo=!0,vc=e}};function l4(e,t,r,n,a,i,o,l,c){Qo=!1,vc=null,o4.apply(s4,arguments)}function c4(e,t,r,n,a,i,o,l,c){if(l4.apply(this,arguments),Qo){if(Qo){var u=vc;Qo=!1,vc=null}else throw Error(H(198));yc||(yc=!0,xh=u)}}function oi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Vb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fv(e){if(oi(e)!==e)throw Error(H(188))}function u4(e){var t=e.alternate;if(!t){if(t=oi(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return fv(a),e;if(i===n)return fv(a),t;i=i.sibling}throw Error(H(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function Gb(e){return e=u4(e),e!==null?Yb(e):null}function Yb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yb(e);if(t!==null)return t;e=e.sibling}return null}var Xb=ir.unstable_scheduleCallback,hv=ir.unstable_cancelCallback,d4=ir.unstable_shouldYield,f4=ir.unstable_requestPaint,Be=ir.unstable_now,h4=ir.unstable_getCurrentPriorityLevel,mp=ir.unstable_ImmediatePriority,Qb=ir.unstable_UserBlockingPriority,xc=ir.unstable_NormalPriority,m4=ir.unstable_LowPriority,Jb=ir.unstable_IdlePriority,ku=null,Qr=null;function p4(e){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(ku,e,void 0,(e.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:y4,g4=Math.log,v4=Math.LN2;function y4(e){return e>>>=0,e===0?32:31-(g4(e)/v4|0)|0}var Sl=64,Nl=4194304;function Ho(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ho(l):(i&=o,i!==0&&(n=Ho(i)))}else o=r&~a,o!==0?n=Ho(o):i!==0&&(n=Ho(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zr(t),a=1<<r,n|=e[r],t&=~a;return n}function x4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b4(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-zr(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=x4(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function bh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zb(){var e=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),e}function nf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Vs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zr(t),e[t]=r}function w4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-zr(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function pp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zr(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var we=0;function ew(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tw,gp,rw,nw,aw,wh=!1,Cl=[],Zn=null,ea=null,ta=null,ps=new Map,gs=new Map,Hn=[],j4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mv(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function Eo(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ys(t),t!==null&&gp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function S4(e,t,r,n,a){switch(t){case"focusin":return Zn=Eo(Zn,e,t,r,n,a),!0;case"dragenter":return ea=Eo(ea,e,t,r,n,a),!0;case"mouseover":return ta=Eo(ta,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ps.set(i,Eo(ps.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,gs.set(i,Eo(gs.get(i)||null,e,t,r,n,a)),!0}return!1}function iw(e){var t=Aa(e.target);if(t!==null){var r=oi(t);if(r!==null){if(t=r.tag,t===13){if(t=Vb(r),t!==null){e.blockedOn=t,aw(e.priority,function(){rw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ac(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);gh=n,r.target.dispatchEvent(n),gh=null}else return t=Ys(r),t!==null&&gp(t),e.blockedOn=r,!1;t.shift()}return!0}function pv(e,t,r){ac(e)&&r.delete(t)}function N4(){wh=!1,Zn!==null&&ac(Zn)&&(Zn=null),ea!==null&&ac(ea)&&(ea=null),ta!==null&&ac(ta)&&(ta=null),ps.forEach(pv),gs.forEach(pv)}function Po(e,t){e.blockedOn===t&&(e.blockedOn=null,wh||(wh=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,N4)))}function vs(e){function t(a){return Po(a,e)}if(0<Cl.length){Po(Cl[0],e);for(var r=1;r<Cl.length;r++){var n=Cl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Zn!==null&&Po(Zn,e),ea!==null&&Po(ea,e),ta!==null&&Po(ta,e),ps.forEach(t),gs.forEach(t),r=0;r<Hn.length;r++)n=Hn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hn.length&&(r=Hn[0],r.blockedOn===null);)iw(r),r.blockedOn===null&&Hn.shift()}var Bi=kn.ReactCurrentBatchConfig,wc=!0;function C4(e,t,r,n){var a=we,i=Bi.transition;Bi.transition=null;try{we=1,vp(e,t,r,n)}finally{we=a,Bi.transition=i}}function _4(e,t,r,n){var a=we,i=Bi.transition;Bi.transition=null;try{we=4,vp(e,t,r,n)}finally{we=a,Bi.transition=i}}function vp(e,t,r,n){if(wc){var a=jh(e,t,r,n);if(a===null)mf(e,t,n,jc,r),mv(e,n);else if(S4(a,e,t,r,n))n.stopPropagation();else if(mv(e,n),t&4&&-1<j4.indexOf(e)){for(;a!==null;){var i=Ys(a);if(i!==null&&tw(i),i=jh(e,t,r,n),i===null&&mf(e,t,n,jc,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else mf(e,t,n,null,r)}}var jc=null;function jh(e,t,r,n){if(jc=null,e=hp(n),e=Aa(e),e!==null)if(t=oi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Vb(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jc=e,null}function ow(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h4()){case mp:return 1;case Qb:return 4;case xc:case m4:return 16;case Jb:return 536870912;default:return 16}default:return 16}}var Xn=null,yp=null,ic=null;function sw(){if(ic)return ic;var e,t=yp,r=t.length,n,a="value"in Xn?Xn.value:Xn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return ic=a.slice(e,1<n?1-n:void 0)}function oc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _l(){return!0}function gv(){return!1}function cr(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_l:gv,this.isPropagationStopped=gv,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),t}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xp=cr(ho),Gs=Re({},ho,{view:0,detail:0}),k4=cr(Gs),af,of,Oo,Eu=Re({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oo&&(Oo&&e.type==="mousemove"?(af=e.screenX-Oo.screenX,of=e.screenY-Oo.screenY):of=af=0,Oo=e),af)},movementY:function(e){return"movementY"in e?e.movementY:of}}),vv=cr(Eu),E4=Re({},Eu,{dataTransfer:0}),P4=cr(E4),O4=Re({},Gs,{relatedTarget:0}),sf=cr(O4),T4=Re({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),A4=cr(T4),D4=Re({},ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I4=cr(D4),M4=Re({},ho,{data:0}),yv=cr(M4),$4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R4[e])?!!t[e]:!1}function bp(){return z4}var F4=Re({},Gs,{key:function(e){if(e.key){var t=$4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bp,charCode:function(e){return e.type==="keypress"?oc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U4=cr(F4),B4=Re({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xv=cr(B4),W4=Re({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bp}),q4=cr(W4),H4=Re({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),K4=cr(H4),V4=Re({},Eu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=cr(V4),Y4=[9,13,27,32],wp=vn&&"CompositionEvent"in window,Jo=null;vn&&"documentMode"in document&&(Jo=document.documentMode);var X4=vn&&"TextEvent"in window&&!Jo,lw=vn&&(!wp||Jo&&8<Jo&&11>=Jo),bv=" ",wv=!1;function cw(e,t){switch(e){case"keyup":return Y4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function Q4(e,t){switch(e){case"compositionend":return uw(t);case"keypress":return t.which!==32?null:(wv=!0,bv);case"textInput":return e=t.data,e===bv&&wv?null:e;default:return null}}function J4(e,t){if(ki)return e==="compositionend"||!wp&&cw(e,t)?(e=sw(),ic=yp=Xn=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lw&&t.locale!=="ko"?null:t.data;default:return null}}var Z4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z4[e.type]:t==="textarea"}function dw(e,t,r,n){Bb(n),t=Sc(t,"onChange"),0<t.length&&(r=new xp("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zo=null,ys=null;function e5(e){jw(e,0)}function Pu(e){var t=Oi(e);if(Mb(t))return e}function t5(e,t){if(e==="change")return t}var fw=!1;if(vn){var lf;if(vn){var cf="oninput"in document;if(!cf){var Sv=document.createElement("div");Sv.setAttribute("oninput","return;"),cf=typeof Sv.oninput=="function"}lf=cf}else lf=!1;fw=lf&&(!document.documentMode||9<document.documentMode)}function Nv(){Zo&&(Zo.detachEvent("onpropertychange",hw),ys=Zo=null)}function hw(e){if(e.propertyName==="value"&&Pu(ys)){var t=[];dw(t,ys,e,hp(e)),Kb(e5,t)}}function r5(e,t,r){e==="focusin"?(Nv(),Zo=t,ys=r,Zo.attachEvent("onpropertychange",hw)):e==="focusout"&&Nv()}function n5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pu(ys)}function a5(e,t){if(e==="click")return Pu(t)}function i5(e,t){if(e==="input"||e==="change")return Pu(t)}function o5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ur=typeof Object.is=="function"?Object.is:o5;function xs(e,t){if(Ur(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ah.call(t,a)||!Ur(e[a],t[a]))return!1}return!0}function Cv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _v(e,t){var r=Cv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cv(r)}}function mw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pw(){for(var e=window,t=gc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gc(e.document)}return t}function jp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function s5(e){var t=pw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&mw(r.ownerDocument.documentElement,r)){if(n!==null&&jp(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=_v(r,i);var o=_v(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var l5=vn&&"documentMode"in document&&11>=document.documentMode,Ei=null,Sh=null,es=null,Nh=!1;function kv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nh||Ei==null||Ei!==gc(n)||(n=Ei,"selectionStart"in n&&jp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),es&&xs(es,n)||(es=n,n=Sc(Sh,"onSelect"),0<n.length&&(t=new xp("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ei)))}function kl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pi={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},uf={},gw={};vn&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function Ou(e){if(uf[e])return uf[e];if(!Pi[e])return e;var t=Pi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in gw)return uf[e]=t[r];return e}var vw=Ou("animationend"),yw=Ou("animationiteration"),xw=Ou("animationstart"),bw=Ou("transitionend"),ww=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ma(e,t){ww.set(e,t),ii(t,[e])}for(var df=0;df<Ev.length;df++){var ff=Ev[df],c5=ff.toLowerCase(),u5=ff[0].toUpperCase()+ff.slice(1);ma(c5,"on"+u5)}ma(vw,"onAnimationEnd");ma(yw,"onAnimationIteration");ma(xw,"onAnimationStart");ma("dblclick","onDoubleClick");ma("focusin","onFocus");ma("focusout","onBlur");ma(bw,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function Pv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,c4(n,t,void 0,e),e.currentTarget=null}function jw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Pv(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Pv(a,l,u),i=c}}}if(yc)throw e=xh,yc=!1,xh=null,e}function Pe(e,t){var r=t[Ph];r===void 0&&(r=t[Ph]=new Set);var n=e+"__bubble";r.has(n)||(Sw(t,e,2,!1),r.add(n))}function hf(e,t,r){var n=0;t&&(n|=4),Sw(r,e,n,t)}var El="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[El]){e[El]=!0,Ob.forEach(function(r){r!=="selectionchange"&&(d5.has(r)||hf(r,!1,e),hf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[El]||(t[El]=!0,hf("selectionchange",!1,t))}}function Sw(e,t,r,n){switch(ow(t)){case 1:var a=C4;break;case 4:a=_4;break;default:a=vp}r=a.bind(null,t,r,e),a=void 0,!yh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function mf(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Aa(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Kb(function(){var u=i,d=hp(r),f=[];e:{var h=ww.get(e);if(h!==void 0){var m=xp,v=e;switch(e){case"keypress":if(oc(r)===0)break e;case"keydown":case"keyup":m=U4;break;case"focusin":v="focus",m=sf;break;case"focusout":v="blur",m=sf;break;case"beforeblur":case"afterblur":m=sf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=P4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=q4;break;case vw:case yw:case xw:m=A4;break;case bw:m=K4;break;case"scroll":m=k4;break;case"wheel":m=G4;break;case"copy":case"cut":case"paste":m=I4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=xv}var x=(t&4)!==0,y=!x&&e==="scroll",p=x?h!==null?h+"Capture":null:h;x=[];for(var b=u,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,p!==null&&(j=ms(b,p),j!=null&&x.push(ws(b,j,w)))),y)break;b=b.return}0<x.length&&(h=new m(h,v,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==gh&&(v=r.relatedTarget||r.fromElement)&&(Aa(v)||v[yn]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?Aa(v):null,v!==null&&(y=oi(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(x=vv,j="onMouseLeave",p="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=xv,j="onPointerLeave",p="onPointerEnter",b="pointer"),y=m==null?h:Oi(m),w=v==null?h:Oi(v),h=new x(j,b+"leave",m,r,d),h.target=y,h.relatedTarget=w,j=null,Aa(d)===u&&(x=new x(p,b+"enter",v,r,d),x.target=w,x.relatedTarget=y,j=x),y=j,m&&v)t:{for(x=m,p=v,b=0,w=x;w;w=gi(w))b++;for(w=0,j=p;j;j=gi(j))w++;for(;0<b-w;)x=gi(x),b--;for(;0<w-b;)p=gi(p),w--;for(;b--;){if(x===p||p!==null&&x===p.alternate)break t;x=gi(x),p=gi(p)}x=null}else x=null;m!==null&&Ov(f,h,m,x,!1),v!==null&&y!==null&&Ov(f,y,v,x,!0)}}e:{if(h=u?Oi(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=t5;else if(jv(h))if(fw)S=i5;else{S=n5;var N=r5}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=a5);if(S&&(S=S(e,u))){dw(f,S,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&dh(h,"number",h.value)}switch(N=u?Oi(u):window,e){case"focusin":(jv(N)||N.contentEditable==="true")&&(Ei=N,Sh=u,es=null);break;case"focusout":es=Sh=Ei=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,kv(f,r,d);break;case"selectionchange":if(l5)break;case"keydown":case"keyup":kv(f,r,d)}var C;if(wp)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ki?cw(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(lw&&r.locale!=="ko"&&(ki||_!=="onCompositionStart"?_==="onCompositionEnd"&&ki&&(C=sw()):(Xn=d,yp="value"in Xn?Xn.value:Xn.textContent,ki=!0)),N=Sc(u,_),0<N.length&&(_=new yv(_,e,null,r,d),f.push({event:_,listeners:N}),C?_.data=C:(C=uw(r),C!==null&&(_.data=C)))),(C=X4?Q4(e,r):J4(e,r))&&(u=Sc(u,"onBeforeInput"),0<u.length&&(d=new yv("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}jw(f,t)})}function ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sc(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ms(e,r),i!=null&&n.unshift(ws(e,i,a)),i=ms(e,t),i!=null&&n.push(ws(e,i,a))),e=e.return}return n}function gi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ov(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=ms(r,i),c!=null&&o.unshift(ws(r,c,l))):a||(c=ms(r,i),c!=null&&o.push(ws(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var f5=/\r\n?/g,h5=/\u0000|\uFFFD/g;function Tv(e){return(typeof e=="string"?e:""+e).replace(f5,`
`).replace(h5,"")}function Pl(e,t,r){if(t=Tv(t),Tv(e)!==t&&r)throw Error(H(425))}function Nc(){}var Ch=null,_h=null;function kh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eh=typeof setTimeout=="function"?setTimeout:void 0,m5=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,p5=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(e){return Av.resolve(null).then(e).catch(g5)}:Eh;function g5(e){setTimeout(function(){throw e})}function pf(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),vs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);vs(t)}function ra(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var mo=Math.random().toString(36).slice(2),Yr="__reactFiber$"+mo,js="__reactProps$"+mo,yn="__reactContainer$"+mo,Ph="__reactEvents$"+mo,v5="__reactListeners$"+mo,y5="__reactHandles$"+mo;function Aa(e){var t=e[Yr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[yn]||r[Yr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dv(e);e!==null;){if(r=e[Yr])return r;e=Dv(e)}return t}e=r,r=e.parentNode}return null}function Ys(e){return e=e[Yr]||e[yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Tu(e){return e[js]||null}var Oh=[],Ti=-1;function pa(e){return{current:e}}function Te(e){0>Ti||(e.current=Oh[Ti],Oh[Ti]=null,Ti--)}function ke(e,t){Ti++,Oh[Ti]=e.current,e.current=t}var ua={},_t=pa(ua),Ut=pa(!1),Xa=ua;function Yi(e,t){var r=e.type.contextTypes;if(!r)return ua;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Bt(e){return e=e.childContextTypes,e!=null}function Cc(){Te(Ut),Te(_t)}function Iv(e,t,r){if(_t.current!==ua)throw Error(H(168));ke(_t,t),ke(Ut,r)}function Nw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(H(108,r4(e)||"Unknown",a));return Re({},r,n)}function _c(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ua,Xa=_t.current,ke(_t,e),ke(Ut,Ut.current),!0}function Mv(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=Nw(e,t,Xa),n.__reactInternalMemoizedMergedChildContext=e,Te(Ut),Te(_t),ke(_t,e)):Te(Ut),ke(Ut,r)}var sn=null,Au=!1,gf=!1;function Cw(e){sn===null?sn=[e]:sn.push(e)}function x5(e){Au=!0,Cw(e)}function ga(){if(!gf&&sn!==null){gf=!0;var e=0,t=we;try{var r=sn;for(we=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}sn=null,Au=!1}catch(a){throw sn!==null&&(sn=sn.slice(e+1)),Xb(mp,ga),a}finally{we=t,gf=!1}}return null}var Ai=[],Di=0,kc=null,Ec=0,mr=[],pr=0,Qa=null,un=1,dn="";function Ca(e,t){Ai[Di++]=Ec,Ai[Di++]=kc,kc=e,Ec=t}function _w(e,t,r){mr[pr++]=un,mr[pr++]=dn,mr[pr++]=Qa,Qa=e;var n=un;e=dn;var a=32-zr(n)-1;n&=~(1<<a),r+=1;var i=32-zr(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,un=1<<32-zr(t)+a|r<<a|n,dn=i+e}else un=1<<i|r<<a|n,dn=e}function Sp(e){e.return!==null&&(Ca(e,1),_w(e,1,0))}function Np(e){for(;e===kc;)kc=Ai[--Di],Ai[Di]=null,Ec=Ai[--Di],Ai[Di]=null;for(;e===Qa;)Qa=mr[--pr],mr[pr]=null,dn=mr[--pr],mr[pr]=null,un=mr[--pr],mr[pr]=null}var rr=null,tr=null,Ae=!1,Mr=null;function kw(e,t){var r=vr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function $v(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,tr=ra(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,tr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qa!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rr=e,tr=null,!0):!1;default:return!1}}function Th(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ah(e){if(Ae){var t=tr;if(t){var r=t;if(!$v(e,t)){if(Th(e))throw Error(H(418));t=ra(r.nextSibling);var n=rr;t&&$v(e,t)?kw(n,r):(e.flags=e.flags&-4097|2,Ae=!1,rr=e)}}else{if(Th(e))throw Error(H(418));e.flags=e.flags&-4097|2,Ae=!1,rr=e}}}function Lv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function Ol(e){if(e!==rr)return!1;if(!Ae)return Lv(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kh(e.type,e.memoizedProps)),t&&(t=tr)){if(Th(e))throw Ew(),Error(H(418));for(;t;)kw(e,t),t=ra(t.nextSibling)}if(Lv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){tr=ra(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}tr=null}}else tr=rr?ra(e.stateNode.nextSibling):null;return!0}function Ew(){for(var e=tr;e;)e=ra(e.nextSibling)}function Xi(){tr=rr=null,Ae=!1}function Cp(e){Mr===null?Mr=[e]:Mr.push(e)}var b5=kn.ReactCurrentBatchConfig;function To(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function Tl(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rv(e){var t=e._init;return t(e._payload)}function Pw(e){function t(p,b){if(e){var w=p.deletions;w===null?(p.deletions=[b],p.flags|=16):w.push(b)}}function r(p,b){if(!e)return null;for(;b!==null;)t(p,b),b=b.sibling;return null}function n(p,b){for(p=new Map;b!==null;)b.key!==null?p.set(b.key,b):p.set(b.index,b),b=b.sibling;return p}function a(p,b){return p=oa(p,b),p.index=0,p.sibling=null,p}function i(p,b,w){return p.index=w,e?(w=p.alternate,w!==null?(w=w.index,w<b?(p.flags|=2,b):w):(p.flags|=2,b)):(p.flags|=1048576,b)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,b,w,j){return b===null||b.tag!==6?(b=Sf(w,p.mode,j),b.return=p,b):(b=a(b,w),b.return=p,b)}function c(p,b,w,j){var S=w.type;return S===_i?d(p,b,w.props.children,j,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fn&&Rv(S)===b.type)?(j=a(b,w.props),j.ref=To(p,b,w),j.return=p,j):(j=hc(w.type,w.key,w.props,null,p.mode,j),j.ref=To(p,b,w),j.return=p,j)}function u(p,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Nf(w,p.mode,j),b.return=p,b):(b=a(b,w.children||[]),b.return=p,b)}function d(p,b,w,j,S){return b===null||b.tag!==7?(b=Wa(w,p.mode,j,S),b.return=p,b):(b=a(b,w),b.return=p,b)}function f(p,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Sf(""+b,p.mode,w),b.return=p,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return w=hc(b.type,b.key,b.props,null,p.mode,w),w.ref=To(p,null,b),w.return=p,w;case Ci:return b=Nf(b,p.mode,w),b.return=p,b;case Fn:var j=b._init;return f(p,j(b._payload),w)}if(qo(b)||_o(b))return b=Wa(b,p.mode,w,null),b.return=p,b;Tl(p,b)}return null}function h(p,b,w,j){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(p,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bl:return w.key===S?c(p,b,w,j):null;case Ci:return w.key===S?u(p,b,w,j):null;case Fn:return S=w._init,h(p,b,S(w._payload),j)}if(qo(w)||_o(w))return S!==null?null:d(p,b,w,j,null);Tl(p,w)}return null}function m(p,b,w,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(w)||null,l(b,p,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bl:return p=p.get(j.key===null?w:j.key)||null,c(b,p,j,S);case Ci:return p=p.get(j.key===null?w:j.key)||null,u(b,p,j,S);case Fn:var N=j._init;return m(p,b,w,N(j._payload),S)}if(qo(j)||_o(j))return p=p.get(w)||null,d(b,p,j,S,null);Tl(b,j)}return null}function v(p,b,w,j){for(var S=null,N=null,C=b,_=b=0,A=null;C!==null&&_<w.length;_++){C.index>_?(A=C,C=null):A=C.sibling;var k=h(p,C,w[_],j);if(k===null){C===null&&(C=A);break}e&&C&&k.alternate===null&&t(p,C),b=i(k,b,_),N===null?S=k:N.sibling=k,N=k,C=A}if(_===w.length)return r(p,C),Ae&&Ca(p,_),S;if(C===null){for(;_<w.length;_++)C=f(p,w[_],j),C!==null&&(b=i(C,b,_),N===null?S=C:N.sibling=C,N=C);return Ae&&Ca(p,_),S}for(C=n(p,C);_<w.length;_++)A=m(C,p,_,w[_],j),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?_:A.key),b=i(A,b,_),N===null?S=A:N.sibling=A,N=A);return e&&C.forEach(function(T){return t(p,T)}),Ae&&Ca(p,_),S}function x(p,b,w,j){var S=_o(w);if(typeof S!="function")throw Error(H(150));if(w=S.call(w),w==null)throw Error(H(151));for(var N=S=null,C=b,_=b=0,A=null,k=w.next();C!==null&&!k.done;_++,k=w.next()){C.index>_?(A=C,C=null):A=C.sibling;var T=h(p,C,k.value,j);if(T===null){C===null&&(C=A);break}e&&C&&T.alternate===null&&t(p,C),b=i(T,b,_),N===null?S=T:N.sibling=T,N=T,C=A}if(k.done)return r(p,C),Ae&&Ca(p,_),S;if(C===null){for(;!k.done;_++,k=w.next())k=f(p,k.value,j),k!==null&&(b=i(k,b,_),N===null?S=k:N.sibling=k,N=k);return Ae&&Ca(p,_),S}for(C=n(p,C);!k.done;_++,k=w.next())k=m(C,p,_,k.value,j),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?_:k.key),b=i(k,b,_),N===null?S=k:N.sibling=k,N=k);return e&&C.forEach(function(U){return t(p,U)}),Ae&&Ca(p,_),S}function y(p,b,w,j){if(typeof w=="object"&&w!==null&&w.type===_i&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bl:e:{for(var S=w.key,N=b;N!==null;){if(N.key===S){if(S=w.type,S===_i){if(N.tag===7){r(p,N.sibling),b=a(N,w.props.children),b.return=p,p=b;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fn&&Rv(S)===N.type){r(p,N.sibling),b=a(N,w.props),b.ref=To(p,N,w),b.return=p,p=b;break e}r(p,N);break}else t(p,N);N=N.sibling}w.type===_i?(b=Wa(w.props.children,p.mode,j,w.key),b.return=p,p=b):(j=hc(w.type,w.key,w.props,null,p.mode,j),j.ref=To(p,b,w),j.return=p,p=j)}return o(p);case Ci:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(p,b.sibling),b=a(b,w.children||[]),b.return=p,p=b;break e}else{r(p,b);break}else t(p,b);b=b.sibling}b=Nf(w,p.mode,j),b.return=p,p=b}return o(p);case Fn:return N=w._init,y(p,b,N(w._payload),j)}if(qo(w))return v(p,b,w,j);if(_o(w))return x(p,b,w,j);Tl(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(p,b.sibling),b=a(b,w),b.return=p,p=b):(r(p,b),b=Sf(w,p.mode,j),b.return=p,p=b),o(p)):r(p,b)}return y}var Qi=Pw(!0),Ow=Pw(!1),Pc=pa(null),Oc=null,Ii=null,_p=null;function kp(){_p=Ii=Oc=null}function Ep(e){var t=Pc.current;Te(Pc),e._currentValue=t}function Dh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Wi(e,t){Oc=e,_p=Ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function jr(e){var t=e._currentValue;if(_p!==e)if(e={context:e,memoizedValue:t,next:null},Ii===null){if(Oc===null)throw Error(H(308));Ii=e,Oc.dependencies={lanes:0,firstContext:e}}else Ii=Ii.next=e;return t}var Da=null;function Pp(e){Da===null?Da=[e]:Da.push(e)}function Tw(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Pp(t)):(r.next=a.next,a.next=r),t.interleaved=r,xn(e,n)}function xn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Un=!1;function Op(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,xn(e,r)}return a=n.interleaved,a===null?(t.next=t,Pp(n)):(t.next=a.next,a.next=t),n.interleaved=t,xn(e,r)}function sc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pp(e,r)}}function zv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Tc(e,t,r,n){var a=e.updateQueue;Un=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(h=t,m=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,h=typeof v=="function"?v.call(m,f,h):v,h==null)break e;f=Re({},f,h);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Za|=o,e.lanes=o,e.memoizedState=f}}function Fv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(H(191,a));a.call(n)}}}var Xs={},Jr=pa(Xs),Ss=pa(Xs),Ns=pa(Xs);function Ia(e){if(e===Xs)throw Error(H(174));return e}function Tp(e,t){switch(ke(Ns,t),ke(Ss,e),ke(Jr,Xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hh(t,e)}Te(Jr),ke(Jr,t)}function Ji(){Te(Jr),Te(Ss),Te(Ns)}function Dw(e){Ia(Ns.current);var t=Ia(Jr.current),r=hh(t,e.type);t!==r&&(ke(Ss,e),ke(Jr,r))}function Ap(e){Ss.current===e&&(Te(Jr),Te(Ss))}var $e=pa(0);function Ac(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vf=[];function Dp(){for(var e=0;e<vf.length;e++)vf[e]._workInProgressVersionPrimary=null;vf.length=0}var lc=kn.ReactCurrentDispatcher,yf=kn.ReactCurrentBatchConfig,Ja=0,Le=null,Xe=null,nt=null,Dc=!1,ts=!1,Cs=0,w5=0;function bt(){throw Error(H(321))}function Ip(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ur(e[r],t[r]))return!1;return!0}function Mp(e,t,r,n,a,i){if(Ja=i,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lc.current=e===null||e.memoizedState===null?C5:_5,e=r(n,a),ts){i=0;do{if(ts=!1,Cs=0,25<=i)throw Error(H(301));i+=1,nt=Xe=null,t.updateQueue=null,lc.current=k5,e=r(n,a)}while(ts)}if(lc.current=Ic,t=Xe!==null&&Xe.next!==null,Ja=0,nt=Xe=Le=null,Dc=!1,t)throw Error(H(300));return e}function $p(){var e=Cs!==0;return Cs=0,e}function Gr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Le.memoizedState=nt=e:nt=nt.next=e,nt}function Sr(){if(Xe===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=nt===null?Le.memoizedState:nt.next;if(t!==null)nt=t,Xe=e;else{if(e===null)throw Error(H(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},nt===null?Le.memoizedState=nt=e:nt=nt.next=e}return nt}function _s(e,t){return typeof t=="function"?t(e):t}function xf(e){var t=Sr(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=Xe,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ja&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Le.lanes|=d,Za|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ur(n,t.memoizedState)||(zt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Le.lanes|=i,Za|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bf(e){var t=Sr(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ur(i,t.memoizedState)||(zt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Iw(){}function Mw(e,t){var r=Le,n=Sr(),a=t(),i=!Ur(n.memoizedState,a);if(i&&(n.memoizedState=a,zt=!0),n=n.queue,Lp(Rw.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||nt!==null&&nt.memoizedState.tag&1){if(r.flags|=2048,ks(9,Lw.bind(null,r,n,a,t),void 0,null),at===null)throw Error(H(349));Ja&30||$w(r,t,a)}return a}function $w(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Lw(e,t,r,n){t.value=r,t.getSnapshot=n,zw(t)&&Fw(e)}function Rw(e,t,r){return r(function(){zw(t)&&Fw(e)})}function zw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ur(e,r)}catch{return!0}}function Fw(e){var t=xn(e,1);t!==null&&Fr(t,e,1,-1)}function Uv(e){var t=Gr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=N5.bind(null,Le,e),[t.memoizedState,e]}function ks(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Uw(){return Sr().memoizedState}function cc(e,t,r,n){var a=Gr();Le.flags|=e,a.memoizedState=ks(1|t,r,void 0,n===void 0?null:n)}function Du(e,t,r,n){var a=Sr();n=n===void 0?null:n;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,n!==null&&Ip(n,o.deps)){a.memoizedState=ks(t,r,i,n);return}}Le.flags|=e,a.memoizedState=ks(1|t,r,i,n)}function Bv(e,t){return cc(8390656,8,e,t)}function Lp(e,t){return Du(2048,8,e,t)}function Bw(e,t){return Du(4,2,e,t)}function Ww(e,t){return Du(4,4,e,t)}function qw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hw(e,t,r){return r=r!=null?r.concat([e]):null,Du(4,4,qw.bind(null,t,e),r)}function Rp(){}function Kw(e,t){var r=Sr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ip(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Vw(e,t){var r=Sr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ip(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Gw(e,t,r){return Ja&21?(Ur(r,t)||(r=Zb(),Le.lanes|=r,Za|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=r)}function j5(e,t){var r=we;we=r!==0&&4>r?r:4,e(!0);var n=yf.transition;yf.transition={};try{e(!1),t()}finally{we=r,yf.transition=n}}function Yw(){return Sr().memoizedState}function S5(e,t,r){var n=ia(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xw(e))Qw(t,r);else if(r=Tw(e,t,r,n),r!==null){var a=Ot();Fr(r,e,n,a),Jw(r,t,n)}}function N5(e,t,r){var n=ia(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xw(e))Qw(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ur(l,o)){var c=t.interleaved;c===null?(a.next=a,Pp(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Tw(e,t,a,n),r!==null&&(a=Ot(),Fr(r,e,n,a),Jw(r,t,n))}}function Xw(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Qw(e,t){ts=Dc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Jw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pp(e,r)}}var Ic={readContext:jr,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},C5={readContext:jr,useCallback:function(e,t){return Gr().memoizedState=[e,t===void 0?null:t],e},useContext:jr,useEffect:Bv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,cc(4194308,4,qw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cc(4194308,4,e,t)},useInsertionEffect:function(e,t){return cc(4,2,e,t)},useMemo:function(e,t){var r=Gr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Gr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=S5.bind(null,Le,e),[n.memoizedState,e]},useRef:function(e){var t=Gr();return e={current:e},t.memoizedState=e},useState:Uv,useDebugValue:Rp,useDeferredValue:function(e){return Gr().memoizedState=e},useTransition:function(){var e=Uv(!1),t=e[0];return e=j5.bind(null,e[1]),Gr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Le,a=Gr();if(Ae){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),at===null)throw Error(H(349));Ja&30||$w(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Bv(Rw.bind(null,n,i,e),[e]),n.flags|=2048,ks(9,Lw.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Gr(),t=at.identifierPrefix;if(Ae){var r=dn,n=un;r=(n&~(1<<32-zr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=w5++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_5={readContext:jr,useCallback:Kw,useContext:jr,useEffect:Lp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:Ww,useMemo:Vw,useReducer:xf,useRef:Uw,useState:function(){return xf(_s)},useDebugValue:Rp,useDeferredValue:function(e){var t=Sr();return Gw(t,Xe.memoizedState,e)},useTransition:function(){var e=xf(_s)[0],t=Sr().memoizedState;return[e,t]},useMutableSource:Iw,useSyncExternalStore:Mw,useId:Yw,unstable_isNewReconciler:!1},k5={readContext:jr,useCallback:Kw,useContext:jr,useEffect:Lp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:Ww,useMemo:Vw,useReducer:bf,useRef:Uw,useState:function(){return bf(_s)},useDebugValue:Rp,useDeferredValue:function(e){var t=Sr();return Xe===null?t.memoizedState=e:Gw(t,Xe.memoizedState,e)},useTransition:function(){var e=bf(_s)[0],t=Sr().memoizedState;return[e,t]},useMutableSource:Iw,useSyncExternalStore:Mw,useId:Yw,unstable_isNewReconciler:!1};function Ar(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ih(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Iu={isMounted:function(e){return(e=e._reactInternals)?oi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ot(),a=ia(e),i=mn(n,a);i.payload=t,r!=null&&(i.callback=r),t=na(e,i,a),t!==null&&(Fr(t,e,a,n),sc(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ot(),a=ia(e),i=mn(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=na(e,i,a),t!==null&&(Fr(t,e,a,n),sc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ot(),n=ia(e),a=mn(r,n);a.tag=2,t!=null&&(a.callback=t),t=na(e,a,n),t!==null&&(Fr(t,e,n,r),sc(t,e,n))}};function Wv(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!xs(r,n)||!xs(a,i):!0}function Zw(e,t,r){var n=!1,a=ua,i=t.contextType;return typeof i=="object"&&i!==null?i=jr(i):(a=Bt(t)?Xa:_t.current,n=t.contextTypes,i=(n=n!=null)?Yi(e,a):ua),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Iu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function qv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Iu.enqueueReplaceState(t,t.state,null)}function Mh(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Op(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=jr(i):(i=Bt(t)?Xa:_t.current,a.context=Yi(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ih(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Iu.enqueueReplaceState(a,a.state,null),Tc(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Zi(e,t){try{var r="",n=t;do r+=t4(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function wf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $h(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var E5=typeof WeakMap=="function"?WeakMap:Map;function e2(e,t,r){r=mn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$c||($c=!0,Kh=n),$h(e,t)},r}function t2(e,t,r){r=mn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){$h(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){$h(e,t),typeof n!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Hv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new E5;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=B5.bind(null,e,t,r),t.then(e,e))}function Kv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vv(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=mn(-1,1),t.tag=2,na(r,t,1))),r.lanes|=1),e)}var P5=kn.ReactCurrentOwner,zt=!1;function kt(e,t,r,n){t.child=e===null?Ow(t,null,r,n):Qi(t,e.child,r,n)}function Gv(e,t,r,n,a){r=r.render;var i=t.ref;return Wi(t,a),n=Mp(e,t,r,n,i,a),r=$p(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bn(e,t,a)):(Ae&&r&&Sp(t),t.flags|=1,kt(e,t,n,a),t.child)}function Yv(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Kp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,r2(e,t,i,n,a)):(e=hc(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:xs,r(o,n)&&e.ref===t.ref)return bn(e,t,a)}return t.flags|=1,e=oa(i,n),e.ref=t.ref,e.return=t,t.child=e}function r2(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(xs(i,n)&&e.ref===t.ref)if(zt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,bn(e,t,a)}return Lh(e,t,r,n,a)}function n2(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke($i,Qt),Qt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke($i,Qt),Qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ke($i,Qt),Qt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ke($i,Qt),Qt|=n;return kt(e,t,a,r),t.child}function a2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Lh(e,t,r,n,a){var i=Bt(r)?Xa:_t.current;return i=Yi(t,i),Wi(t,a),r=Mp(e,t,r,n,i,a),n=$p(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bn(e,t,a)):(Ae&&n&&Sp(t),t.flags|=1,kt(e,t,r,a),t.child)}function Xv(e,t,r,n,a){if(Bt(r)){var i=!0;_c(t)}else i=!1;if(Wi(t,a),t.stateNode===null)uc(e,t),Zw(t,r,n),Mh(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=Bt(r)?Xa:_t.current,u=Yi(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&qv(t,o,n,u),Un=!1;var h=t.memoizedState;o.state=h,Tc(t,n,o,a),c=t.memoizedState,l!==n||h!==c||Ut.current||Un?(typeof d=="function"&&(Ih(t,r,d,n),c=t.memoizedState),(l=Un||Wv(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Aw(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ar(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=jr(c):(c=Bt(r)?Xa:_t.current,c=Yi(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&qv(t,o,n,c),Un=!1,h=t.memoizedState,o.state=h,Tc(t,n,o,a);var v=t.memoizedState;l!==f||h!==v||Ut.current||Un?(typeof m=="function"&&(Ih(t,r,m,n),v=t.memoizedState),(u=Un||Wv(t,r,u,n,h,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Rh(e,t,r,n,i,a)}function Rh(e,t,r,n,a,i){a2(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Mv(t,r,!1),bn(e,t,i);n=t.stateNode,P5.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,l,i)):kt(e,t,l,i),t.memoizedState=n.state,a&&Mv(t,r,!0),t.child}function i2(e){var t=e.stateNode;t.pendingContext?Iv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Iv(e,t.context,!1),Tp(e,t.containerInfo)}function Qv(e,t,r,n,a){return Xi(),Cp(a),t.flags|=256,kt(e,t,r,n),t.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Fh(e){return{baseLanes:e,cachePool:null,transitions:null}}function o2(e,t,r){var n=t.pendingProps,a=$e.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ke($e,a&1),e===null)return Ah(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Lu(o,n,0,null),e=Wa(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fh(r),t.memoizedState=zh,e):zp(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return O5(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=oa(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=oa(l,i):(i=Wa(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Fh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=zh,n}return i=e.child,e=i.sibling,n=oa(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zp(e,t){return t=Lu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Al(e,t,r,n){return n!==null&&Cp(n),Qi(t,e.child,null,r),e=zp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function O5(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=wf(Error(H(422))),Al(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Lu({mode:"visible",children:n.children},a,0,null),i=Wa(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Qi(t,e.child,null,o),t.child.memoizedState=Fh(o),t.memoizedState=zh,i);if(!(t.mode&1))return Al(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(H(419)),n=wf(i,n,void 0),Al(e,t,o,n)}if(l=(o&e.childLanes)!==0,zt||l){if(n=at,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xn(e,a),Fr(n,e,a,-1))}return Hp(),n=wf(Error(H(421))),Al(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=W5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,tr=ra(a.nextSibling),rr=t,Ae=!0,Mr=null,e!==null&&(mr[pr++]=un,mr[pr++]=dn,mr[pr++]=Qa,un=e.id,dn=e.overflow,Qa=t),t=zp(t,n.children),t.flags|=4096,t)}function Jv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Dh(e.return,t,r)}function jf(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function s2(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(kt(e,t,n.children,r),n=$e.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jv(e,r,t);else if(e.tag===19)Jv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ke($e,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ac(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jf(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ac(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jf(t,!0,r,null,i);break;case"together":jf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Za|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=oa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=oa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function T5(e,t,r){switch(t.tag){case 3:i2(t),Xi();break;case 5:Dw(t);break;case 1:Bt(t.type)&&_c(t);break;case 4:Tp(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ke(Pc,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ke($e,$e.current&1),t.flags|=128,null):r&t.child.childLanes?o2(e,t,r):(ke($e,$e.current&1),e=bn(e,t,r),e!==null?e.sibling:null);ke($e,$e.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return s2(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ke($e,$e.current),n)break;return null;case 22:case 23:return t.lanes=0,n2(e,t,r)}return bn(e,t,r)}var l2,Uh,c2,u2;l2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uh=function(){};c2=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ia(Jr.current);var i=null;switch(r){case"input":a=ch(e,a),n=ch(e,n),i=[];break;case"select":a=Re({},a,{value:void 0}),n=Re({},n,{value:void 0}),i=[];break;case"textarea":a=fh(e,a),n=fh(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nc)}mh(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};u2=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ao(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function A5(e,t,r){var n=t.pendingProps;switch(Np(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Bt(t.type)&&Cc(),wt(t),null;case 3:return n=t.stateNode,Ji(),Te(Ut),Te(_t),Dp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ol(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mr!==null&&(Yh(Mr),Mr=null))),Uh(e,t),wt(t),null;case 5:Ap(t);var a=Ia(Ns.current);if(r=t.type,e!==null&&t.stateNode!=null)c2(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return wt(t),null}if(e=Ia(Jr.current),Ol(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Yr]=t,n[js]=i,e=(t.mode&1)!==0,r){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(a=0;a<Ko.length;a++)Pe(Ko[a],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":sv(n,i),Pe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",n);break;case"textarea":cv(n,i),Pe("invalid",n)}mh(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pl(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pl(n.textContent,l,e),a=["children",""+l]):fs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",n)}switch(r){case"input":wl(n),lv(n,i,!0);break;case"textarea":wl(n),uv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nc)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rb(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Yr]=t,e[js]=n,l2(e,t,!1,!1),t.stateNode=e;e:{switch(o=ph(r,n),r){case"dialog":Pe("cancel",e),Pe("close",e),a=n;break;case"iframe":case"object":case"embed":Pe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ko.length;a++)Pe(Ko[a],e);a=n;break;case"source":Pe("error",e),a=n;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),a=n;break;case"details":Pe("toggle",e),a=n;break;case"input":sv(e,n),a=ch(e,n),Pe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Re({},n,{value:void 0}),Pe("invalid",e);break;case"textarea":cv(e,n),a=fh(e,n),Pe("invalid",e);break;default:a=n}mh(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ub(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zb(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hs(e,c):typeof c=="number"&&hs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Pe("scroll",e):c!=null&&cp(e,i,c,o))}switch(r){case"input":wl(e),lv(e,n,!1);break;case"textarea":wl(e),uv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ca(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?zi(e,!!n.multiple,i,!1):n.defaultValue!=null&&zi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Nc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)u2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=Ia(Ns.current),Ia(Jr.current),Ol(t)){if(n=t.stateNode,r=t.memoizedProps,n[Yr]=t,(i=n.nodeValue!==r)&&(e=rr,e!==null))switch(e.tag){case 3:Pl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pl(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Yr]=t,t.stateNode=n}return wt(t),null;case 13:if(Te($e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&tr!==null&&t.mode&1&&!(t.flags&128))Ew(),Xi(),t.flags|=98560,i=!1;else if(i=Ol(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Yr]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wt(t),i=!1}else Mr!==null&&(Yh(Mr),Mr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Qe===0&&(Qe=3):Hp())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Ji(),Uh(e,t),e===null&&bs(t.stateNode.containerInfo),wt(t),null;case 10:return Ep(t.type._context),wt(t),null;case 17:return Bt(t.type)&&Cc(),wt(t),null;case 19:if(Te($e),i=t.memoizedState,i===null)return wt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ao(i,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ac(e),o!==null){for(t.flags|=128,Ao(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ke($e,$e.current&1|2),t.child}e=e.sibling}i.tail!==null&&Be()>eo&&(t.flags|=128,n=!0,Ao(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ac(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return wt(t),null}else 2*Be()-i.renderingStartTime>eo&&r!==1073741824&&(t.flags|=128,n=!0,Ao(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Be(),t.sibling=null,r=$e.current,ke($e,n?r&1|2:r&1),t):(wt(t),null);case 22:case 23:return qp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Qt&1073741824&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function D5(e,t){switch(Np(t),t.tag){case 1:return Bt(t.type)&&Cc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ji(),Te(Ut),Te(_t),Dp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ap(t),null;case 13:if(Te($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te($e),null;case 4:return Ji(),null;case 10:return Ep(t.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Dl=!1,Nt=!1,I5=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Mi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ue(e,t,n)}else r.current=null}function Bh(e,t,r){try{r()}catch(n){Ue(e,t,n)}}var Zv=!1;function M5(e,t){if(Ch=wc,e=pw(),jp(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(_h={focusedElem:e,selectionRange:r},wc=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,y=v.memoizedState,p=t.stateNode,b=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ar(t.type,x),y);p.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(j){Ue(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return v=Zv,Zv=!1,v}function rs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Bh(t,r,i)}a=a.next}while(a!==n)}}function Mu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Wh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function d2(e){var t=e.alternate;t!==null&&(e.alternate=null,d2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yr],delete t[js],delete t[Ph],delete t[v5],delete t[y5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function f2(e){return e.tag===5||e.tag===3||e.tag===4}function ey(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||f2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nc));else if(n!==4&&(e=e.child,e!==null))for(qh(e,t,r),e=e.sibling;e!==null;)qh(e,t,r),e=e.sibling}function Hh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Hh(e,t,r),e=e.sibling;e!==null;)Hh(e,t,r),e=e.sibling}var ct=null,Dr=!1;function $n(e,t,r){for(r=r.child;r!==null;)h2(e,t,r),r=r.sibling}function h2(e,t,r){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(ku,r)}catch{}switch(r.tag){case 5:Nt||Mi(r,t);case 6:var n=ct,a=Dr;ct=null,$n(e,t,r),ct=n,Dr=a,ct!==null&&(Dr?(e=ct,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ct.removeChild(r.stateNode));break;case 18:ct!==null&&(Dr?(e=ct,r=r.stateNode,e.nodeType===8?pf(e.parentNode,r):e.nodeType===1&&pf(e,r),vs(e)):pf(ct,r.stateNode));break;case 4:n=ct,a=Dr,ct=r.stateNode.containerInfo,Dr=!0,$n(e,t,r),ct=n,Dr=a;break;case 0:case 11:case 14:case 15:if(!Nt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bh(r,t,o),a=a.next}while(a!==n)}$n(e,t,r);break;case 1:if(!Nt&&(Mi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ue(r,t,l)}$n(e,t,r);break;case 21:$n(e,t,r);break;case 22:r.mode&1?(Nt=(n=Nt)||r.memoizedState!==null,$n(e,t,r),Nt=n):$n(e,t,r);break;default:$n(e,t,r)}}function ty(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new I5),t.forEach(function(n){var a=q5.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Or(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,Dr=!1;break e;case 3:ct=l.stateNode.containerInfo,Dr=!0;break e;case 4:ct=l.stateNode.containerInfo,Dr=!0;break e}l=l.return}if(ct===null)throw Error(H(160));h2(i,o,a),ct=null,Dr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ue(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)m2(t,e),t=t.sibling}function m2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),Vr(e),n&4){try{rs(3,e,e.return),Mu(3,e)}catch(x){Ue(e,e.return,x)}try{rs(5,e,e.return)}catch(x){Ue(e,e.return,x)}}break;case 1:Or(t,e),Vr(e),n&512&&r!==null&&Mi(r,r.return);break;case 5:if(Or(t,e),Vr(e),n&512&&r!==null&&Mi(r,r.return),e.flags&32){var a=e.stateNode;try{hs(a,"")}catch(x){Ue(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$b(a,i),ph(l,o);var u=ph(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Ub(a,f):d==="dangerouslySetInnerHTML"?zb(a,f):d==="children"?hs(a,f):cp(a,d,f,u)}switch(l){case"input":uh(a,i);break;case"textarea":Lb(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?zi(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?zi(a,!!i.multiple,i.defaultValue,!0):zi(a,!!i.multiple,i.multiple?[]:"",!1))}a[js]=i}catch(x){Ue(e,e.return,x)}}break;case 6:if(Or(t,e),Vr(e),n&4){if(e.stateNode===null)throw Error(H(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Ue(e,e.return,x)}}break;case 3:if(Or(t,e),Vr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch(x){Ue(e,e.return,x)}break;case 4:Or(t,e),Vr(e);break;case 13:Or(t,e),Vr(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Bp=Be())),n&4&&ty(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Nt=(u=Nt)||d,Or(t,e),Nt=u):Or(t,e),Vr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(f=Q=d;Q!==null;){switch(h=Q,m=h.child,h.tag){case 0:case 11:case 14:case 15:rs(4,h,h.return);break;case 1:Mi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Ue(n,r,x)}}break;case 5:Mi(h,h.return);break;case 22:if(h.memoizedState!==null){ny(f);continue}}m!==null?(m.return=h,Q=m):ny(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Fb("display",o))}catch(x){Ue(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Ue(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Or(t,e),Vr(e),n&4&&ty(e);break;case 21:break;default:Or(t,e),Vr(e)}}function Vr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(f2(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hs(a,""),n.flags&=-33);var i=ey(e);Hh(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ey(e);qh(e,l,o);break;default:throw Error(H(161))}}catch(c){Ue(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $5(e,t,r){Q=e,p2(e)}function p2(e,t,r){for(var n=(e.mode&1)!==0;Q!==null;){var a=Q,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Dl;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=Dl;var u=Nt;if(Dl=o,(Nt=c)&&!u)for(Q=a;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?ay(a):c!==null?(c.return=o,Q=c):ay(a);for(;i!==null;)Q=i,p2(i),i=i.sibling;Q=a,Dl=l,Nt=u}ry(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Q=i):ry(e)}}function ry(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||Mu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Nt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ar(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Fv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&vs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Nt||t.flags&512&&Wh(t)}catch(h){Ue(t,t.return,h)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function ny(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function ay(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Mu(4,t)}catch(c){Ue(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ue(t,a,c)}}var i=t.return;try{Wh(t)}catch(c){Ue(t,i,c)}break;case 5:var o=t.return;try{Wh(t)}catch(c){Ue(t,o,c)}}}catch(c){Ue(t,t.return,c)}if(t===e){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var L5=Math.ceil,Mc=kn.ReactCurrentDispatcher,Fp=kn.ReactCurrentOwner,br=kn.ReactCurrentBatchConfig,pe=0,at=null,Ke=null,ht=0,Qt=0,$i=pa(0),Qe=0,Es=null,Za=0,$u=0,Up=0,ns=null,Lt=null,Bp=0,eo=1/0,an=null,$c=!1,Kh=null,aa=null,Il=!1,Qn=null,Lc=0,as=0,Vh=null,dc=-1,fc=0;function Ot(){return pe&6?Be():dc!==-1?dc:dc=Be()}function ia(e){return e.mode&1?pe&2&&ht!==0?ht&-ht:b5.transition!==null?(fc===0&&(fc=Zb()),fc):(e=we,e!==0||(e=window.event,e=e===void 0?16:ow(e.type)),e):1}function Fr(e,t,r,n){if(50<as)throw as=0,Vh=null,Error(H(185));Vs(e,r,n),(!(pe&2)||e!==at)&&(e===at&&(!(pe&2)&&($u|=r),Qe===4&&Kn(e,ht)),Wt(e,n),r===1&&pe===0&&!(t.mode&1)&&(eo=Be()+500,Au&&ga()))}function Wt(e,t){var r=e.callbackNode;b4(e,t);var n=bc(e,e===at?ht:0);if(n===0)r!==null&&hv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&hv(r),t===1)e.tag===0?x5(iy.bind(null,e)):Cw(iy.bind(null,e)),p5(function(){!(pe&6)&&ga()}),r=null;else{switch(ew(n)){case 1:r=mp;break;case 4:r=Qb;break;case 16:r=xc;break;case 536870912:r=Jb;break;default:r=xc}r=S2(r,g2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function g2(e,t){if(dc=-1,fc=0,pe&6)throw Error(H(327));var r=e.callbackNode;if(qi()&&e.callbackNode!==r)return null;var n=bc(e,e===at?ht:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Rc(e,n);else{t=n;var a=pe;pe|=2;var i=y2();(at!==e||ht!==t)&&(an=null,eo=Be()+500,Ba(e,t));do try{F5();break}catch(l){v2(e,l)}while(!0);kp(),Mc.current=i,pe=a,Ke!==null?t=0:(at=null,ht=0,t=Qe)}if(t!==0){if(t===2&&(a=bh(e),a!==0&&(n=a,t=Gh(e,a))),t===1)throw r=Es,Ba(e,0),Kn(e,n),Wt(e,Be()),r;if(t===6)Kn(e,n);else{if(a=e.current.alternate,!(n&30)&&!R5(a)&&(t=Rc(e,n),t===2&&(i=bh(e),i!==0&&(n=i,t=Gh(e,i))),t===1))throw r=Es,Ba(e,0),Kn(e,n),Wt(e,Be()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:_a(e,Lt,an);break;case 3:if(Kn(e,n),(n&130023424)===n&&(t=Bp+500-Be(),10<t)){if(bc(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ot(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Eh(_a.bind(null,e,Lt,an),t);break}_a(e,Lt,an);break;case 4:if(Kn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-zr(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Be()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*L5(n/1960))-n,10<n){e.timeoutHandle=Eh(_a.bind(null,e,Lt,an),n);break}_a(e,Lt,an);break;case 5:_a(e,Lt,an);break;default:throw Error(H(329))}}}return Wt(e,Be()),e.callbackNode===r?g2.bind(null,e):null}function Gh(e,t){var r=ns;return e.current.memoizedState.isDehydrated&&(Ba(e,t).flags|=256),e=Rc(e,t),e!==2&&(t=Lt,Lt=r,t!==null&&Yh(t)),e}function Yh(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function R5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ur(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kn(e,t){for(t&=~Up,t&=~$u,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zr(t),n=1<<r;e[r]=-1,t&=~n}}function iy(e){if(pe&6)throw Error(H(327));qi();var t=bc(e,0);if(!(t&1))return Wt(e,Be()),null;var r=Rc(e,t);if(e.tag!==0&&r===2){var n=bh(e);n!==0&&(t=n,r=Gh(e,n))}if(r===1)throw r=Es,Ba(e,0),Kn(e,t),Wt(e,Be()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_a(e,Lt,an),Wt(e,Be()),null}function Wp(e,t){var r=pe;pe|=1;try{return e(t)}finally{pe=r,pe===0&&(eo=Be()+500,Au&&ga())}}function ei(e){Qn!==null&&Qn.tag===0&&!(pe&6)&&qi();var t=pe;pe|=1;var r=br.transition,n=we;try{if(br.transition=null,we=1,e)return e()}finally{we=n,br.transition=r,pe=t,!(pe&6)&&ga()}}function qp(){Qt=$i.current,Te($i)}function Ba(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,m5(r)),Ke!==null)for(r=Ke.return;r!==null;){var n=r;switch(Np(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cc();break;case 3:Ji(),Te(Ut),Te(_t),Dp();break;case 5:Ap(n);break;case 4:Ji();break;case 13:Te($e);break;case 19:Te($e);break;case 10:Ep(n.type._context);break;case 22:case 23:qp()}r=r.return}if(at=e,Ke=e=oa(e.current,null),ht=Qt=t,Qe=0,Es=null,Up=$u=Za=0,Lt=ns=null,Da!==null){for(t=0;t<Da.length;t++)if(r=Da[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Da=null}return e}function v2(e,t){do{var r=Ke;try{if(kp(),lc.current=Ic,Dc){for(var n=Le.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Dc=!1}if(Ja=0,nt=Xe=Le=null,ts=!1,Cs=0,Fp.current=null,r===null||r.return===null){Qe=1,Es=t,Ke=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ht,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Kv(o);if(m!==null){m.flags&=-257,Vv(m,o,l,i,t),m.mode&1&&Hv(i,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){Hv(i,u,t),Hp();break e}c=Error(H(426))}}else if(Ae&&l.mode&1){var y=Kv(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Vv(y,o,l,i,t),Cp(Zi(c,l));break e}}i=c=Zi(c,l),Qe!==4&&(Qe=2),ns===null?ns=[i]:ns.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=e2(i,c,t);zv(i,p);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(aa===null||!aa.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=t2(i,l,t);zv(i,j);break e}}i=i.return}while(i!==null)}b2(r)}catch(S){t=S,Ke===r&&r!==null&&(Ke=r=r.return);continue}break}while(!0)}function y2(){var e=Mc.current;return Mc.current=Ic,e===null?Ic:e}function Hp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),at===null||!(Za&268435455)&&!($u&268435455)||Kn(at,ht)}function Rc(e,t){var r=pe;pe|=2;var n=y2();(at!==e||ht!==t)&&(an=null,Ba(e,t));do try{z5();break}catch(a){v2(e,a)}while(!0);if(kp(),pe=r,Mc.current=n,Ke!==null)throw Error(H(261));return at=null,ht=0,Qe}function z5(){for(;Ke!==null;)x2(Ke)}function F5(){for(;Ke!==null&&!d4();)x2(Ke)}function x2(e){var t=j2(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,t===null?b2(e):Ke=t,Fp.current=null}function b2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=D5(r,t),r!==null){r.flags&=32767,Ke=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ke=null;return}}else if(r=A5(r,t,Qt),r!==null){Ke=r;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Qe===0&&(Qe=5)}function _a(e,t,r){var n=we,a=br.transition;try{br.transition=null,we=1,U5(e,t,r,n)}finally{br.transition=a,we=n}return null}function U5(e,t,r,n){do qi();while(Qn!==null);if(pe&6)throw Error(H(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(w4(e,i),e===at&&(Ke=at=null,ht=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Il||(Il=!0,S2(xc,function(){return qi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=br.transition,br.transition=null;var o=we;we=1;var l=pe;pe|=4,Fp.current=null,M5(e,r),m2(r,e),s5(_h),wc=!!Ch,_h=Ch=null,e.current=r,$5(r),f4(),pe=l,we=o,br.transition=i}else e.current=r;if(Il&&(Il=!1,Qn=e,Lc=a),i=e.pendingLanes,i===0&&(aa=null),p4(r.stateNode),Wt(e,Be()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if($c)throw $c=!1,e=Kh,Kh=null,e;return Lc&1&&e.tag!==0&&qi(),i=e.pendingLanes,i&1?e===Vh?as++:(as=0,Vh=e):as=0,ga(),null}function qi(){if(Qn!==null){var e=ew(Lc),t=br.transition,r=we;try{if(br.transition=null,we=16>e?16:e,Qn===null)var n=!1;else{if(e=Qn,Qn=null,Lc=0,pe&6)throw Error(H(331));var a=pe;for(pe|=4,Q=e.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:rs(8,d,i)}var f=d.child;if(f!==null)f.return=d,Q=f;else for(;Q!==null;){d=Q;var h=d.sibling,m=d.return;if(d2(d),d===u){Q=null;break}if(h!==null){h.return=m,Q=h;break}Q=m}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Q=p;break e}Q=i.return}}var b=e.current;for(Q=b;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=b;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mu(9,l)}}catch(S){Ue(l,l.return,S)}if(l===o){Q=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Q=j;break e}Q=l.return}}if(pe=a,ga(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(ku,e)}catch{}n=!0}return n}finally{we=r,br.transition=t}}return!1}function oy(e,t,r){t=Zi(r,t),t=e2(e,t,1),e=na(e,t,1),t=Ot(),e!==null&&(Vs(e,1,t),Wt(e,t))}function Ue(e,t,r){if(e.tag===3)oy(e,e,r);else for(;t!==null;){if(t.tag===3){oy(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(aa===null||!aa.has(n))){e=Zi(r,e),e=t2(t,e,1),t=na(t,e,1),e=Ot(),t!==null&&(Vs(t,1,e),Wt(t,e));break}}t=t.return}}function B5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&r,at===e&&(ht&r)===r&&(Qe===4||Qe===3&&(ht&130023424)===ht&&500>Be()-Bp?Ba(e,0):Up|=r),Wt(e,t)}function w2(e,t){t===0&&(e.mode&1?(t=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):t=1);var r=Ot();e=xn(e,t),e!==null&&(Vs(e,t,r),Wt(e,r))}function W5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),w2(e,r)}function q5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),w2(e,r)}var j2;j2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)zt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zt=!1,T5(e,t,r);zt=!!(e.flags&131072)}else zt=!1,Ae&&t.flags&1048576&&_w(t,Ec,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;uc(e,t),e=t.pendingProps;var a=Yi(t,_t.current);Wi(t,r),a=Mp(null,t,n,e,a,r);var i=$p();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(n)?(i=!0,_c(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Op(t),a.updater=Iu,t.stateNode=a,a._reactInternals=t,Mh(t,n,e,r),t=Rh(null,t,n,!0,i,r)):(t.tag=0,Ae&&i&&Sp(t),kt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(uc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=K5(n),e=Ar(n,e),a){case 0:t=Lh(null,t,n,e,r);break e;case 1:t=Xv(null,t,n,e,r);break e;case 11:t=Gv(null,t,n,e,r);break e;case 14:t=Yv(null,t,n,Ar(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ar(n,a),Lh(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ar(n,a),Xv(e,t,n,a,r);case 3:e:{if(i2(t),e===null)throw Error(H(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Aw(e,t),Tc(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Zi(Error(H(423)),t),t=Qv(e,t,n,r,a);break e}else if(n!==a){a=Zi(Error(H(424)),t),t=Qv(e,t,n,r,a);break e}else for(tr=ra(t.stateNode.containerInfo.firstChild),rr=t,Ae=!0,Mr=null,r=Ow(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xi(),n===a){t=bn(e,t,r);break e}kt(e,t,n,r)}t=t.child}return t;case 5:return Dw(t),e===null&&Ah(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,kh(n,a)?o=null:i!==null&&kh(n,i)&&(t.flags|=32),a2(e,t),kt(e,t,o,r),t.child;case 6:return e===null&&Ah(t),null;case 13:return o2(e,t,r);case 4:return Tp(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qi(t,null,n,r):kt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ar(n,a),Gv(e,t,n,a,r);case 7:return kt(e,t,t.pendingProps,r),t.child;case 8:return kt(e,t,t.pendingProps.children,r),t.child;case 12:return kt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ke(Pc,n._currentValue),n._currentValue=o,i!==null)if(Ur(i.value,o)){if(i.children===a.children&&!Ut.current){t=bn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=mn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Dh(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Dh(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Wi(t,r),a=jr(a),n=n(a),t.flags|=1,kt(e,t,n,r),t.child;case 14:return n=t.type,a=Ar(n,t.pendingProps),a=Ar(n.type,a),Yv(e,t,n,a,r);case 15:return r2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ar(n,a),uc(e,t),t.tag=1,Bt(n)?(e=!0,_c(t)):e=!1,Wi(t,r),Zw(t,n,a),Mh(t,n,a,r),Rh(null,t,n,!0,e,r);case 19:return s2(e,t,r);case 22:return n2(e,t,r)}throw Error(H(156,t.tag))};function S2(e,t){return Xb(e,t)}function H5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(e,t,r,n){return new H5(e,t,r,n)}function Kp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function K5(e){if(typeof e=="function")return Kp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dp)return 11;if(e===fp)return 14}return 2}function oa(e,t){var r=e.alternate;return r===null?(r=vr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function hc(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Kp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _i:return Wa(r.children,a,i,t);case up:o=8,a|=8;break;case ih:return e=vr(12,r,t,a|2),e.elementType=ih,e.lanes=i,e;case oh:return e=vr(13,r,t,a),e.elementType=oh,e.lanes=i,e;case sh:return e=vr(19,r,t,a),e.elementType=sh,e.lanes=i,e;case Db:return Lu(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tb:o=10;break e;case Ab:o=9;break e;case dp:o=11;break e;case fp:o=14;break e;case Fn:o=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=vr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Wa(e,t,r,n){return e=vr(7,e,n,t),e.lanes=r,e}function Lu(e,t,r,n){return e=vr(22,e,n,t),e.elementType=Db,e.lanes=r,e.stateNode={isHidden:!1},e}function Sf(e,t,r){return e=vr(6,e,null,t),e.lanes=r,e}function Nf(e,t,r){return t=vr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V5(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nf(0),this.expirationTimes=nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nf(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vp(e,t,r,n,a,i,o,l,c){return e=new V5(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Op(i),e}function G5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ci,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function N2(e){if(!e)return ua;e=e._reactInternals;e:{if(oi(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(Bt(r))return Nw(e,r,t)}return t}function C2(e,t,r,n,a,i,o,l,c){return e=Vp(r,n,!0,e,a,i,o,l,c),e.context=N2(null),r=e.current,n=Ot(),a=ia(r),i=mn(n,a),i.callback=t??null,na(r,i,a),e.current.lanes=a,Vs(e,a,n),Wt(e,n),e}function Ru(e,t,r,n){var a=t.current,i=Ot(),o=ia(a);return r=N2(r),t.context===null?t.context=r:t.pendingContext=r,t=mn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=na(a,t,o),e!==null&&(Fr(e,a,o,i),sc(e,a,o)),o}function zc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Gp(e,t){sy(e,t),(e=e.alternate)&&sy(e,t)}function Y5(){return null}var _2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yp(e){this._internalRoot=e}zu.prototype.render=Yp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Ru(e,t,null,null)};zu.prototype.unmount=Yp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ei(function(){Ru(null,e,null,null)}),t[yn]=null}};function zu(e){this._internalRoot=e}zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=nw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hn.length&&t!==0&&t<Hn[r].priority;r++);Hn.splice(r,0,e),r===0&&iw(e)}};function Xp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ly(){}function X5(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=zc(o);i.call(u)}}var o=C2(t,n,e,0,null,!1,!1,"",ly);return e._reactRootContainer=o,e[yn]=o.current,bs(e.nodeType===8?e.parentNode:e),ei(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=zc(c);l.call(u)}}var c=Vp(e,0,!1,null,null,!1,!1,"",ly);return e._reactRootContainer=c,e[yn]=c.current,bs(e.nodeType===8?e.parentNode:e),ei(function(){Ru(t,c,r,n)}),c}function Uu(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=zc(o);l.call(c)}}Ru(t,o,e,a)}else o=X5(r,t,e,a,n);return zc(o)}tw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ho(t.pendingLanes);r!==0&&(pp(t,r|1),Wt(t,Be()),!(pe&6)&&(eo=Be()+500,ga()))}break;case 13:ei(function(){var n=xn(e,1);if(n!==null){var a=Ot();Fr(n,e,1,a)}}),Gp(e,1)}};gp=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var r=Ot();Fr(t,e,134217728,r)}Gp(e,134217728)}};rw=function(e){if(e.tag===13){var t=ia(e),r=xn(e,t);if(r!==null){var n=Ot();Fr(r,e,t,n)}Gp(e,t)}};nw=function(){return we};aw=function(e,t){var r=we;try{return we=e,t()}finally{we=r}};vh=function(e,t,r){switch(t){case"input":if(uh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Tu(n);if(!a)throw Error(H(90));Mb(n),uh(n,a)}}}break;case"textarea":Lb(e,r);break;case"select":t=r.value,t!=null&&zi(e,!!r.multiple,t,!1)}};qb=Wp;Hb=ei;var Q5={usingClientEntryPoint:!1,Events:[Ys,Oi,Tu,Bb,Wb,Wp]},Do={findFiberByHostInstance:Aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J5={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gb(e),e===null?null:e.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||Y5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{ku=Ml.inject(J5),Qr=Ml}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q5;lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xp(t))throw Error(H(200));return G5(e,t,null,r)};lr.createRoot=function(e,t){if(!Xp(e))throw Error(H(299));var r=!1,n="",a=_2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Vp(e,1,!1,null,null,r,!1,n,a),e[yn]=t.current,bs(e.nodeType===8?e.parentNode:e),new Yp(t)};lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Gb(t),e=e===null?null:e.stateNode,e};lr.flushSync=function(e){return ei(e)};lr.hydrate=function(e,t,r){if(!Fu(t))throw Error(H(200));return Uu(null,e,t,!0,r)};lr.hydrateRoot=function(e,t,r){if(!Xp(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=_2;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=C2(t,null,e,1,r??null,a,!1,i,o),e[yn]=t.current,bs(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new zu(t)};lr.render=function(e,t,r){if(!Fu(t))throw Error(H(200));return Uu(null,e,t,!1,r)};lr.unmountComponentAtNode=function(e){if(!Fu(e))throw Error(H(40));return e._reactRootContainer?(ei(function(){Uu(null,null,e,!1,function(){e._reactRootContainer=null,e[yn]=null})}),!0):!1};lr.unstable_batchedUpdates=Wp;lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Fu(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Uu(e,t,r,!1,n)};lr.version="18.3.1-next-f1338f8080-20240426";function k2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k2)}catch(e){console.error(e)}}k2(),kb.exports=lr;var Qp=kb.exports,E2,cy=Qp;E2=cy.createRoot,cy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ps.apply(this,arguments)}var Jn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jn||(Jn={}));const uy="popstate";function Z5(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Xh("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:O2(a)}return tk(t,r,null,e)}function Ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function P2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ek(){return Math.random().toString(36).substr(2,8)}function dy(e,t){return{usr:e.state,key:e.key,idx:t}}function Xh(e,t,r,n){return r===void 0&&(r=null),Ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?po(t):t,{state:r,key:t&&t.key||n||ek()})}function O2(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function po(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function tk(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Jn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ps({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Jn.Pop;let y=d(),p=y==null?null:y-u;u=y,c&&c({action:l,location:x.location,delta:p})}function h(y,p){l=Jn.Push;let b=Xh(x.location,y,p);u=d()+1;let w=dy(b,u),j=x.createHref(b);try{o.pushState(w,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}i&&c&&c({action:l,location:x.location,delta:1})}function m(y,p){l=Jn.Replace;let b=Xh(x.location,y,p);u=d();let w=dy(b,u),j=x.createHref(b);o.replaceState(w,"",j),i&&c&&c({action:l,location:x.location,delta:0})}function v(y){let p=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:O2(y);return b=b.replace(/ $/,"%20"),Ve(p,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,p)}let x={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(uy,f),c=y,()=>{a.removeEventListener(uy,f),c=null}},createHref(y){return t(a,y)},createURL:v,encodeLocation(y){let p=v(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:m,go(y){return o.go(y)}};return x}var fy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fy||(fy={}));function rk(e,t,r){return r===void 0&&(r="/"),nk(e,t,r,!1)}function nk(e,t,r,n){let a=typeof t=="string"?po(t):t,i=D2(a.pathname||"/",r);if(i==null)return null;let o=T2(e);ak(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=pk(i);l=hk(o[c],u,n)}return l}function T2(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ve(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=qa([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),T2(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:dk(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of A2(i.path))a(i,o,c)}),t}function A2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=A2(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ak(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ik=/^:[\w-]+$/,ok=3,sk=2,lk=1,ck=10,uk=-2,hy=e=>e==="*";function dk(e,t){let r=e.split("/"),n=r.length;return r.some(hy)&&(n+=uk),t&&(n+=sk),r.filter(a=>!hy(a)).reduce((a,i)=>a+(ik.test(i)?ok:i===""?lk:ck),n)}function fk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function hk(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=my({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=my({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:qa([i,f.pathname]),pathnameBase:xk(qa([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=qa([i,f.pathnameBase]))}return o}function my(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mk(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let x=l[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[f];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function mk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),P2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function pk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return P2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function D2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function gk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?po(e):e;return{pathname:r?r.startsWith("/")?r:vk(r,t):t,search:bk(n),hash:wk(a)}}function vk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Cf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function I2(e,t){let r=yk(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function M2(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=po(e):(a=Ps({},e),Ve(!a.pathname||!a.pathname.includes("?"),Cf("?","pathname","search",a)),Ve(!a.pathname||!a.pathname.includes("#"),Cf("#","pathname","hash",a)),Ve(!a.search||!a.search.includes("#"),Cf("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=gk(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const qa=e=>e.join("/").replace(/\/\/+/g,"/"),xk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,wk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $2=["post","put","patch","delete"];new Set($2);const Sk=["get",...$2];new Set(Sk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Os.apply(this,arguments)}const Jp=g.createContext(null),Nk=g.createContext(null),Qs=g.createContext(null),Bu=g.createContext(null),si=g.createContext({outlet:null,matches:[],isDataRoute:!1}),L2=g.createContext(null);function Js(){return g.useContext(Bu)!=null}function Zp(){return Js()||Ve(!1),g.useContext(Bu).location}function R2(e){g.useContext(Qs).static||g.useLayoutEffect(e)}function En(){let{isDataRoute:e}=g.useContext(si);return e?Lk():Ck()}function Ck(){Js()||Ve(!1);let e=g.useContext(Jp),{basename:t,future:r,navigator:n}=g.useContext(Qs),{matches:a}=g.useContext(si),{pathname:i}=Zp(),o=JSON.stringify(I2(a,r.v7_relativeSplatPath)),l=g.useRef(!1);return R2(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=M2(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:qa([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function _k(e,t){return kk(e,t)}function kk(e,t,r,n){Js()||Ve(!1);let{navigator:a}=g.useContext(Qs),{matches:i}=g.useContext(si),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Zp(),d;if(t){var f;let y=typeof t=="string"?po(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Ve(!1),d=y}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=rk(e,{pathname:m}),x=Ak(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:qa([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:qa([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&x?g.createElement(Bu.Provider,{value:{location:Os({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Jn.Pop}},x):x}function Ek(){let e=$k(),t=jk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const Pk=g.createElement(Ek,null);class Ok extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(si.Provider,{value:this.props.routeContext},g.createElement(L2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tk(e){let{routeContext:t,match:r,children:n}=e,a=g.useContext(Jp);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(si.Provider,{value:t},n)}function Ak(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,v=!1,x=null,y=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||Pk,c&&(u<0&&h===0?(v=!0,y=null):u===h&&(v=!0,y=f.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=x:v?w=y:f.route.Component?w=g.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,g.createElement(Tk,{match:f,routeContext:{outlet:d,matches:p,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(Ok,{location:r.location,revalidation:r.revalidation,component:x,error:m,children:b(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):b()},null)}var z2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(z2||{}),Fc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fc||{});function Dk(e){let t=g.useContext(Jp);return t||Ve(!1),t}function Ik(e){let t=g.useContext(Nk);return t||Ve(!1),t}function Mk(e){let t=g.useContext(si);return t||Ve(!1),t}function F2(e){let t=Mk(),r=t.matches[t.matches.length-1];return r.route.id||Ve(!1),r.route.id}function $k(){var e;let t=g.useContext(L2),r=Ik(Fc.UseRouteError),n=F2(Fc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Lk(){let{router:e}=Dk(z2.UseNavigateStable),t=F2(Fc.UseNavigateStable),r=g.useRef(!1);return R2(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Os({fromRouteId:t},i)))},[e,t])}function Rk(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function py(e){let{to:t,replace:r,state:n,relative:a}=e;Js()||Ve(!1);let{future:i,static:o}=g.useContext(Qs),{matches:l}=g.useContext(si),{pathname:c}=Zp(),u=En(),d=M2(t,I2(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function qe(e){Ve(!1)}function zk(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Jn.Pop,navigator:i,static:o=!1,future:l}=e;Js()&&Ve(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:i,static:o,future:Os({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=po(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:v="default"}=n,x=g.useMemo(()=>{let y=D2(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:v},navigationType:a}},[c,d,f,h,m,v,a]);return x==null?null:g.createElement(Qs.Provider,{value:u},g.createElement(Bu.Provider,{children:r,value:x}))}function gy(e){let{children:t,location:r}=e;return _k(Qh(t),r)}new Promise(()=>{});function Qh(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let i=[...t,a];if(n.type===g.Fragment){r.push.apply(r,Qh(n.props.children,i));return}n.type!==qe&&Ve(!1),!n.props.index||!n.props.children||Ve(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qh(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Fk="6";try{window.__reactRouterVersion=Fk}catch{}const Uk="startTransition",vy=B_[Uk];function Bk(e){let{basename:t,children:r,future:n,window:a}=e,i=g.useRef();i.current==null&&(i.current=Z5({window:a,v5Compat:!0}));let o=i.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&vy?vy(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>Rk(n),[n]),g.createElement(zk,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var yy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yy||(yy={}));var xy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xy||(xy={}));let Wk={data:""},qk=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Wk,Hk=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Kk=/\/\*[^]*?\*\/|  +/g,by=/\n+/g,Vn=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Vn(o,i):i+"{"+Vn(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Vn(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Vn.p?Vn.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},rn={},U2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+U2(e[r]);return t}return e},Vk=(e,t,r,n,a)=>{let i=U2(e),o=rn[i]||(rn[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!rn[o]){let c=i!==e?e:(u=>{let d,f,h=[{}];for(;d=Hk.exec(u.replace(Kk,""));)d[4]?h.shift():d[3]?(f=d[3].replace(by," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(by," ").trim();return h[0]})(e);rn[o]=Vn(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&rn.g?rn.g:null;return r&&(rn.g=rn[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(rn[o],t,n,l),o},Gk=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Vn(l,""):l===!1?"":l}return n+a+(o??"")},"");function Wu(e){let t=this||{},r=e.call?e(t.p):e;return Vk(r.unshift?r.raw?Gk(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,qk(t.target),t.g,t.o,t.k)}let B2,Jh,Zh;Wu.bind({g:1});let wn=Wu.bind({k:1});function Yk(e,t,r,n){Vn.p=t,B2=e,Jh=r,Zh=n}function va(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:Jh&&Jh()},l),r.o=/ *go\d+/.test(c),l.className=Wu.apply(r,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Zh&&u[0]&&Zh(l),B2(u,l)}return a}}var Xk=e=>typeof e=="function",Uc=(e,t)=>Xk(e)?e(t):e,Qk=(()=>{let e=0;return()=>(++e).toString()})(),W2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Jk=20,q2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Jk)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return q2(e,{type:e.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},mc=[],Ma={toasts:[],pausedAt:void 0},li=e=>{Ma=q2(Ma,e),mc.forEach(t=>{t(Ma)})},Zk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},e6=(e={})=>{let[t,r]=g.useState(Ma),n=g.useRef(Ma);g.useEffect(()=>(n.current!==Ma&&r(Ma),mc.push(r),()=>{let i=mc.indexOf(r);i>-1&&mc.splice(i,1)}),[]);let a=t.toasts.map(i=>{var o,l,c;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Zk[i.type],style:{...e.style,...(c=e[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:a}},t6=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Qk()}),Zs=e=>(t,r)=>{let n=t6(t,e,r);return li({type:2,toast:n}),n.id},Et=(e,t)=>Zs("blank")(e,t);Et.error=Zs("error");Et.success=Zs("success");Et.loading=Zs("loading");Et.custom=Zs("custom");Et.dismiss=e=>{li({type:3,toastId:e})};Et.remove=e=>li({type:4,toastId:e});Et.promise=(e,t,r)=>{let n=Et.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?Uc(t.success,a):void 0;return i?Et.success(i,{id:n,...r,...r==null?void 0:r.success}):Et.dismiss(n),a}).catch(a=>{let i=t.error?Uc(t.error,a):void 0;i?Et.error(i,{id:n,...r,...r==null?void 0:r.error}):Et.dismiss(n)}),e};var r6=(e,t)=>{li({type:1,toast:{id:e,height:t}})},n6=()=>{li({type:5,time:Date.now()})},is=new Map,a6=1e3,i6=(e,t=a6)=>{if(is.has(e))return;let r=setTimeout(()=>{is.delete(e),li({type:4,toastId:e})},t);is.set(e,r)},o6=e=>{let{toasts:t,pausedAt:r}=e6(e);g.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Et.dismiss(l.id);return}return setTimeout(()=>Et.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=g.useCallback(()=>{r&&li({type:6,time:Date.now()})},[r]),a=g.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=t.filter(m=>(m.position||u)===(i.position||u)&&m.height),f=d.findIndex(m=>m.id===i.id),h=d.filter((m,v)=>v<f&&m.visible).length;return d.filter(m=>m.visible).slice(...l?[h+1]:[0,h]).reduce((m,v)=>m+(v.height||0)+c,0)},[t]);return g.useEffect(()=>{t.forEach(i=>{if(i.dismissed)i6(i.id,i.removeDelay);else{let o=is.get(i.id);o&&(clearTimeout(o),is.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:r6,startPause:n6,endPause:n,calculateOffset:a}}},s6=wn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,l6=wn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,c6=wn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,u6=va("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${s6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${l6} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${c6} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,d6=wn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,f6=va("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${d6} 1s linear infinite;
`,h6=wn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,m6=wn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,p6=va("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${h6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${m6} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,g6=va("div")`
  position: absolute;
`,v6=va("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,y6=wn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,x6=va("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${y6} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,b6=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?g.createElement(x6,null,t):t:r==="blank"?null:g.createElement(v6,null,g.createElement(f6,{...n}),r!=="loading"&&g.createElement(g6,null,r==="error"?g.createElement(u6,{...n}):g.createElement(p6,{...n})))},w6=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,j6=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,S6="0%{opacity:0;} 100%{opacity:1;}",N6="0%{opacity:1;} 100%{opacity:0;}",C6=va("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_6=va("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,k6=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=W2()?[S6,N6]:[w6(r),j6(r)];return{animation:t?`${wn(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${wn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},E6=g.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?k6(e.position||t||"top-center",e.visible):{opacity:0},i=g.createElement(b6,{toast:e}),o=g.createElement(_6,{...e.ariaProps},Uc(e.message,e));return g.createElement(C6,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):g.createElement(g.Fragment,null,i,o))});Yk(g.createElement);var P6=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return g.createElement("div",{ref:i,className:t,style:r},a)},O6=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:W2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},T6=Wu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$l=16,A6=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=o6(r);return g.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:$l,left:$l,right:$l,bottom:$l,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),h=O6(d,f);return g.createElement(P6,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?T6:"",style:h},u.type==="custom"?Uc(u.message,u):a?a(u):g.createElement(E6,{toast:u,position:d}))}))},D=Et;const H2=g.createContext(void 0),ze=()=>{const e=g.useContext(H2);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},D6=({children:e})=>{const[t,r]=g.useState(null),[n,a]=g.useState(!0),[i,o]=g.useState(null),[l,c]=g.useState(null),[u,d]=g.useState(null);g.useEffect(()=>{const x=localStorage.getItem("pos_user"),y=localStorage.getItem("pos_empresa"),p=localStorage.getItem("pos_sucursal"),b=localStorage.getItem("pos_role");x&&y&&p&&(r(JSON.parse(x)),o(y),c(p),d(b)),a(!1)},[]);const v={user:t,loading:n,login:async(x,y)=>{try{a(!0);const p={id:"c2eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",email:"emilio@demo.cl",nombre:"Emilio",apellidos:"Aguilera",rut:"78.168.951-3",activo:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},b="a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",w="b1eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",j="cajero";return r(p),o(b),c(w),d(j),localStorage.setItem("pos_user",JSON.stringify(p)),localStorage.setItem("pos_empresa",b),localStorage.setItem("pos_sucursal",w),localStorage.setItem("pos_role",j),D.success("Inicio de sesión exitoso"),{success:!0}}catch(p){return console.error("Login error:",p),{success:!1,error:"Error inesperado"}}finally{a(!1)}},validateUser:async(x,y)=>{try{return console.log("Validating user with RUT:",x),x==="78.168.951-3"&&y==="123456"?{success:!0,user:{id:"c2eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",email:"emilio@demo.cl",nombre:"Emilio",apellidos:"Aguilera",rut:"78.168.951-3",activo:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}:{success:!1,error:"Credenciales incorrectas"}}catch(p){return console.error("Error validating user:",p),{success:!1,error:"Error de validación"}}},logout:async()=>{r(null),o(null),c(null),d(null),localStorage.removeItem("pos_user"),localStorage.removeItem("pos_empresa"),localStorage.removeItem("pos_sucursal"),localStorage.removeItem("pos_role")},empresaId:i,sucursalId:l,userRole:u};return s.jsx(H2.Provider,{value:v,children:e})},I6="modulepreload",M6=function(e){return"/"+e},wy={},el=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=M6(c),c in wy)return;wy[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I6,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},$6=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>el(async()=>{const{default:n}=await Promise.resolve().then(()=>go);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class e0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class L6 extends e0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R6 extends e0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z6 extends e0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(em||(em={}));var F6=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class U6{constructor(t,{headers:r={},customFetch:n,region:a=em.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=$6(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return F6(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(v=>{throw new L6(v)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new R6(d);if(!d.ok)throw new z6(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Rt={},t0={},qu={},tl={},Hu={},Ku={},B6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},to=B6();const W6=to.fetch,K2=to.fetch.bind(to),V2=to.Headers,q6=to.Request,H6=to.Response,go=Object.freeze(Object.defineProperty({__proto__:null,Headers:V2,Request:q6,Response:H6,default:K2,fetch:W6},Symbol.toStringTag,{value:"Module"})),K6=__(go);var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});let V6=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Vu.default=V6;var G2=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ku,"__esModule",{value:!0});const G6=G2(K6),Y6=G2(Vu);let X6=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=G6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,m="OK")}catch{i.status===404&&x===""?(h=204,m="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new Y6.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Ku.default=X6;var Q6=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hu,"__esModule",{value:!0});const J6=Q6(Ku);let Z6=class extends J6.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Hu.default=Z6;var eE=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tl,"__esModule",{value:!0});const tE=eE(Hu);let rE=class extends tE.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};tl.default=rE;var nE=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qu,"__esModule",{value:!0});const Io=nE(tl);let aE=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Io.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Io.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Io.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Io.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Io.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qu.default=aE;var Gu={},Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.version=void 0;Yu.version="0.0.0-automated";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.DEFAULT_HEADERS=void 0;const iE=Yu;Gu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${iE.version}`};var Y2=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t0,"__esModule",{value:!0});const oE=Y2(qu),sE=Y2(tl),lE=Gu;let cE=class X2{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},lE.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new oE.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new X2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new sE.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};t0.default=cE;var vo=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.PostgrestError=Rt.PostgrestBuilder=Rt.PostgrestTransformBuilder=Rt.PostgrestFilterBuilder=Rt.PostgrestQueryBuilder=Rt.PostgrestClient=void 0;const Q2=vo(t0);Rt.PostgrestClient=Q2.default;const J2=vo(qu);Rt.PostgrestQueryBuilder=J2.default;const Z2=vo(tl);Rt.PostgrestFilterBuilder=Z2.default;const ej=vo(Hu);Rt.PostgrestTransformBuilder=ej.default;const tj=vo(Ku);Rt.PostgrestBuilder=tj.default;const rj=vo(Vu);Rt.PostgrestError=rj.default;var uE=Rt.default={PostgrestClient:Q2.default,PostgrestQueryBuilder:J2.default,PostgrestFilterBuilder:Z2.default,PostgrestTransformBuilder:ej.default,PostgrestBuilder:tj.default,PostgrestError:rj.default};const{PostgrestClient:dE,PostgrestQueryBuilder:tW,PostgrestFilterBuilder:rW,PostgrestTransformBuilder:nW,PostgrestBuilder:aW,PostgrestError:iW}=uE;function fE(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const hE=fE(),mE="2.11.15",pE=`realtime-js/${mE}`,gE="1.0.0",nj=1e4,vE=1e3;var os;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(os||(os={}));var jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jt||(jt={}));var Ir;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ir||(Ir={}));var tm;(function(e){e.websocket="websocket"})(tm||(tm={}));var Ta;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ta||(Ta={}));class yE{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class aj{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ce||(Ce={}));const jy=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=xE(o,e,t,a),i),{})},xE=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?ij(i,o):rm(o)},ij=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return SE(t,r)}switch(e){case Ce.bool:return bE(t);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return wE(t);case Ce.json:case Ce.jsonb:return jE(t);case Ce.timestamp:return NE(t);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return rm(t);default:return rm(t)}},rm=e=>e,bE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},SE=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>ij(t,l))}return e},NE=e=>typeof e=="string"?e.replace(" ","T"):e,oj=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class _f{constructor(t,r,n={},a=nj){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sy||(Sy={}));class ss{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ss.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=ss.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ss.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),v=d.filter(y=>m.indexOf(y.presence_ref)<0),x=f.filter(y=>h.indexOf(y.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ny;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ny||(Ny={}));var Cy;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cy||(Cy={}));var on;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(on||(on={}));class r0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _f(this,Ir.join,this.params,this.timeout),this.rejoinTimer=new aj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ir.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new ss(this),this.broadcastEndpointURL=oj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(on.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(on.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(on.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,v=[];for(let x=0;x<m;x++){const y=h[x],{filter:{event:p,schema:b,table:w,filter:j}}=y,S=d&&d[x];if(S&&S.event===p&&S.schema===b&&S.table===w&&S.filter===j)v.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=jt.errored,t==null||t(on.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(on.SUBSCRIBED);return}}).receive("error",d=>{this.state=jt.errored,t==null||t(on.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(on.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ir.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new _f(this,Ir.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new _f(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ir;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,x,y;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(x=m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,x,y,p,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,S=(v=m.filter)===null||v===void 0?void 0:v.event;return j&&((x=r.ids)===null||x===void 0?void 0:x.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(b=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:x,table:y,commit_timestamp:p,type:b,errors:w}=v;h=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:p,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(v))}m.callback(h,n)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&r0.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ir.close,{},t)}_onError(t){this._on(Ir.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=jy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=jy(t.columns,t.old_record)),r}}const _y=()=>{},CE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _E{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nj,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_y,this.ref=0,this.logger=_y,this.conn=null,this.sendBuffer=[],this.serializer=new yE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>el(async()=>{const{default:c}=await Promise.resolve().then(()=>go);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${tm.websocket}`,this.httpEndpoint=oj(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new aj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=hE),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gE}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case os.connecting:return Ta.Connecting;case os.open:return Ta.Open;case os.closing:return Ta.Closing;default:return Ta.Closed}}isConnected(){return this.connectionState()===Ta.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new r0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:pE};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Ir.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(vE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ir.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([CE],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class n0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class kE extends n0{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nm extends n0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var EE=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const sj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>el(async()=>{const{default:n}=await Promise.resolve().then(()=>go);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},PE=()=>EE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield el(()=>Promise.resolve().then(()=>go),void 0)).Response:Response}),am=e=>{if(Array.isArray(e))return e.map(r=>am(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=am(n)}),t};var ci=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const kf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OE=(e,t,r)=>ci(void 0,void 0,void 0,function*(){const n=yield PE();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new kE(kf(a),e.status||500))}).catch(a=>{t(new nm(kf(a),a))}):t(new nm(kf(e),e))}),TE=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function rl(e,t,r,n,a,i){return ci(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,TE(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>OE(c,l,n))})})}function Bc(e,t,r,n){return ci(this,void 0,void 0,function*(){return rl(e,"GET",t,r,n)})}function Bn(e,t,r,n,a){return ci(this,void 0,void 0,function*(){return rl(e,"POST",t,n,a,r)})}function AE(e,t,r,n,a){return ci(this,void 0,void 0,function*(){return rl(e,"PUT",t,n,a,r)})}function DE(e,t,r,n){return ci(this,void 0,void 0,function*(){return rl(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function lj(e,t,r,n,a){return ci(this,void 0,void 0,function*(){return rl(e,"DELETE",t,n,a,r)})}var Mt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const IE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ky={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ME{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=sj(a)}uploadOrUpdate(t,r,n,a){return Mt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ky),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(tt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ky.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Bn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new n0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield Bn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Mt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Bn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Mt(this,void 0,void 0,function*(){try{const a=yield Bn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}})}download(t,r){return Mt(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Bc(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(tt(l))return{data:null,error:l};throw l}})}info(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Bc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:am(n),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}})}exists(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield DE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(tt(n)&&n instanceof nm){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield lj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Mt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},IE),r),{prefix:t||""});return{data:yield Bn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(tt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const $E="2.7.1",LE={"X-Client-Info":`storage-js/${$E}`};var vi=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class RE{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},LE),r),this.fetch=sj(n)}listBuckets(){return vi(this,void 0,void 0,function*(){try{return{data:yield Bc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(tt(t))return{data:null,error:t};throw t}})}getBucket(t){return vi(this,void 0,void 0,function*(){try{return{data:yield Bc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return vi(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return vi(this,void 0,void 0,function*(){try{return{data:yield AE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return vi(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return vi(this,void 0,void 0,function*(){try{return{data:yield lj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}})}}class zE extends RE{constructor(t,r={},n){super(t,r,n)}from(t){return new ME(this.url,this.headers,t,this.fetch)}}const FE="2.50.2";let Vo="";typeof Deno<"u"?Vo="deno":typeof document<"u"?Vo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vo="react-native":Vo="node";const UE={"X-Client-Info":`supabase-js-${Vo}/${FE}`},BE={headers:UE},WE={schema:"public"},qE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HE={};var KE=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const VE=e=>{let t;return e?t=e:typeof fetch>"u"?t=K2:t=fetch,(...r)=>t(...r)},GE=()=>typeof Headers>"u"?V2:Headers,YE=(e,t,r)=>{const n=VE(r),a=GE();return(i,o)=>KE(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var XE=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function QE(e){return e.endsWith("/")?e:e+"/"}function JE(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>XE(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const cj="2.70.0",Ni=30*1e3,im=3,Ef=im*Ni,ZE="http://localhost:9999",eP="supabase.auth.token",tP={"X-Client-Info":`gotrue-js/${cj}`},om="X-Supabase-Api-Version",uj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nP=6e5;class a0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class aP extends a0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function iP(e){return ue(e)&&e.name==="AuthApiError"}class dj extends a0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ya extends a0{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class zn extends ya{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oP(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Ll extends ya{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rl extends ya{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class zl extends ya{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sP(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ey extends ya{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sm extends ya{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Pf(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Py extends ya{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ls extends ya{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oy=` 	
\r=`.split(""),lP=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Oy.length;t+=1)e[Oy[t].charCodeAt(0)]=-2;for(let t=0;t<Wc.length;t+=1)e[Wc[t].charCodeAt(0)]=t;return e})();function Ty(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wc[n]),t.queuedBits-=6}}function fj(e,t,r){const n=lP[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ay(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{dP(o,n,r)};for(let o=0;o<e.length;o+=1)fj(e.charCodeAt(o),a,i);return t.join("")}function cP(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function uP(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}cP(n,t)}}function dP(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function fP(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)fj(e.charCodeAt(a),r,n);return new Uint8Array(t)}function hP(e){const t=[];return uP(e,r=>t.push(r)),new Uint8Array(t)}function mP(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Ty(a,r,n)),Ty(null,r,n),t.join("")}function pP(e){return Math.round(Date.now()/1e3)+e}function gP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Tr=()=>typeof window<"u"&&typeof document<"u",Na={tested:!1,writable:!1},cs=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Na.tested)return Na.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Na.tested=!0,Na.writable=!0}catch{Na.tested=!0,Na.writable=!1}return Na.writable};function vP(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const hj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>el(async()=>{const{default:n}=await Promise.resolve().then(()=>go);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},yP=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mj=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Fl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ul=async(e,t)=>{await e.removeItem(t)};class Xu{constructor(){this.promise=new Xu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xu.promiseConstructor=Promise;function Of(e){const t=e.split(".");if(t.length!==3)throw new ls("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!rP.test(t[n]))throw new ls("JWT not in base64url format");return{header:JSON.parse(Ay(t[0])),payload:JSON.parse(Ay(t[1])),signature:fP(t[2]),raw:{header:t[0],payload:t[1]}}}async function xP(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bP(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function wP(e){return("0"+e.toString(16)).substr(-2)}function jP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,wP).join("")}async function SP(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function NP(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await SP(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yi(e,t,r=!1){const n=jP();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await mj(e,`${t}-code-verifier`,a);const i=await NP(n);return[i,n===i?"plain":"s256"]}const CP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _P(e){const t=e.headers.get(om);if(!t||!t.match(CP))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kP(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function EP(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xi(e){if(!PP.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var OP=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const ka=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),TP=[502,503,504];async function Dy(e){var t;if(!yP(e))throw new sm(ka(e),0);if(TP.includes(e.status))throw new sm(ka(e),e.status);let r;try{r=await e.json()}catch(i){throw new dj(ka(i),i)}let n;const a=_P(e);if(a&&a.getTime()>=uj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Py(ka(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Py(ka(r),e.status,r.weak_password.reasons);throw new aP(ka(r),e.status||500,n)}const AP=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function he(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[om]||(i[om]=uj["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await DP(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function DP(e,t,r,n,a,i){const o=AP(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new sm(ka(c),0)}if(l.ok||await Dy(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Dy(c)}}function nn(e){var t;let r=null;LP(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=pP(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Iy(e){const t=nn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Gn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function IP(e){return{data:e,error:null}}function MP(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=OP(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function $P(e){return e}function LP(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tf=["global","local","others"];var RP=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class zP{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=hj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Tf[0]){if(Tf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tf.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=RP(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:MP,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$P});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){xi(t);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){xi(t);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Gn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){xi(t);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){xi(t.userId);try{const{data:r,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){xi(t.userId),xi(t.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}const FP={getItem:e=>cs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{cs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{cs()&&globalThis.localStorage.removeItem(e)}};function My(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function UP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bi={debug:!!(globalThis&&cs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class BP extends pj{}async function WP(e,t,r){bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),bi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw bi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new BP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}UP();const qP={url:ZE,storageKey:eP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $y(e,t,r){return await r()}class Ts{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ts.nextInstanceID,Ts.nextInstanceID+=1,this.instanceID>0&&Tr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},qP),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new zP({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=hj(a.fetch),this.lock=a.lock||$y,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Tr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=WP:this.lock=$y,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:cs()?this.storage=FP:(this.memoryStorage={},this.storage=My(this.memoryStorage)):(this.memoryStorage={},this.storage=My(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cj}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=vP(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Tr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sP(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?{error:r}:{error:new dj("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:nn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await yi(this.storage,this.storageKey)),i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:nn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:nn})}else throw new Rl("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Iy})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Iy})}else throw new Rl("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ll}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:y,wallet:p,statement:b,options:w}=t;let j;if(Tr())if(typeof p=="object")j=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=p}const S=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),x=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:y,error:p}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:mP(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:nn});if(p)throw p;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ll}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:p})}catch(y){if(ue(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Fl(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:nn});if(await Ul(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ll}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:nn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ll}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await yi(this.storage,this.storageKey));const{error:f}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Rl("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:nn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await yi(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:IP})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zn;const{error:a}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await he(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await he(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Rl("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Fl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ef:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gn}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Gn})})}catch(r){if(ue(r))return oP(r)&&(await this._removeSession(),await Ul(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new zn;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yi(this.storage,this.storageKey));const{data:u,error:d}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Gn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zn;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Of(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zn;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Tr())throw new zl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new zl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ey("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ey("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new zl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const p={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Fl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(iP(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ul(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=gP(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await yi(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Tr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await bP(async a=>(a>0&&await xP(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:nn})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Pf(i)&&Date.now()+o-n<Ni})}catch(n){if(this._debug(r,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Tr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Fl(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ef;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Ef}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Pf(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Xu;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new zn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ue(i)){const o={session:null,error:i};return Pf(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await mj(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ul(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ni}ms, refresh threshold is ${im} ticks`),a<=im&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await yi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await he(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await he(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Of(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+nP>Date.now()))return n;const{data:a,error:i}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new ls("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===t),!n)throw new ls("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Of(n);if(kP(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const u=EP(a.alg),d=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,hP(`${l}.${c}`)))throw new ls("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}}Ts.nextInstanceID=0;const HP=Ts;class KP extends HP{constructor(t){super(t)}}var VP=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class GP{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=QE(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:WE,realtime:HE,auth:Object.assign(Object.assign({},qE),{storageKey:u}),global:BE},f=JE(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=YE(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new dE(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new U6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new zE(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return VP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KP({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new _E(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YP=(e,t,r)=>new GP(e,t,r),XP="https://ujkdekqhoeyfjvtzdtaz.supabase.co",QP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqa2Rla3Fob2V5Zmp2dHpkdGF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxNjA5MTksImV4cCI6MjA2NDczNjkxOX0.bv4GEzEgDG9FyTM2gZR38HoHGAGNlwAKb_NoXZjpFyY",re=YP(XP,QP,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1}});class $a{constructor(){this.config=null}static getInstance(){return $a.instance||($a.instance=new $a),$a.instance}async loadConfig(t){try{const{data:r,error:n}=await re.from("configuracion_sii").select("*").eq("empresa_id",t).single();if(n)throw n;this.config={rutEmisor:r.rut_emisor,razonSocialEmisor:r.razon_social_emisor,giroEmisor:r.giro_emisor,direccionEmisor:r.direccion_emisor,comunaEmisor:r.comuna_emisor,ciudadEmisor:r.ciudad_emisor,ambiente:r.ambiente,usuarioSii:r.usuario_sii,claveSii:r.clave_sii,resolucionSii:r.resolucion_sii}}catch(r){throw console.error("Error loading SII config:",r),r}}async generarDTE(t){try{const{data:r,error:n}=await re.rpc("generar_xml_dte",{p_venta_id:t.ventaId});if(n)throw n;return r}catch(r){throw console.error("Error generando DTE:",r),r}}async enviarDTE(t){try{const{data:r,error:n}=await re.rpc("enviar_dte_sii",{p_documento_id:t});if(n)throw n;return r}catch(r){throw console.error("Error enviando DTE al SII:",r),r}}async consultarEstadoDTE(t){try{return{trackId:t,estado:"ACEPTADO",glosa:"Documento aceptado por el SII",fechaRespuesta:new Date().toISOString()}}catch(r){throw console.error("Error consultando estado DTE:",r),r}}generarXMLDTE(t,r){var a,i,o,l,c,u;const n=new Date().toISOString().split("T")[0];return`<?xml version="1.0" encoding="ISO-8859-1"?>
<DTE version="1.0">
  <Documento ID="DTE-${r}">
    <Encabezado>
      <IdDoc>
        <TipoDTE>${t.tipoDocumento}</TipoDTE>
        <Folio>${r}</Folio>
        <FchEmis>${n}</FchEmis>
        <IndServicio>3</IndServicio>
      </IdDoc>
      <Emisor>
        <RUTEmisor>${(a=this.config)==null?void 0:a.rutEmisor}</RUTEmisor>
        <RznSoc>${(i=this.config)==null?void 0:i.razonSocialEmisor}</RznSoc>
        <GiroEmis>${(o=this.config)==null?void 0:o.giroEmisor}</GiroEmis>
        <Acteco>471000</Acteco>
        <DirOrigen>${(l=this.config)==null?void 0:l.direccionEmisor}</DirOrigen>
        <CmnaOrigen>${(c=this.config)==null?void 0:c.comunaEmisor}</CmnaOrigen>
        <CiudadOrigen>${(u=this.config)==null?void 0:u.ciudadEmisor}</CiudadOrigen>
      </Emisor>
      ${t.rutReceptor?`
      <Receptor>
        <RUTRecep>${t.rutReceptor}</RUTRecep>
        <RznSocRecep>${t.razonSocialReceptor}</RznSocRecep>
        <DirRecep>${t.direccionReceptor||""}</DirRecep>
        <CmnaRecep>${t.comunaReceptor||""}</CmnaRecep>
        <CiudadRecep>${t.ciudadReceptor||""}</CiudadRecep>
      </Receptor>
      `:""}
      <Totales>
        <MntNeto>${Math.round(t.montoNeto)}</MntNeto>
        <IVA>${Math.round(t.montoIva)}</IVA>
        <MntTotal>${Math.round(t.montoTotal)}</MntTotal>
      </Totales>
    </Encabezado>
    <Detalle>
      ${t.items.map((d,f)=>`
      <Item>
        <NroLinDet>${f+1}</NroLinDet>
        <CdgItem>
          <TpoCodigo>INT1</TpoCodigo>
          <VlrCodigo>${d.codigo}</VlrCodigo>
        </CdgItem>
        <NmbItem>${d.nombre}</NmbItem>
        <QtyItem>${d.cantidad}</QtyItem>
        <PrcItem>${Math.round(d.precio)}</PrcItem>
        <MontoItem>${Math.round(d.total)}</MontoItem>
      </Item>
      `).join("")}
    </Detalle>
  </Documento>
</DTE>`}async firmarXML(t){return t}async enviarWebServiceSII(t){var r;return(r=this.config)==null||r.ambiente,{trackId:"TRK"+Date.now(),estado:"ENVIADO",glosa:"Documento enviado correctamente al SII"}}}const gj=g.createContext(void 0),Dt=()=>{const e=g.useContext(gj);if(!e)throw new Error("usePOS debe ser usado dentro de un POSProvider");return e},JP=({children:e})=>{const{user:t,empresaId:r,sucursalId:n}=ze(),[a,i]=g.useState([]),[o,l]=g.useState(!1),[c,u]=g.useState([]),d=c.reduce((L,F)=>L+F.precio*F.quantity,0),[f,h]=g.useState([]),[m,v]=g.useState([]),[x,y]=g.useState(null),[p,b]=g.useState([]),[w,j]=g.useState([]),[S,N]=g.useState(!1),[C,_]=g.useState(null),A=L=>Math.max(0,isNaN(Number(L))?0:Number(L)),k=g.useCallback(async()=>{if(!n||!r)return null;try{const{data:L,error:F}=await re.from("cajas").select("id").eq("sucursal_id",n).eq("empresa_id",r).eq("activo",!0).limit(1).single();return F?(console.error("Error obteniendo caja por defecto:",F),null):(L==null?void 0:L.id)||null}catch(L){return console.error("Error en getDefaultCajaId:",L),null}},[n,r]),T=g.useCallback(async()=>{if(r){l(!0);try{const{data:L,error:F}=await re.from("productos").select("*").eq("empresa_id",r).eq("activo",!0).order("nombre",{ascending:!0});if(F)console.error("Error loading productos",F),D.error("No se pudieron cargar productos"),i([]);else{const Z=(L||[]).map(ae=>({...ae,precio:A(ae.precio),stock:A(ae.stock||0)}));i(Z)}}catch(L){console.error("Error en loadProductos:",L),i([])}finally{l(!1)}}},[r]),U=L=>{u(F=>{const Z=F.findIndex(ae=>ae.id===L.id);if(Z>=0){const ae=[...F];return ae[Z]={...ae[Z],quantity:ae[Z].quantity+1},ae}return[...F,{...L,quantity:1,precio:Math.ceil(L.precio)}]})},I=(L,F)=>{const Z=Math.max(1,Math.floor(Number(F)||1));Z<=0?ee(L):u(ae=>ae.map(ve=>ve.id===L?{...ve,quantity:Z}:ve))},ee=L=>{u(F=>F.filter(Z=>Z.id!==L))},te=()=>{u([]),y(null)},B=g.useCallback(async()=>{if(!(!r||!t))try{const{data:L,error:F}=await re.from("borradores_venta").select("*").eq("empresa_id",r).eq("usuario_id",t.id).order("created_at",{ascending:!1});F?(console.error("Error loading drafts",F),h([])):h(L)}catch(L){console.error("Error en loadBorradores:",L),h([])}},[r,t]),E=async L=>{if(!r||!t||c.length===0)return!1;try{const{error:F}=await re.from("borradores_venta").insert({empresa_id:r,usuario_id:t.id,nombre:L,items:c,total:d,fecha:new Date().toISOString()});return F?(console.error("Error al guardar borrador:",F),D.error("Error al guardar borrador: "+F.message),!1):(D.success("Borrador guardado"),await B(),!0)}catch(F){return console.error("Error en saveDraft:",F),D.error("Error al guardar borrador"),!1}},O=async L=>{try{const{data:F,error:Z}=await re.from("borradores_venta").select("*").eq("id",L).single();return Z||!F?(console.error("Error al cargar borrador:",Z),D.error("Error al cargar borrador: "+(Z==null?void 0:Z.message)),!1):(u(F.items),D.success("Borrador cargado"),!0)}catch(F){return console.error("Error en loadDraft:",F),D.error("Error al cargar borrador"),!1}},M=async L=>{try{const{error:F}=await re.from("borradores_venta").delete().eq("id",L);return F?(console.error("Error al eliminar borrador:",F),D.error("Error al eliminar borrador: "+F.message),!1):(D.success("Borrador eliminado"),await B(),!0)}catch(F){return console.error("Error en deleteDraft:",F),D.error("Error al eliminar borrador"),!1}},q=g.useCallback(async()=>{if(r)try{const{data:L,error:F}=await re.from("clientes").select("*").eq("empresa_id",r).order("razon_social",{ascending:!0});F?(console.error("Error loading clients",F),v([])):v(L||[])}catch(L){console.error("Error en loadClientes:",L),v([])}},[r]),K=L=>{y(L),L?D.success(`Cliente ${L.razon_social||L.nombre+" "+L.apellidos} seleccionado`):D.info("Cliente deseleccionado")},V=async L=>{if(!r)return{success:!1,error:"Empresa no definida"};try{const{data:F,error:Z}=await re.from("clientes").insert([{empresa_id:r,...L}]).select().single();return Z||!F?(console.error("Error creando cliente:",Z),D.error("Error al crear cliente"),{success:!1,error:Z==null?void 0:Z.message}):(D.success("Cliente creado exitosamente"),await q(),{success:!0,data:F})}catch(F){return console.error("Error en crearCliente:",F),D.error("Error al crear cliente"),{success:!1,error:F.message}}},le=g.useCallback(async L=>{if(r)try{const{data:F,error:Z}=await re.from("ventas").select("id, folio, tipo_dte, total").ilike("folio",`%${L}%`).eq("empresa_id",r).order("fecha",{ascending:!1}).limit(10);Z?(console.error("Error loading docsDisponibles",Z),j([])):j((F||[]).map(ae=>({id:ae.id,label:(ae.tipo_dte==="boleta"?"Boleta":ae.tipo_dte)+" Nº"+ae.folio,total:ae.total})))}catch(F){console.error("Error en loadDocsDisponibles:",F),j([])}},[r]),ge=L=>{u(F=>{if(F.find(ae=>ae.id===L.id))return F;const Z={id:L.id,nombre:L.label,precio:L.total,empresa_id:r||"",stock:1,activo:!0,created_at:new Date().toISOString(),costo:0,descripcion:"",sku:"",codigo_barras:""};return[...F,{...Z,quantity:1}]})},ce=async(L,F,Z,ae=!1)=>{if(!S||!C)return D.error("🔴 Error: La caja está cerrada. No se puede procesar la venta."),{success:!1,error:"Caja cerrada"};if(!t||!r||!n||c.length===0)return{success:!1,error:"Datos incompletos para procesar la venta."};if(F==="factura"&&!Z)return{success:!1,error:"Debe seleccionar un cliente para factura electrónica"};try{const ve=Date.now();let Me;F==="boleta"?Me=`${ve}`:F==="boleta_manual"?Me=`BM${ve}`:F==="factura"?Me=`F${ve}`:Me=`V${ve}`;const{data:de,error:Vt}=await re.from("ventas").insert({empresa_id:r,sucursal_id:n,caja_id:C.caja_id,apertura_caja_id:C.id,cliente_id:Z||null,usuario_id:t.id,folio:Me,tipo_dte:F,metodo_pago:L,subtotal:d,total:d,estado:"completada"}).select().single();if(Vt||!de)return console.error("Error al crear la venta:",Vt),{success:!1,error:"Error al registrar la venta en la base de datos"};const Hr=c.map(yt=>({venta_id:de.id,producto_id:yt.id,cantidad:yt.quantity,precio_unitario:yt.precio,subtotal:yt.precio*yt.quantity})),{error:Gt}=await re.from("venta_items").insert(Hr);if(Gt)return console.error("Error al insertar items de venta:",Gt),D.error("Error al registrar los productos de la venta."),{success:!1,error:Gt==null?void 0:Gt.message};if(L.toLowerCase()==="efectivo"){const{error:yt}=await re.from("movimientos_caja").insert({apertura_caja_id:C.id,usuario_id:t.id,tipo:"venta",monto:d,observacion:`Venta ${de.folio}`});yt&&console.error("Error al registrar movimiento de caja:",yt)}return D.success(`Venta #${de.folio} procesada.`),te(),{success:!0,data:de}}catch(ve){return console.error("Error en procesarVenta:",ve),D.error("Error al procesar la venta"),{success:!1,error:ve.message}}},P=g.useCallback(async()=>{if(!t){N(!1),_(null);return}try{l(!0);const{data:L,error:F}=await re.from("aperturas_caja").select("*").eq("usuario_id",t.id).eq("estado","abierta").order("fecha_apertura",{ascending:!1}).limit(1);F?(console.error("Error al verificar estado de la caja:",F),D.error("No se pudo verificar el estado de la caja."),N(!1),_(null)):L&&L.length>0?(N(!0),_(L[0])):(N(!1),_(null))}catch(L){console.error("Error en checkCajaStatus:",L),N(!1),_(null)}finally{l(!1)}},[t]),G=async L=>{if(!t)return D.error("Usuario no autenticado."),!1;if(S)return D.error("Ya tienes una caja abierta."),!1;try{l(!0);const F=await k();if(!F)return D.error("No se encontró una caja activa para esta sucursal."),!1;const{data:Z,error:ae}=await re.from("aperturas_caja").insert({monto_inicial:L,usuario_id:t.id,caja_id:F,estado:"abierta"}).select().single();return ae||!Z?(console.error("Error al abrir caja:",ae),D.error("No se pudo abrir la caja. Error: "+(ae==null?void 0:ae.message)),!1):(D.success(`Caja abierta con ${new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(L)}`),_(Z),N(!0),!0)}catch(F){return console.error("Error en openCaja:",F),D.error("Error al abrir la caja: "+F.message),!1}finally{l(!1)}},X=async(L,F)=>{if(!C||!C.id)return D.error("No hay una caja abierta para cerrar."),!1;try{l(!0);const Z=C.id,[ae,ve]=await Promise.all([re.from("ventas").select("total, metodo_pago").eq("apertura_caja_id",Z),re.from("movimientos_caja").select("monto, tipo").eq("apertura_caja_id",Z)]);if(ae.error)throw ae.error;if(ve.error)throw ve.error;const Me=(ae.data||[]).filter(Ze=>Ze.metodo_pago.toLowerCase()==="efectivo").reduce((Ze,In)=>Ze+In.total,0),de=(ve.data||[]).filter(Ze=>Ze.tipo==="ingreso").reduce((Ze,In)=>Ze+In.monto,0),Vt=(ve.data||[]).filter(Ze=>Ze.tipo==="retiro").reduce((Ze,In)=>Ze+In.monto,0),Hr=C.monto_inicial+Me+de-Vt,Gt=L-Hr,{error:yt}=await re.from("aperturas_caja").update({estado:"cerrada",fecha_cierre:new Date().toISOString(),monto_final:L,diferencia_cierre:Gt,observaciones:F||null}).eq("id",Z);if(yt)throw yt;return D.success("✅ ¡Caja cerrada exitosamente!"),N(!1),_(null),!0}catch(Z){return console.error("Error al cerrar la caja:",Z),D.error(Z.message||"Hubo un problema al cerrar la caja."),!1}finally{l(!1)}},R=g.useCallback(async()=>{if(r){l(!0);try{const{data:L,error:F}=await re.from("promociones").select("*").eq("empresa_id",r).eq("activo",!0).order("nombre",{ascending:!0});F?(console.error("Error loading promociones",F),b([])):b(L||[])}catch(L){console.error("Error en loadPromociones:",L),b([])}finally{l(!1)}}},[r]),Y=async(L,F)=>{try{if(c.findIndex(de=>de.id===L)===-1){const de=a.find(Vt=>Vt.id===L);if(!de)return D.error("Producto no encontrado"),!1;U(de)}const ae=p.find(de=>de.id===F);if(!ae)return D.error("Promoción no encontrada"),!1;const ve=[...c],Me=ve.findIndex(de=>de.id===L);if(Me!==-1){const de=ve[Me];switch(ae.tipo){case"descuento_porcentaje":const Vt=ae.valor||0,Hr=de.precio*(1-Vt/100);ve[Me]={...de,precio:Hr,promocion_aplicada:`${ae.nombre} (${Vt}%)`};break;case"descuento_monto":const Gt=ae.valor||0,yt=Math.max(0,de.precio-Gt);ve[Me]={...de,precio:yt,promocion_aplicada:`${ae.nombre} ($${Gt})`};break;case"2x1":de.quantity===1?ve[Me]={...de,quantity:2,promocion_aplicada:ae.nombre}:ve[Me]={...de,quantity:de.quantity+1,promocion_aplicada:ae.nombre};break;case"3x2":if(de.quantity===2)ve[Me]={...de,quantity:3,promocion_aplicada:ae.nombre};else if(de.quantity>=3){const Ze=Math.floor(de.quantity/2);ve[Me]={...de,quantity:de.quantity+Ze,promocion_aplicada:ae.nombre}}else ve[Me]={...de,quantity:de.quantity+1,promocion_aplicada:ae.nombre};break;default:return D.error("Tipo de promoción no soportado"),!1}return u(ve),D.success(`Promoción "${ae.nombre}" aplicada correctamente`),!0}return D.error("No se pudo aplicar la promoción"),!1}catch(Z){return console.error("Error al aplicar promoción:",Z),D.error("Error al aplicar promoción"),!1}},se=async L=>{if(!r)return!1;try{const F=$a.getInstance();await F.loadConfig(r);const Z=await F.generarDTE({ventaId:L,tipoDocumento:39,items:[],montoNeto:0,montoIva:0,montoTotal:0});return D.success("DTE generado correctamente"),!0}catch(F){return console.error("Error generando DTE:",F),D.error("Error al generar DTE"),!1}},z=async L=>{try{const Z=await $a.getInstance().enviarDTE(L);return Z?D.success("DTE enviado al SII correctamente"):D.error("Error al enviar DTE al SII"),Z}catch(F){return console.error("Error enviando DTE al SII:",F),D.error("Error al enviar DTE al SII"),!1}};g.useEffect(()=>{!t||!r||(l(!0),Promise.all([T(),B(),q(),R(),P()]).finally(()=>l(!1)))},[t,r,T,B,q,R,P]);const xe={productos:a,loading:o,loadProductos:T,carrito:c,total:d,addToCart:U,updateQuantity:I,removeFromCart:ee,clearCart:te,borradores:f,loadBorradores:B,saveDraft:E,loadDraft:O,deleteDraft:M,clientes:m,currentCliente:x,loadClientes:q,selectClient:K,crearCliente:V,procesarVenta:ce,cajaAbierta:S,currentAperturaCaja:C,checkCajaStatus:P,openCaja:G,closeCaja:X,getDefaultCajaId:k,promociones:p,loadPromociones:R,aplicarPromocion:Y,docsDisponibles:w,loadDocsDisponibles:le,selectDoc:ge,generarDTE:se,enviarDTEAlSII:z};return s.jsx(gj.Provider,{value:xe,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(e,t)=>{const r=g.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>g.createElement("svg",{ref:d,...ZP,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${e8(e)}`,l].join(" "),...u},[...t.map(([f,h])=>g.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=oe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=oe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=oe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=oe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=oe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=oe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=oe("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=oe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=oe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Cj=g.createContext(void 0),y8=({children:e})=>{const[t,r]=g.useState(!1),n=En(),a=()=>r(c=>!c),i=()=>r(!1),o=[{id:"inicio",label:"Inicio",icon:s.jsx(o8,{className:"w-5 h-5"})},{id:"cierre",label:"Cierre de caja",icon:s.jsx(Br,{className:"w-5 h-5"})},{id:"devolucion",label:"Devolución",icon:s.jsx(Sj,{className:"w-5 h-5"})},{id:"movimiento",label:"Movimiento de efectivo",icon:s.jsx(Nj,{className:"w-5 h-5"})},{id:"reimprimir",label:"Reimprimir",icon:s.jsx(cm,{className:"w-5 h-5"})},{id:"reportes",label:"Reportes",icon:s.jsx(vj,{className:"w-5 h-5"})},{id:"despacho",label:"Despacho",icon:s.jsx(Ju,{className:"w-5 h-5"})}],l=c=>{switch(c){case"inicio":n("/");break;case"cierre":n("/cierre");break;case"devolucion":n("/devolucion");break;case"movimiento":n("/movimiento");break;case"reimprimir":n("/reimprimir");break;case"reportes":n("/reportes");break;case"despacho":n("/despacho");break;default:n("/");break}r(!1)};return s.jsx(Cj.Provider,{value:{isOpen:t,toggleSidebar:a,closeSidebar:i,handleSidebarAction:l,items:o},children:e})},c0=()=>{const e=g.useContext(Cj);if(!e)throw new Error("useSidebar must be used within SidebarProvider");return e},u0=({variant:e="black",size:t="md",className:r=""})=>{const n={sm:"w-24 h-6",md:"w-32 h-8",lg:"w-48 h-12"};return e==="white"?s.jsxs("svg",{className:`${n[t]} ${r}`,viewBox:"0 0 173 37",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("rect",{x:"0.75",width:"31.7143",height:"37",rx:"5.28571",fill:"#F1F1F1"}),s.jsxs("g",{clipPath:"url(#clip0_429_1793)",children:[s.jsx("path",{d:"M9.78339 34.6753C9.81103 34.7102 9.83731 34.738 9.86169 34.7582C9.82016 34.774 9.79351 34.7446 9.78339 34.6753C8.97443 33.6536 6.98725 26.498 16.5788 22.4831C26.4981 18.331 26.9331 13.8318 26.9331 13.8318C27.2652 17.5592 28.5307 19.5194 19.9579 23.3696C12.0303 26.93 9.65902 33.8234 9.78339 34.6753Z",fill:"#101014"}),s.jsx("path",{d:"M6.88516 31.5232C6.91151 31.5591 6.93675 31.5878 6.96038 31.6089C6.9183 31.6231 6.89273 31.5928 6.88516 31.5232C6.11415 30.4726 4.39032 23.249 14.1224 19.588C24.1872 15.8019 24.7866 11.3216 24.7866 11.3216C24.982 15.0586 26.1749 17.0639 17.4668 20.5976C9.41417 23.8654 6.79207 30.6673 6.88516 31.5232Z",fill:"#101014"}),s.jsx("path",{d:"M11.4302 6.87296C9.60211 4.92278 9.31184 3.80326 10.1366 1.76172C10.5828 4.5894 14.2092 6.74346 23.9243 11.1323C23.7755 12.5088 23.5461 12.9407 22.9778 13.3409C22.9778 13.3409 13.2582 8.82315 11.4302 6.87296Z",fill:"#101014"}),s.jsx("path",{d:"M9.82576 9.72281C8.02851 7.74418 7.75583 6.62025 8.6125 4.5919C8.9974 7.30695 12.194 9.39183 20.9402 13.5537C21.5081 13.824 21.6342 14.5818 21.1785 15.0153C20.6337 15.5335 19.8234 15.6571 19.1527 15.3173C16.2512 13.8474 11.1033 11.1292 9.82576 9.72281Z",fill:"#101014"})]}),s.jsx("path",{d:"M52.5923 28.6569C51.2955 28.6569 50.1867 28.4972 49.2658 28.1777C48.3449 27.8582 47.5744 27.4447 46.9542 26.9373C46.3528 26.4299 45.8736 25.8942 45.5165 25.3304C45.1594 24.7478 44.8869 24.2028 44.699 23.6954C44.5298 23.188 44.4171 22.7745 44.3607 22.455C44.3043 22.1355 44.2761 21.9758 44.2761 21.9758H48.1664C48.1664 21.9758 48.1852 22.0885 48.2228 22.314C48.2792 22.5396 48.3919 22.8309 48.5611 23.188C48.7302 23.5262 48.9745 23.8645 49.294 24.2028C49.6323 24.5411 50.074 24.8324 50.619 25.0767C51.1828 25.3022 51.8781 25.415 52.7051 25.415C53.983 25.415 54.9509 25.1331 55.6087 24.5693C56.2853 23.9867 56.6235 23.2725 56.6235 22.4268C56.6235 21.7127 56.3698 21.1488 55.8624 20.7354C55.355 20.3031 54.6032 19.9836 53.6072 19.7769L50.8445 19.1849C49.7733 18.9594 48.7678 18.6211 47.8281 18.17C46.9072 17.719 46.1649 17.1082 45.6011 16.3377C45.0373 15.5671 44.7554 14.5805 44.7554 13.3777C44.7554 12.1185 45.0655 11.0285 45.6856 10.1076C46.3246 9.18668 47.1985 8.48192 48.3074 7.99328C49.4162 7.48586 50.7129 7.23214 52.1976 7.23214C53.6072 7.23214 54.7724 7.43887 55.6933 7.85233C56.6141 8.26579 57.3471 8.77322 57.8921 9.37462C58.4559 9.97602 58.8694 10.5774 59.1325 11.1788C59.3956 11.7802 59.5648 12.2876 59.6399 12.7011C59.7339 13.1146 59.7809 13.3213 59.7809 13.3213H56.0315C56.0315 13.3213 55.994 13.1803 55.9188 12.8984C55.8436 12.5977 55.6745 12.2594 55.4114 11.8836C55.1482 11.5077 54.7536 11.1788 54.2274 10.8969C53.7011 10.5962 52.9964 10.4459 52.1131 10.4459C50.8539 10.4459 49.933 10.7278 49.3504 11.2916C48.7866 11.8554 48.5047 12.4662 48.5047 13.124C48.5047 13.8005 48.7678 14.3267 49.294 14.7026C49.8202 15.0785 50.525 15.3698 51.4083 15.5765L54.3683 16.1967C55.4771 16.441 56.492 16.8075 57.4129 17.2961C58.3338 17.7848 59.0667 18.4332 59.6117 19.2413C60.1568 20.0306 60.4293 21.0173 60.4293 22.2013C60.4293 23.4041 60.1286 24.4941 59.5272 25.4714C58.9258 26.4487 58.0425 27.2286 56.8773 27.8112C55.7121 28.375 54.2837 28.6569 52.5923 28.6569ZM68.9639 28.6569C67.3289 28.6569 65.9381 28.2904 64.7917 27.5575C63.6453 26.8245 62.7714 25.8754 62.17 24.7102C61.5874 23.5262 61.2961 22.2577 61.2961 20.9045C61.2961 19.5514 61.5874 18.2922 62.17 17.127C62.7714 15.943 63.6453 14.9845 64.7917 14.2516C65.9381 13.5186 67.3289 13.1521 68.9639 13.1521C70.6178 13.1521 72.0085 13.5186 73.1361 14.2516C74.2825 14.9845 75.147 15.943 75.7296 17.127C76.331 18.2922 76.6317 19.5514 76.6317 20.9045C76.6317 22.2577 76.331 23.5262 75.7296 24.7102C75.147 25.8754 74.2825 26.8245 73.1361 27.5575C72.0085 28.2904 70.6178 28.6569 68.9639 28.6569ZM68.9639 25.5278C69.8096 25.5278 70.5144 25.3116 71.0782 24.8794C71.6608 24.4471 72.1025 23.8833 72.4032 23.188C72.7039 22.4738 72.8542 21.7127 72.8542 20.9045C72.8542 20.0776 72.7039 19.3165 72.4032 18.6211C72.1025 17.9257 71.6608 17.3619 71.0782 16.9297C70.5144 16.4974 69.8096 16.2813 68.9639 16.2813C68.137 16.2813 67.4322 16.4974 66.8496 16.9297C66.267 17.3619 65.8254 17.9257 65.5247 18.6211C65.224 19.3165 65.0736 20.0776 65.0736 20.9045C65.0736 21.7127 65.224 22.4738 65.5247 23.188C65.8254 23.8833 66.267 24.4471 66.8496 24.8794C67.4322 25.3116 68.137 25.5278 68.9639 25.5278ZM78.3214 28.375L78.3496 6.95024H82.0707V28.375H78.3214ZM88.6629 28.375L83.1094 13.434H86.9151L90.6644 24.09L94.3574 13.434H98.1631L92.5814 28.375H88.6629ZM105.436 28.6569C104.158 28.6569 103.049 28.4408 102.109 28.0085C101.188 27.5575 100.418 26.9655 99.7975 26.2325C99.1961 25.4808 98.745 24.6445 98.4443 23.7236C98.1436 22.8027 97.9933 21.863 97.9933 20.9045C97.9933 19.946 98.1342 19.0158 98.4161 18.1137C98.7168 17.1928 99.1585 16.3565 99.7411 15.6047C100.342 14.853 101.104 14.261 102.025 13.8287C102.945 13.3777 104.035 13.1521 105.295 13.1521C106.648 13.1521 107.841 13.4528 108.875 14.0542C109.908 14.6556 110.717 15.5389 111.299 16.7041C111.882 17.8506 112.173 19.2789 112.173 20.9891V21.9476H101.771C101.827 22.9624 102.175 23.8457 102.814 24.5975C103.453 25.3304 104.327 25.6969 105.436 25.6969C106.075 25.6969 106.601 25.5935 107.014 25.3868C107.428 25.1801 107.747 24.9452 107.973 24.682C108.198 24.4001 108.358 24.1652 108.452 23.9773C108.546 23.7706 108.593 23.6672 108.593 23.6672H112.06C112.06 23.6672 112.013 23.8363 111.919 24.1746C111.825 24.4941 111.647 24.9076 111.384 25.415C111.139 25.9036 110.773 26.4017 110.284 26.9091C109.796 27.3977 109.157 27.8112 108.367 28.1495C107.578 28.4878 106.601 28.6569 105.436 28.6569ZM101.771 19.495H108.565C108.508 18.3298 108.161 17.4653 107.522 16.9015C106.883 16.3377 106.131 16.0558 105.266 16.0558C104.308 16.0558 103.509 16.3659 102.87 16.986C102.231 17.5874 101.865 18.4238 101.771 19.495ZM113.58 28.375V13.434H117.33V15.5765H117.499C117.649 15.3134 117.884 14.9939 118.204 14.618C118.523 14.2234 118.965 13.8851 119.529 13.6032C120.092 13.3025 120.807 13.1521 121.671 13.1521C122.818 13.1521 123.757 13.4153 124.49 13.9415C125.242 14.4489 125.796 15.1255 126.153 15.9712C126.529 16.8169 126.717 17.7284 126.717 18.7057V28.375H122.968V19.2131C122.968 18.405 122.742 17.7096 122.291 17.127C121.84 16.5444 121.164 16.2531 120.262 16.2531C119.566 16.2531 119.002 16.4316 118.57 16.7887C118.138 17.127 117.818 17.5687 117.612 18.1137C117.424 18.6587 117.33 19.2319 117.33 19.8333V28.375H113.58ZM134.736 28.6569C133.627 28.6569 132.659 28.4408 131.832 28.0085C131.005 27.5575 130.31 26.9655 129.746 26.2325C129.201 25.4808 128.787 24.6445 128.506 23.7236C128.242 22.8027 128.111 21.863 128.111 20.9045C128.111 19.946 128.242 19.0064 128.506 18.0855C128.787 17.1646 129.201 16.3377 129.746 15.6047C130.31 14.853 131.005 14.261 131.832 13.8287C132.659 13.3777 133.627 13.1521 134.736 13.1521C135.694 13.1521 136.483 13.3119 137.104 13.6314C137.724 13.9321 138.212 14.2704 138.57 14.6462C138.927 15.0033 139.171 15.2946 139.302 15.5201H139.472V6.95024H143.221V28.375H139.472V26.2889H139.302C139.171 26.5144 138.927 26.8151 138.57 27.191C138.212 27.5669 137.724 27.9052 137.104 28.2059C136.483 28.5066 135.694 28.6569 134.736 28.6569ZM135.722 25.5841C136.568 25.5841 137.273 25.3586 137.837 24.9076C138.4 24.4377 138.823 23.8457 139.105 23.1316C139.387 22.4174 139.528 21.6751 139.528 20.9045C139.528 20.134 139.387 19.3916 139.105 18.6775C138.823 17.9633 138.4 17.3807 137.837 16.9297C137.273 16.4598 136.568 16.2249 135.722 16.2249C134.877 16.2249 134.162 16.4598 133.58 16.9297C133.016 17.3807 132.593 17.9633 132.311 18.6775C132.029 19.3916 131.888 20.134 131.888 20.9045C131.888 21.6751 132.029 22.4174 132.311 23.1316C132.593 23.8457 133.016 24.4377 133.58 24.9076C134.162 25.3586 134.877 25.5841 135.722 25.5841ZM152.572 28.6569C150.937 28.6569 149.546 28.2904 148.4 27.5575C147.253 26.8245 146.379 25.8754 145.778 24.7102C145.195 23.5262 144.904 22.2577 144.904 20.9045C144.904 19.5514 145.195 18.2922 145.778 17.127C146.379 15.943 147.253 14.9845 148.4 14.2516C149.546 13.5186 150.937 13.1521 152.572 13.1521C154.226 13.1521 155.616 13.5186 156.744 14.2516C157.89 14.9845 158.755 15.943 159.338 17.127C159.939 18.2922 160.24 19.5514 160.24 20.9045C160.24 22.2577 159.939 23.5262 159.338 24.7102C158.755 25.8754 157.89 26.8245 156.744 27.5575C155.616 28.2904 154.226 28.6569 152.572 28.6569ZM152.572 25.5278C153.418 25.5278 154.122 25.3116 154.686 24.8794C155.269 24.4471 155.71 23.8833 156.011 23.188C156.312 22.4738 156.462 21.7127 156.462 20.9045C156.462 20.0776 156.312 19.3165 156.011 18.6211C155.71 17.9257 155.269 17.3619 154.686 16.9297C154.122 16.4974 153.418 16.2813 152.572 16.2813C151.745 16.2813 151.04 16.4974 150.458 16.9297C149.875 17.3619 149.433 17.9257 149.133 18.6211C148.832 19.3165 148.682 20.0776 148.682 20.9045C148.682 21.7127 148.832 22.4738 149.133 23.188C149.433 23.8833 149.875 24.4471 150.458 24.8794C151.04 25.3116 151.745 25.5278 152.572 25.5278Z",fill:"#F1F1F1"}),s.jsx("defs",{children:s.jsx("clipPath",{id:"clip0_429_1793",children:s.jsx("rect",{width:"21.5833",height:"33.0256",fill:"white",transform:"translate(5.81546 1.9873)"})})})]}):s.jsxs("svg",{className:`${n[t]} ${r}`,viewBox:"0 0 195 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("rect",{width:"36",height:"42",rx:"6",fill:"#101014"}),s.jsxs("g",{clipPath:"url(#clip0_390_976)",children:[s.jsx("path",{d:"M10.2541 39.3614C10.2855 39.401 10.3153 39.4325 10.343 39.4555C10.2959 39.4733 10.2656 39.4401 10.2541 39.3614C9.33584 38.2016 7.08012 30.079 17.9678 25.5216C29.2276 20.8084 29.7214 15.7012 29.7214 15.7012C30.0984 19.9322 31.5349 22.1574 21.8036 26.5279C12.8047 30.5694 10.1129 38.3943 10.2541 39.3614Z",fill:"white"}),s.jsx("path",{d:"M6.96423 35.7833C6.99415 35.824 7.0228 35.8566 7.04962 35.8806C7.00185 35.8967 6.97283 35.8623 6.96423 35.7833C6.08904 34.5907 4.13226 26.3909 15.1795 22.2352C26.6044 17.9375 27.2848 12.8518 27.2848 12.8518C27.5066 17.0938 28.8607 19.3701 18.9759 23.3813C9.83501 27.0906 6.85856 34.8117 6.96423 35.7833Z",fill:"white"}),s.jsx("path",{d:"M12.1234 7.80196C10.0483 5.58823 9.71884 4.31743 10.655 2C11.1616 5.2098 15.278 7.65495 26.306 12.6369C26.1371 14.1994 25.8766 14.6897 25.2316 15.1439C25.2316 15.1439 14.1985 10.0157 12.1234 7.80196Z",fill:"white"}),s.jsx("path",{d:"M10.3022 11.0369C8.26209 8.79091 7.95257 7.51509 8.925 5.21264C9.36192 8.29458 12.9905 10.6612 22.9186 15.3855C23.5633 15.6923 23.7063 16.5525 23.1891 17.0446C22.5706 17.6328 21.6509 17.7731 20.8895 17.3874C17.596 15.7188 11.7523 12.6334 10.3022 11.0369Z",fill:"white"})]}),s.jsx("path",{d:"M58.848 33.07C57.376 33.07 56.1173 32.8887 55.072 32.526C54.0267 32.1633 53.152 31.694 52.448 31.118C51.7653 30.542 51.2213 29.934 50.816 29.294C50.4107 28.6327 50.1013 28.014 49.888 27.438C49.696 26.862 49.568 26.3927 49.504 26.03C49.44 25.6673 49.408 25.486 49.408 25.486H53.824C53.824 25.486 53.8453 25.614 53.888 25.87C53.952 26.126 54.08 26.4567 54.272 26.862C54.464 27.246 54.7413 27.63 55.104 28.014C55.488 28.398 55.9893 28.7287 56.608 29.006C57.248 29.262 58.0373 29.39 58.976 29.39C60.4267 29.39 61.5253 29.07 62.272 28.43C63.04 27.7687 63.424 26.958 63.424 25.998C63.424 25.1873 63.136 24.5473 62.56 24.078C61.984 23.5873 61.1307 23.2247 60 22.99L56.864 22.318C55.648 22.062 54.5067 21.678 53.44 21.166C52.3947 20.654 51.552 19.9607 50.912 19.086C50.272 18.2113 49.952 17.0913 49.952 15.726C49.952 14.2967 50.304 13.0593 51.008 12.014C51.7333 10.9687 52.7253 10.1687 53.984 9.614C55.2427 9.038 56.7147 8.75 58.4 8.75C60 8.75 61.3227 8.98466 62.368 9.454C63.4133 9.92333 64.2453 10.4993 64.864 11.182C65.504 11.8647 65.9733 12.5473 66.272 13.23C66.5707 13.9127 66.7627 14.4887 66.848 14.958C66.9547 15.4273 67.008 15.662 67.008 15.662H62.752C62.752 15.662 62.7093 15.502 62.624 15.182C62.5387 14.8407 62.3467 14.4567 62.048 14.03C61.7493 13.6033 61.3013 13.23 60.704 12.91C60.1067 12.5687 59.3067 12.398 58.304 12.398C56.8747 12.398 55.8293 12.718 55.168 13.358C54.528 13.998 54.208 14.6913 54.208 15.438C54.208 16.206 54.5067 16.8033 55.104 17.23C55.7013 17.6567 56.5013 17.9873 57.504 18.222L60.864 18.926C62.1227 19.2033 63.2747 19.6193 64.32 20.174C65.3653 20.7287 66.1973 21.4647 66.816 22.382C67.4347 23.278 67.744 24.398 67.744 25.742C67.744 27.1073 67.4027 28.3447 66.72 29.454C66.0373 30.5633 65.0347 31.4487 63.712 32.11C62.3893 32.75 60.768 33.07 58.848 33.07ZM77.432 33.07C75.576 33.07 73.9973 32.654 72.696 31.822C71.3947 30.99 70.4027 29.9127 69.72 28.59C69.0587 27.246 68.728 25.806 68.728 24.27C68.728 22.734 69.0587 21.3047 69.72 19.982C70.4027 18.638 71.3947 17.55 72.696 16.718C73.9973 15.886 75.576 15.47 77.432 15.47C79.3093 15.47 80.888 15.886 82.168 16.718C83.4693 17.55 84.4507 18.638 85.112 19.982C85.7947 21.3047 86.136 22.734 86.136 24.27C86.136 25.806 85.7947 27.246 85.112 28.59C84.4507 29.9127 83.4693 30.99 82.168 31.822C80.888 32.654 79.3093 33.07 77.432 33.07ZM77.432 29.518C78.392 29.518 79.192 29.2727 79.832 28.782C80.4933 28.2913 80.9947 27.6513 81.336 26.862C81.6773 26.0513 81.848 25.1873 81.848 24.27C81.848 23.3313 81.6773 22.4673 81.336 21.678C80.9947 20.8887 80.4933 20.2487 79.832 19.758C79.192 19.2673 78.392 19.022 77.432 19.022C76.4933 19.022 75.6933 19.2673 75.032 19.758C74.3707 20.2487 73.8693 20.8887 73.528 21.678C73.1867 22.4673 73.016 23.3313 73.016 24.27C73.016 25.1873 73.1867 26.0513 73.528 26.862C73.8693 27.6513 74.3707 28.2913 75.032 28.782C75.6933 29.2727 76.4933 29.518 77.432 29.518ZM88.054 32.75L88.086 8.43H92.31V32.75H88.054ZM99.793 32.75L93.489 15.79H97.809L102.065 27.886L106.257 15.79H110.577L104.241 32.75H99.793ZM118.832 33.07C117.382 33.07 116.123 32.8247 115.056 32.334C114.011 31.822 113.136 31.15 112.432 30.318C111.75 29.4647 111.238 28.5153 110.896 27.47C110.555 26.4247 110.384 25.358 110.384 24.27C110.384 23.182 110.544 22.126 110.864 21.102C111.206 20.0567 111.707 19.1073 112.368 18.254C113.051 17.4007 113.915 16.7287 114.96 16.238C116.006 15.726 117.243 15.47 118.672 15.47C120.208 15.47 121.563 15.8113 122.736 16.494C123.91 17.1767 124.827 18.1793 125.488 19.502C126.15 20.8033 126.48 22.4247 126.48 24.366V25.454H114.672C114.736 26.606 115.131 27.6087 115.856 28.462C116.582 29.294 117.574 29.71 118.832 29.71C119.558 29.71 120.155 29.5927 120.624 29.358C121.094 29.1233 121.456 28.8567 121.712 28.558C121.968 28.238 122.15 27.9713 122.256 27.758C122.363 27.5233 122.416 27.406 122.416 27.406H126.352C126.352 27.406 126.299 27.598 126.192 27.982C126.086 28.3447 125.883 28.814 125.584 29.39C125.307 29.9447 124.891 30.51 124.336 31.086C123.782 31.6407 123.056 32.11 122.16 32.494C121.264 32.878 120.155 33.07 118.832 33.07ZM114.672 22.67H122.384C122.32 21.3473 121.926 20.366 121.2 19.726C120.475 19.086 119.622 18.766 118.64 18.766C117.552 18.766 116.646 19.118 115.92 19.822C115.195 20.5047 114.779 21.454 114.672 22.67ZM128.078 32.75V15.79H132.334V18.222H132.526C132.696 17.9233 132.963 17.5607 133.326 17.134C133.688 16.686 134.19 16.302 134.83 15.982C135.47 15.6407 136.28 15.47 137.262 15.47C138.563 15.47 139.63 15.7687 140.462 16.366C141.315 16.942 141.944 17.71 142.35 18.67C142.776 19.63 142.99 20.6647 142.99 21.774V32.75H138.734V22.35C138.734 21.4327 138.478 20.6433 137.966 19.982C137.454 19.3207 136.686 18.99 135.662 18.99C134.872 18.99 134.232 19.1927 133.742 19.598C133.251 19.982 132.888 20.4833 132.654 21.102C132.44 21.7207 132.334 22.3713 132.334 23.054V32.75H128.078ZM152.092 33.07C150.833 33.07 149.734 32.8247 148.796 32.334C147.857 31.822 147.068 31.15 146.428 30.318C145.809 29.4647 145.34 28.5153 145.02 27.47C144.721 26.4247 144.572 25.358 144.572 24.27C144.572 23.182 144.721 22.1153 145.02 21.07C145.34 20.0247 145.809 19.086 146.428 18.254C147.068 17.4007 147.857 16.7287 148.796 16.238C149.734 15.726 150.833 15.47 152.092 15.47C153.18 15.47 154.076 15.6513 154.78 16.014C155.484 16.3553 156.038 16.7393 156.444 17.166C156.849 17.5713 157.126 17.902 157.276 18.158H157.468V8.43H161.724V32.75H157.468V30.382H157.276C157.126 30.638 156.849 30.9793 156.444 31.406C156.038 31.8327 155.484 32.2167 154.78 32.558C154.076 32.8993 153.18 33.07 152.092 33.07ZM153.212 29.582C154.172 29.582 154.972 29.326 155.612 28.814C156.252 28.2807 156.732 27.6087 157.052 26.798C157.372 25.9873 157.532 25.1447 157.532 24.27C157.532 23.3953 157.372 22.5527 157.052 21.742C156.732 20.9313 156.252 20.27 155.612 19.758C154.972 19.2247 154.172 18.958 153.212 18.958C152.252 18.958 151.441 19.2247 150.78 19.758C150.14 20.27 149.66 20.9313 149.34 21.742C149.02 22.5527 148.86 23.3953 148.86 24.27C148.86 25.1447 149.02 25.9873 149.34 26.798C149.66 27.6087 150.14 28.2807 150.78 28.814C151.441 29.326 152.252 29.582 153.212 29.582ZM172.338 33.07C170.482 33.07 168.904 32.654 167.602 31.822C166.301 30.99 165.309 29.9127 164.626 28.59C163.965 27.246 163.634 25.806 163.634 24.27C163.634 22.734 163.965 21.3047 164.626 19.982C165.309 18.638 166.301 17.55 167.602 16.718C168.904 15.886 170.482 15.47 172.338 15.47C174.216 15.47 175.794 15.886 177.074 16.718C178.376 17.55 179.357 18.638 180.018 19.982C180.701 21.3047 181.042 22.734 181.042 24.27C181.042 25.806 180.701 27.246 180.018 28.59C179.357 29.9127 178.376 30.99 177.074 31.822C175.794 32.654 174.216 33.07 172.338 33.07ZM172.338 29.518C173.298 29.518 174.098 29.2727 174.738 28.782C175.4 28.2913 175.901 27.6513 176.242 26.862C176.584 26.0513 176.754 25.1873 176.754 24.27C176.754 23.3313 176.584 22.4673 176.242 21.678C175.901 20.8887 175.4 20.2487 174.738 19.758C174.098 19.2673 173.298 19.022 172.338 19.022C171.4 19.022 170.6 19.2673 169.938 19.758C169.277 20.2487 168.776 20.8887 168.434 21.678C168.093 22.4673 167.922 23.3313 167.922 24.27C167.922 25.1873 168.093 26.0513 168.434 26.862C168.776 27.6513 169.277 28.2913 169.938 28.782C170.6 29.2727 171.4 29.518 172.338 29.518Z",fill:"#101014"}),s.jsx("defs",{children:s.jsx("clipPath",{id:"clip0_390_976",children:s.jsx("rect",{width:"24.5",height:"37.4886",fill:"white",transform:"translate(5.75 2.25574)"})})})]})},x8=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(""),[a,i]=g.useState(!1),[o,l]=g.useState(""),[c,u]=g.useState(!1),{validateUser:d,login:f}=ze(),h=async m=>{if(m.preventDefault(),!e||!r){D.error("Por favor ingresa RUT y contraseña");return}u(!0),l("");try{if(e==="78.168.951-3"&&r==="123456"){const v=await f(e,r);v.success?D.success("Inicio de sesión exitoso"):(l(v.error||"Error en el login"),D.error("Error en el login"))}else l("Credenciales incorrectas"),D.error("Credenciales incorrectas")}catch{l("Error de conexión"),D.error("Error de conexión")}finally{u(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsx("div",{className:"text-center mb-8",children:s.jsx(u0,{size:"lg",className:"mx-auto mb-6"})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(m8,{className:"w-8 h-8 text-orange-600"})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Iniciar Sesión"}),s.jsx("p",{className:"text-gray-600",children:"Ingrese sus credenciales"}),s.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"RUT: 78.168.951-3 / Clave: 123456"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID / RUT Supervisor"}),s.jsx("input",{type:"text",value:e,onChange:m=>t(m.target.value.trim()),placeholder:"12.345.678-9",className:"w-full px-4 py-3 bg-gray-100 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 placeholder-gray-500",autoFocus:!0})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña del Supervisor"}),s.jsx("input",{type:a?"text":"password",value:r,onChange:m=>n(m.target.value.trim()),placeholder:"Contraseña del Supervisor",className:"w-full px-4 py-3 bg-gray-100 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 placeholder-gray-500"}),s.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform translate-y-1 text-gray-400 hover:text-gray-600",onClick:()=>i(!a),children:a?s.jsx(xj,{size:20}):s.jsx(bj,{size:20})})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-red-600",children:o})}),s.jsx("button",{type:"submit",disabled:!e||!r||c,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors h-12",children:c?"Ingresando...":"Ingresar"})]})]})]})})};function b8(){const{productos:e=[],addToCart:t,loadProductos:r}=Dt(),[n,a]=g.useState({}),[i,o]=g.useState({});qn.useEffect(()=>{r()},[r]);const l=e.filter(f=>f.destacado),c=f=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.max(0,f||0)),u=f=>{a(h=>({...h,[f]:!h[f]}))},d=f=>{o(h=>({...h,[f]:!h[f]}))};return l.length?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qc,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Productos destacados"})]}),s.jsx("div",{className:"space-y-3",children:l.map(f=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[s.jsx("div",{className:"flex-1",children:s.jsx("span",{className:"font-medium text-gray-900",children:f.nombre})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(f),className:"p-1.5 bg-gray-200 hover:bg-gray-300 rounded-full transition-colors",title:"Agregar producto",children:s.jsx(qt,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{onClick:()=>d(f.id),className:`p-1.5 rounded-full transition-colors ${i[f.id]?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,title:"Mostrar precio",children:s.jsx(Br,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>u(f.id),className:`p-1.5 rounded-full transition-colors ${n[f.id]?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,title:"Mostrar información",children:s.jsx(o0,{className:"w-4 h-4"})})]})]}),i[f.id]&&s.jsxs("div",{className:"pl-4 text-sm text-blue-600 font-medium",children:["Precio: ",c(f.precio||0)]}),n[f.id]&&s.jsxs("div",{className:"pl-4 space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stock:"}),s.jsxs("span",{children:[Math.max(0,f.stock||0)," unidades"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"SKU:"}),s.jsx("span",{children:f.codigo||"Sin SKU"})]})]})]},f.id))})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qc,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Productos destacados"})]}),s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay productos destacados"})]})}function w8({borradores:e=[],onLoad:t,onDelete:r}){const{borradores:n,loadBorradores:a,loadDraft:i,deleteDraft:o}=Dt(),[l,c]=g.useState("");g.useEffect(()=>{a()},[a]);const d=(e.length>0?e:n||[]).filter(f=>f.nombre.toLowerCase().includes(l.toLowerCase()));return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Borradores de Venta"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Fecha: ",new Date().toLocaleDateString("es-CL")]})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{value:l,onChange:f=>c(f.target.value),placeholder:"Buscar borradores...",className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("ul",{className:"space-y-2",children:[d.map((f,h)=>s.jsxs("li",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[s.jsxs("span",{className:"flex-1 text-sm",children:["Nº",h+1," ",f.nombre," –"," ",new Date(f.fecha).toLocaleDateString("es-CL")]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t?t(f.id):i(f.id),className:"text-green-600 p-1 hover:bg-green-50 rounded",title:"Cargar",children:s.jsx(Qu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r?r(f.id):o(f.id),className:"text-red-600 p-1 hover:bg-red-50 rounded",title:"Eliminar",children:s.jsx(nl,{className:"w-4 h-4"})})]})]},f.id)),!d.length&&s.jsx("li",{className:"text-center text-gray-500 py-4",children:l?"No se encontraron borradores":"Aquí aparecerán tus borradores guardados"})]})]})}const j8=({onAddToCart:e,searchTerm:t=""})=>{const{productos:r,loading:n,loadProductos:a}=Dt(),[i,o]=g.useState("all"),[l,c]=g.useState(""),[u,d]=g.useState({}),[f,h]=g.useState({});qn.useEffect(()=>{a()},[a]);const m=b=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.max(0,b||0)),v=l||t,x=r.filter(b=>{const w=v?b.nombre.toLowerCase().includes(v.toLowerCase())||b.codigo&&b.codigo.toLowerCase().includes(v.toLowerCase())||b.codigo_barras&&b.codigo_barras.toLowerCase().includes(v.toLowerCase()):!0,j=i==="all"?!0:i==="con_sku"?b.codigo&&b.codigo.trim()!=="":i==="sin_sku"?!b.codigo||b.codigo.trim()==="":!0;return w&&j}),y=b=>{d(w=>({...w,[b]:!w[b]}))},p=b=>{h(w=>({...w,[b]:!w[b]}))};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(jj,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold",children:"Productos / Servicios"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("select",{value:i,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 bg-white border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Productos totales"}),s.jsx("option",{value:"con_sku",children:"Con SKU"}),s.jsx("option",{value:"sin_sku",children:"Sin SKU"})]})}),s.jsx("div",{className:"space-y-3",children:n?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cargando productos..."}):x.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:v?"No se encontraron productos con ese término":"No hay productos disponibles"}):x.map(b=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200",children:[s.jsx("div",{className:"flex-1",children:s.jsx("span",{className:"font-medium text-gray-900",children:b.nombre})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>e(b),className:"p-1.5 bg-gray-200 hover:bg-gray-300 rounded-full transition-colors",title:"Agregar producto",children:s.jsx(qt,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{onClick:()=>y(b.id),className:`p-1.5 rounded-full transition-colors ${u[b.id]?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,title:"Mostrar precio",children:s.jsx(Br,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p(b.id),className:`p-1.5 rounded-full transition-colors ${f[b.id]?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,title:"Mostrar información",children:s.jsx(o0,{className:"w-4 h-4"})})]})]}),u[b.id]&&s.jsxs("div",{className:"pl-4 text-sm text-blue-600 font-medium",children:["Precio: ",m(b.precio||0)]}),f[b.id]&&s.jsxs("div",{className:"pl-4 space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stock:"}),s.jsxs("span",{children:[Math.max(0,b.stock||0)," unidades"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"SKU:"}),s.jsx("span",{children:b.codigo||"Sin SKU"})]})]})]},b.id))}),s.jsxs("div",{className:"relative mt-6",children:[s.jsx("input",{value:l,onChange:b=>{c(b.target.value)},type:"text",placeholder:"Buscar productos...",className:"w-full pl-4 pr-10 py-3 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx(dt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"})]})]})};function S8({onClientSelected:e}){const{clientes:t,loadClientes:r,currentCliente:n,selectClient:a,crearCliente:i}=Dt(),[o,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(!1),[h,m]=g.useState({tipo:"Persona",extranjero:"No",rut:"",razon_social:"",giro:"",nombres:"",apellidos:"",direccion:"",comuna:"",ciudad:""});g.useEffect(()=>{r()},[r]);const v=(t||[]).filter(p=>p.razon_social.toLowerCase().includes(o.toLowerCase())),x=p=>{a(p),e(p)},y=async()=>{if(!h.razon_social.trim()||!h.rut.trim())return D.error("RUT y Razón social obligatorios");f(!0);const p=await i({rut:h.rut,razon_social:h.razon_social,giro:h.giro,nombres:h.nombres,apellidos:h.apellidos,direccion:h.direccion,comuna:h.comuna,ciudad:h.ciudad});f(!1),p.success&&p.data&&(u(!1),m({tipo:"Persona",extranjero:"No",rut:"",razon_social:"",giro:"",nombres:"",apellidos:"",direccion:"",comuna:"",ciudad:""}),a(p.data),e(p.data))};return c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sa,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Registrar nuevo cliente"})]}),[["Tipo de Cliente",s.jsxs("select",{value:h.tipo,onChange:p=>m(b=>({...b,tipo:p.target.value})),className:"border rounded px-3 py-2",children:[s.jsx("option",{children:"Persona"}),s.jsx("option",{children:"Empresa"})]})],["Cliente Extranjero",s.jsxs("select",{value:h.extranjero,onChange:p=>m(b=>({...b,extranjero:p.target.value})),className:"border rounded px-3 py-2",children:[s.jsx("option",{children:"No"}),s.jsx("option",{children:"Sí"})]})],["RUT",s.jsx("input",{value:h.rut,onChange:p=>m(b=>({...b,rut:p.target.value})),placeholder:"RUT",className:"border rounded px-3 py-2"})],["Razón Social",s.jsx("input",{value:h.razon_social,onChange:p=>m(b=>({...b,razon_social:p.target.value})),placeholder:"Razón Social",className:"border rounded px-3 py-2"})],["Giro",s.jsx("input",{value:h.giro,onChange:p=>m(b=>({...b,giro:p.target.value})),placeholder:"Giro",className:"border rounded px-3 py-2"})],["Nombres",s.jsx("input",{value:h.nombres,onChange:p=>m(b=>({...b,nombres:p.target.value})),placeholder:"Nombres",className:"border rounded px-3 py-2"})],["Apellidos",s.jsx("input",{value:h.apellidos,onChange:p=>m(b=>({...b,apellidos:p.target.value})),placeholder:"Apellidos",className:"border rounded px-3 py-2"})],["Dirección",s.jsx("input",{value:h.direccion,onChange:p=>m(b=>({...b,direccion:p.target.value})),placeholder:"Dirección",className:"border rounded px-3 py-2"})],["Comuna",s.jsx("input",{value:h.comuna,onChange:p=>m(b=>({...b,comuna:p.target.value})),placeholder:"Comuna",className:"border rounded px-3 py-2"})],["Ciudad",s.jsx("input",{value:h.ciudad,onChange:p=>m(b=>({...b,ciudad:p.target.value})),placeholder:"Ciudad",className:"border rounded px-3 py-2"})]].map(([p,b],w)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"font-medium",children:p}),s.jsx("div",{className:"flex-1 ml-4",children:b})]},w)),s.jsxs("div",{className:"flex space-x-4 pt-4",children:[s.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 bg-gray-100 rounded-lg",children:"Cancelar"}),s.jsx("button",{onClick:y,disabled:d,className:"flex-1 py-3 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:d?"Guardando...":"Guardar cliente"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sa,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Clientes"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{value:o,onChange:p=>l(p.target.value),placeholder:"Buscar cliente...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:[v.map(p=>s.jsxs("li",{onClick:()=>x(p),className:`p-3 border rounded hover:bg-gray-50 cursor-pointer flex justify-between items-center ${(n==null?void 0:n.id)===p.id?"bg-blue-50 border-blue-200":"bg-white"}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:p.razon_social}),s.jsx("p",{className:"text-xs text-gray-600",children:p.rut})]}),(n==null?void 0:n.id)===p.id?s.jsx(Qu,{className:"w-4 h-4 text-blue-600"}):s.jsx(qt,{className:"w-4 h-4 text-blue-600"})]},p.id)),!v.length&&s.jsx("li",{className:"text-gray-500 text-center py-4",children:o?"Sin resultados":"Aquí aparecerán tus clientes"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"w-full py-3 bg-blue-600 text-white rounded-lg flex items-center justify-center space-x-2",children:[s.jsx(qt,{className:"w-5 h-5"}),s.jsx("span",{children:"Registrar nuevo cliente"})]})]})}const N8=({isOpen:e,onClose:t,onPrint:r,onSendEmail:n})=>{const{carrito:a,total:i,currentCliente:o}=Dt(),{user:l}=ze();if(!e)return null;const c={folio:"V"+Date.now(),fecha:new Date().toLocaleDateString("es-CL"),hora:new Date().toLocaleTimeString("es-CL"),items:a.map(d=>({nombre:d.nombre,precio:d.precio,cantidad:d.quantity,subtotal:d.precio*d.quantity})),total:i,cliente:o,cajero:(l==null?void 0:l.nombre)||"Usuario"},u=()=>{var d,f,h;try{const m=window.open("","_blank","width=400,height=600,scrollbars=yes");if(!m)throw new Error("No se pudo abrir la ventana de impresión");const v=`
<!DOCTYPE html>
<html>
<head>
  <title>Boleta Solvendo</title>
  <style>
    @page { margin: 0; size: 80mm auto; }
    body { 
      font-family: 'Courier New', monospace; 
      margin: 0; 
      padding: 10mm; 
      font-size: 12px;
      line-height: 1.4;
      width: 80mm;
      box-sizing: border-box;
    }
    .receipt { width: 100%; }
    .header { 
      text-align: center; 
      margin-bottom: 15px; 
      border-bottom: 1px dashed #000; 
      padding-bottom: 15px; 
    }
    .company { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
    .info { margin-bottom: 3px; font-size: 10px; }
    .document-type { 
      font-size: 14px; 
      font-weight: bold; 
      margin: 10px 0; 
      text-align: center;
      background: #f0f0f0;
      padding: 5px;
      border: 1px solid #000;
    }
    .customer { 
      margin: 15px 0; 
      padding: 8px; 
      border: 1px dashed #000; 
      font-size: 10px;
      background: #f9f9f9;
    }
    .items-table { 
      width: 100%; 
      border-collapse: collapse; 
      margin: 15px 0; 
      font-size: 10px;
    }
    .items-table th { 
      background-color: #e0e0e0; 
      padding: 5px 2px; 
      text-align: left; 
      border: 1px solid #000; 
      font-weight: bold;
    }
    .items-table td { 
      padding: 5px 2px; 
      border: 1px solid #ccc; 
      vertical-align: top;
    }
    .totales { 
      margin-top: 15px; 
      border-top: 2px solid #000;
      padding-top: 10px;
      background: #f5f5f5;
      padding: 10px;
    }
    .total-line { 
      display: flex; 
      justify-content: space-between; 
      margin-bottom: 5px; 
      font-size: 11px;
    }
    .grand-total { 
      font-size: 16px; 
      font-weight: bold; 
      border-top: 2px solid #000; 
      padding-top: 8px; 
      margin-top: 8px; 
      background: #000;
      color: #fff;
      padding: 8px;
    }
    .footer { 
      margin-top: 20px; 
      text-align: center; 
      font-size: 9px; 
      border-top: 1px dashed #000;
      padding-top: 10px;
    }
    .solvendo-brand {
      text-align: center;
      margin-top: 15px;
      padding: 10px;
      background: #2979ff;
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="receipt">
    <div class="header">
      <div class="company">ANROLTEC SPA</div>
      <div class="info">Servicios de Tecnología</div>
      <div class="info">RUT: 78.168.951-3</div>
      <div class="info">Av. Providencia 1234, Santiago</div>
      <div class="info">Teléfono: +56 2 2345 6789</div>
    </div>
    
    <div class="document-type">BOLETA SOLVENDO</div>
    <div class="info"><strong>Folio:</strong> ${c.folio}</div>
    <div class="info"><strong>Fecha:</strong> ${c.fecha}</div>
    <div class="info"><strong>Hora:</strong> ${c.hora}</div>
    <div class="info"><strong>Cajero:</strong> ${c.cajero}</div>
    
    <div class="customer">
      <div><strong>Cliente:</strong> ${((d=c.cliente)==null?void 0:d.razon_social)||"Consumidor Final"}</div>
      <div><strong>RUT:</strong> ${((f=c.cliente)==null?void 0:f.rut)||"66.666.666-6"}</div>
      ${(h=c.cliente)!=null&&h.direccion?`<div><strong>Dirección:</strong> ${c.cliente.direccion}</div>`:""}
    </div>
    
    <table class="items-table">
      <thead>
        <tr>
          <th>Descripción</th>
          <th>Cant.</th>
          <th>Precio</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        ${c.items.map(x=>`
          <tr>
            <td>${x.nombre}</td>
            <td>${x.cantidad}</td>
            <td>$${Math.round(x.precio).toLocaleString("es-CL")}</td>
            <td>$${Math.round(x.subtotal).toLocaleString("es-CL")}</td>
          </tr>
        `).join("")}
      </tbody>
    </table>
    
    <div class="totales">
      <div class="total-line">
        <span>Subtotal:</span>
        <span>$${Math.round(c.total).toLocaleString("es-CL")}</span>
      </div>
      <div class="total-line">
        <span>Descuentos:</span>
        <span>$0</span>
      </div>
      <div class="total-line">
        <span>IVA (19%):</span>
        <span>$0</span>
      </div>
      <div class="total-line grand-total">
        <span>TOTAL A PAGAR:</span>
        <span>$${Math.round(c.total).toLocaleString("es-CL")}</span>
      </div>
    </div>
    
    <div class="footer">
      <p>¡Gracias por su compra!</p>
      <p>Documento generado por Solvendo POS</p>
      <p>www.solvendo.cl</p>
    </div>
    
    <div class="solvendo-brand">
      POWERED BY SOLVENDO
    </div>
  </div>
  
  <script>
    window.onload = function() {
      window.print();
      setTimeout(function() {
        window.close();
      }, 1000);
    }
  <\/script>
</body>
</html>`;m.document.write(v),m.document.close(),setTimeout(()=>{r&&r()},1500)}catch(m){console.error("Error al imprimir:",m),window.print(),r&&r()}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Boleta generada"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Enviar por correo electrónico (Opcional)"}),s.jsxs("div",{className:"flex mb-4",children:[s.jsx("input",{type:"email",placeholder:"cliente@ejemplo.com",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700",children:"Enviar"})]}),s.jsx("button",{onClick:u,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700",children:"Imprimir"})]})]})})},C8=({isOpen:e,onClose:t,draftName:r,setDraftName:n,onSave:a})=>{const{carrito:i}=Dt(),[o,l]=g.useState(!1);if(g.useEffect(()=>{e||n("")},[e,n]),!e)return null;const c=async()=>{if(!r.trim()){D.error("Debes ingresar un nombre");return}if(i.length===0){D.error("Carrito vacío");return}l(!0);try{a&&await a(),t()}catch(u){console.error(u),D.error("Error al guardar borrador")}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f8,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Guardar borrador"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del borrador"}),s.jsx("input",{type:"text",value:r,onChange:u=>n(u.target.value),placeholder:"Ingresa un nombre para este borrador",className:"w-full px-4 py-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,disabled:o,className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:c,disabled:o,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Guardando...":"Guardar"})]})]})]})})},It=({title:e,userName:t,userAvatarUrl:r,showClock:n=!0})=>{const{toggleSidebar:a}=c0(),{user:i}=ze();En();const{productos:o}=Dt(),[l,c]=qn.useState(""),[u,d]=qn.useState(!1),[f,h]=qn.useState(!1);qn.useEffect(()=>{if(n){const p=()=>c(new Intl.DateTimeFormat("es-CL",{hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date));p();const b=setInterval(p,1e3);return()=>clearInterval(b)}return()=>{}},[n]);const m=o.filter(p=>p.stock<=(p.stock_minimo||5)),v=qn.useMemo(()=>{const p=new Date,b=[];return m.forEach(w=>{b.push({id:`stock-${w.id}`,tipo:"stock_bajo",mensaje:`Stock bajo: ${w.nombre} (${w.stock} unidades)`,hora:p.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),icono:s.jsx(lm,{className:"w-4 h-4 text-orange-500"})})}),b.push({id:"sistema-1",tipo:"sistema",mensaje:"Sistema iniciado correctamente",hora:"09:00",icono:s.jsx(Af,{className:"w-4 h-4 text-blue-500"})},{id:"caja-1",tipo:"caja",mensaje:"Caja aperturada con $100.000",hora:"09:15",icono:s.jsx(Af,{className:"w-4 h-4 text-green-500"})}),b.slice(0,20)},[m]),x=()=>{d(!0)},y=()=>{h(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"flex items-center justify-between px-6 py-3 bg-white border-b h-1/6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(c8,{className:"w-5 h-5 text-gray-600"})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"text-lg font-semibold",children:e})})]}),s.jsx(u0,{size:"md"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative cursor-pointer",onClick:x,children:s.jsx("div",{className:"bg-red-100 border border-red-200 rounded-lg px-3 py-1 text-xs text-red-800",children:s.jsxs("span",{className:"font-medium",children:["⚠️ Productos bajo de stock (",m.length,")"]})})}),n&&s.jsxs("div",{className:"flex items-center px-3 py-1 bg-gray-100 rounded-lg",children:[s.jsx(As,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"ml-1 text-sm",children:l})]}),i&&s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-2 rounded-lg",onClick:()=>d(!0),children:[r?s.jsx("img",{src:r,alt:t,className:"w-8 h-8 rounded-full border border-gray-200"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-gray-600",children:t==null?void 0:t.charAt(0).toUpperCase()})}),s.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:block",children:t})]})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-96 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notificaciones del día"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[v.map(p=>s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[p.icono,s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-900",children:p.mensaje}),s.jsx("p",{className:"text-xs text-gray-500",children:p.hora})]})]},p.id)),v.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Af,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No hay notificaciones"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsx("button",{onClick:()=>d(!1),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Cerrar"})})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(s8,{className:"w-6 h-6 text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cerrar sesión"}),s.jsx("p",{className:"text-sm text-gray-500 text-center",children:"¿Estás seguro que deseas cerrar la sesión actual?"}),s.jsxs("div",{className:"flex gap-3 w-full mt-4",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{onClick:y,className:"flex-1 py-2 px-4 bg-red-600 rounded-md text-sm font-medium text-white hover:bg-red-700",children:"Cerrar sesión"})]})]})})})]})},_8=[{id:"destacado",label:"Destacado",icon:s.jsx(qc,{className:"w-5 h-5"})},{id:"borradores",label:"Borradores",icon:s.jsx(yo,{className:"w-5 h-5"})},{id:"promociones",label:"Promociones",icon:s.jsx(Ds,{className:"w-5 h-5"})},{id:"productos",label:"Productos",icon:s.jsx(jj,{className:"w-5 h-5"})},{id:"clientes",label:"Clientes",icon:s.jsx(sa,{className:"w-5 h-5"})}],k8=()=>{const{user:e}=ze();En();const{productos:t,carrito:r,total:n,addToCart:a,addToCartWithQuantity:i,updateQuantity:o,removeFromCart:l,clearCart:c,borradores:u,loadBorradores:d,saveDraft:f,loadDraft:h,deleteDraft:m,promociones:v,loadPromociones:x,aplicarPromocion:y,currentCliente:p,selectClient:b,clientes:w,loadClientes:j,procesarVenta:S,loadProductos:N}=Dt(),[C,_]=g.useState("destacado"),[A,k]=g.useState("");g.useState("");const[T,U]=g.useState(!1),[I,ee]=g.useState(""),[te,B]=g.useState(!1),[E,O]=g.useState(!1),[M,q]=g.useState(!1),[K,V]=g.useState(!1),[le,ge]=g.useState("efectivo"),[ce,P]=g.useState("boleta"),[G,X]=g.useState("terminal_principal"),[R,Y]=g.useState(null),[se,z]=g.useState(0),[xe,L]=g.useState(!1),[F,Z]=g.useState(""),[ae,ve]=g.useState(""),[Me,de]=g.useState(0),[Vt,Hr]=g.useState(!1);g.useState(!1);const[Gt,yt]=g.useState(!1),[Ze,In]=g.useState(null),[Yd,f_]=g.useState(!1),[vl,h_]=g.useState(""),[m_,Qg]=g.useState("");g.useEffect(()=>{d(),x(),j(),N()},[d,x,j,N]);const xt=W=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.max(0,Number(W)||0)),p_=async()=>{if(!I.trim()||r.length===0)return;U(!1),await f(I)&&(D.success("Borrador guardado"),ee(""),d())},g_=async W=>{await h(W)&&D.success("Borrador cargado"),_("destacado")},v_=async W=>{confirm("¿Eliminar borrador?")&&await m(W)&&(D.success("Borrador eliminado"),d())},y_=async()=>{if(r.length===0){D.error("No hay productos en el carrito");return}if(ce==="factura"&&!R){D.error("Debe seleccionar un cliente para factura electrónica");return}if(le==="efectivo"&&se<Kr){D.error("El monto recibido debe ser mayor o igual al total");return}yt(!0);try{const W=await S(le,ce,R==null?void 0:R.id);if(W.success)q(!1),V(!0);else{let fe="Error al procesar la venta";W.error&&(W.error.includes("caja")?fe="La caja está cerrada. Debe abrir la caja para procesar ventas.":W.error.includes("cliente")?fe="Debe seleccionar un cliente válido para este tipo de documento.":W.error.includes("stock")?fe="No hay suficiente stock para algunos productos.":fe=W.error),D.error(fe)}}catch(W){console.error("Error processing payment:",W),D.error("Error inesperado al procesar el pago. Intente nuevamente.")}finally{yt(!1)}},x_=()=>{try{const W=`
<!DOCTYPE html>
<html>
<head>
  <title>Boleta Solvendo</title>
  <style>
    @page { margin: 0; size: 80mm auto; }
    body { 
      font-family: 'Courier New', monospace; 
      margin: 0; 
      padding: 10mm; 
      font-size: 12px;
      line-height: 1.4;
      width: 80mm;
      box-sizing: border-box;
    }
    .receipt { width: 100%; }
    .header { 
      text-align: center; 
      margin-bottom: 15px; 
      border-bottom: 1px dashed #000; 
      padding-bottom: 15px; 
    }
    .company { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
    .info { margin-bottom: 3px; font-size: 10px; }
    .document-type { 
      font-size: 14px; 
      font-weight: bold; 
      margin: 10px 0; 
      text-align: center;
      background: #f0f0f0;
      padding: 5px;
      border: 1px solid #000;
    }
    .totales { 
      margin-top: 15px; 
      border-top: 2px solid #000;
      padding-top: 10px;
      background: #f5f5f5;
      padding: 10px;
    }
    .total-line { 
      display: flex; 
      justify-content: space-between; 
      margin-bottom: 5px; 
      font-size: 11px;
    }
    .grand-total { 
      font-size: 16px; 
      font-weight: bold; 
      border-top: 2px solid #000; 
      padding-top: 8px; 
      margin-top: 8px; 
      background: #000;
      color: #fff;
      padding: 8px;
    }
    .footer { 
      margin-top: 20px; 
      text-align: center; 
      font-size: 9px; 
      border-top: 1px dashed #000;
      padding-top: 10px;
    }
  </style>
</head>
<body>
  <div class="receipt">
    <div class="header">
      <div class="company">ANROLTEC SPA</div>
      <div class="info">Servicios de Tecnología</div>
      <div class="info">RUT: 78.168.951-3</div>
      <div class="info">Av. Providencia 1234, Santiago</div>
      <div class="info">Teléfono: +56 2 2345 6789</div>
    </div>
    
    <div class="document-type">${ce.toUpperCase()}</div>
    <div class="info"><strong>Folio:</strong> V${Date.now()}</div>
    <div class="info"><strong>Fecha:</strong> ${new Date().toLocaleDateString("es-CL")}</div>
    <div class="info"><strong>Hora:</strong> ${new Date().toLocaleTimeString("es-CL")}</div>
    <div class="info"><strong>Cajero:</strong> ${(e==null?void 0:e.nombre)||"Usuario"}</div>
    <div class="info"><strong>Cliente:</strong> ${(R==null?void 0:R.razon_social)||"Consumidor Final"}</div>
    <div class="info"><strong>RUT:</strong> ${(R==null?void 0:R.rut)||"66.666.666-6"}</div>
    <div class="info"><strong>Método:</strong> ${le}</div>
    
    <div style="border-top: 1px dashed #000; margin: 15px 0; padding-top: 10px;">
      <div style="font-weight: bold; margin-bottom: 10px;">PRODUCTOS:</div>
      ${r.map(yl=>`
        <div style="margin: 5px 0; display: flex; justify-content: space-between;">
          <span>${yl.nombre} x${yl.quantity}</span>
          <span>${xt(yl.precio*yl.quantity)}</span>
        </div>
      `).join("")}
    </div>
    
    <div class="totales">
      <div class="total-line">
        <span>Subtotal:</span>
        <span>${xt(n)}</span>
      </div>
      ${descuentoGlobal>0?`
        <div class="total-line" style="color: red;">
          <span>Descuento (${descuentoGlobal}%):</span>
          <span>-${xt(n*(descuentoGlobal/100))}</span>
        </div>
      `:""}
      <div class="total-line">
        <span>Descuentos:</span>
        <span>$0</span>
      </div>
      <div class="total-line grand-total">
        <span>TOTAL:</span>
        <span>${xt(Kr)}</span>
      </div>
      ${le==="efectivo"?`
        <div class="total-line">
          <span>Recibido:</span>
          <span>${xt(se)}</span>
        </div>
        <div class="total-line">
          <span>Vuelto:</span>
          <span>${xt(ev)}</span>
        </div>
      `:""}
    </div>
    
    <div class="footer">
      <p>¡Gracias por su compra!</p>
      <p>Powered by Solvendo</p>
    </div>
  </div>
</body>
</html>`,fe=new Blob([W],{type:"text/html"}),et=URL.createObjectURL(fe),Mn=document.createElement("a");Mn.href=et,Mn.download=`boleta_${Date.now()}.html`,Mn.style.display="none",document.body.appendChild(Mn),Mn.click(),document.body.removeChild(Mn),URL.revokeObjectURL(et);const Xd=window.open("","_blank","width=400,height=600");Xd&&(Xd.document.write(W+`
          <script>
            window.onload = function() { 
              window.print(); 
              setTimeout(function() { window.close(); }, 1000); 
            }
          <\/script>
        `),Xd.document.close())}catch(W){console.error("Error al imprimir:",W),D.error("Error al generar el documento")}c(),q(!1),V(!1),_("destacado")},Jg=()=>{B(!1),c(),_("destacado")};t.filter(W=>W.nombre.toLowerCase().includes(A.toLowerCase()));const Zg=vl.length>0;let Kr=n;xe&&F>0&&(Kr=n*(1-F/100)),Vt&&Me>0&&(Kr=Kr-Me),le==="tarjeta"&&(Kr=Math.round(Kr));const ev=le==="efectivo"?Math.max(0,se-Kr):0,b_=async W=>{if(!W.trim()){Hr(!1),de(0);return}try{const fe=v.find(et=>et.nombre.toLowerCase().includes(W.toLowerCase())&&et.activo);if(fe){let et=0;fe.tipo==="descuento_monto"?et=fe.valor||0:fe.tipo==="descuento_porcentaje"&&(et=n*((fe.valor||0)/100)),Hr(!0),de(et),D.success(`Cupón aplicado: ${fe.nombre} - $${et} de descuento`)}else Hr(!1),de(0),D.error("Cupón no válido")}catch{Hr(!1),de(0),D.error("Error al validar cupón")}},w_=W=>W.trim()?w.filter(fe=>{var et;return fe.razon_social.toLowerCase().includes(W.toLowerCase())||((et=fe.rut)==null?void 0:et.toLowerCase().includes(W.toLowerCase()))}):[],j_=W=>{if(Qg(W),!W.trim()){b(null);return}const fe=w_(W);fe.length===1?b(fe[0]):(fe.length,b(null))};return s.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[s.jsx(It,{title:"POS",userName:(e==null?void 0:e.nombre)||"Usuario",userAvatarUrl:(e==null?void 0:e.avatar_url)||void 0,showClock:!0}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex-[2] p-6 bg-white flex flex-col",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx(dt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar productos...",value:vl,onChange:W=>{h_(W.target.value),O(W.target.value.length>0)},className:"w-full pl-12 pr-4 py-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto mb-6 space-y-4",children:[r.map(W=>s.jsxs("div",{className:"flex justify-between items-center py-4 border-b last:border-b-0",children:[s.jsx("div",{className:"flex-1",children:s.jsx("h4",{className:"font-medium",children:W.nombre})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>o(W.id,Math.max(0,W.quantity-1)),className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:s.jsx(s0,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center flex-shrink-0",children:W.quantity}),s.jsx("button",{onClick:()=>o(W.id,W.quantity+1),className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:s.jsx(qt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[s.jsx("span",{className:"font-semibold",children:xt(W.precio*W.quantity)}),s.jsx("button",{onClick:()=>l(W.id),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:s.jsx(De,{className:"w-4 h-4"})})]})]},W.id)),Zg&&t.filter(W=>W.nombre.toLowerCase().includes(vl.toLowerCase())).map(W=>r.find(et=>et.id===W.id)?null:s.jsxs("div",{className:"flex justify-between items-center py-4 border-b last:border-b-0 bg-blue-50",children:[s.jsx("div",{className:"flex-1",children:s.jsx("h4",{className:"font-medium text-blue-800",children:W.nombre})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-blue-600",children:xt(W.precio)}),s.jsx("button",{onClick:()=>a(W),className:"w-8 h-8 bg-blue-600 text-white rounded flex items-center justify-center",children:s.jsx(qt,{className:"w-4 h-4"})})]})]},W.id)),r.length===0&&!Zg&&s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg",children:"Busca productos para agregarlos"}),s.jsx("p",{className:"text-sm",children:"Escribe el nombre o código del producto"})]})})]}),s.jsxs("div",{className:"border-t pt-4 flex flex-col",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center mb-4",children:[s.jsxs("span",{className:"text-gray-600 text-sm",children:["N° Líneas ",r.length," / Tot. ítems ",Math.max(0,r.reduce((W,fe)=>W+Math.max(0,fe.quantity||0),0))]}),s.jsxs("div",{className:"relative w-fit ml-auto",children:[s.jsxs("select",{value:ce,onChange:W=>P(W.target.value),className:"px-3 py-2 border rounded-lg bg-white text-sm focus:ring-2 focus:ring-blue-500 appearance-none pr-8 cursor-pointer",children:[s.jsx("option",{value:"boleta_manual",children:"Boleta manual"}),s.jsx("option",{value:"boleta",children:"Boleta electrónica"}),s.jsx("option",{value:"factura",children:"Factura electrónica"})]}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center mb-3",children:[s.jsxs("div",{className:"relative flex-grow min-w-[180px] max-w-[250px]",children:[s.jsx("input",{type:"text",placeholder:"Buscar cliente",value:m_,onChange:W=>j_(W.target.value),className:"w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg bg-white text-sm text-gray-700 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(dt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"})]}),s.jsxs("div",{className:"flex items-center justify-end",children:[s.jsx("span",{className:"text-lg font-semibold mr-2",children:"Total"}),s.jsx("div",{className:"bg-gray-100 p-2 rounded-lg text-right min-w-[100px]",children:s.jsx("span",{className:"text-xl font-bold",children:xt(n)})})]})]}),s.jsxs("div",{className:"mt-auto flex gap-2",children:[s.jsxs("button",{onClick:()=>c(),className:"flex-1 px-4 py-2 bg-gray-100 rounded flex items-center justify-center text-sm",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),"Cancelar"]}),s.jsxs("button",{onClick:()=>U(!0),className:"flex-1 px-4 py-2 bg-gray-100 rounded flex items-center justify-center text-sm",children:[s.jsx(yo,{className:"w-4 h-4 mr-1"}),"Guardar borrador"]}),s.jsxs("button",{onClick:()=>q(!0),disabled:r.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded font-semibold text-base disabled:opacity-50",children:["Pagar ",xt(n)]})]})]})]}),s.jsxs("aside",{className:`flex-1 p-6 bg-gray-50 border-l flex flex-col overflow-y-auto ${M?"hidden":""}`,children:[C==="destacado"&&s.jsx(b8,{}),C==="borradores"&&s.jsx(w8,{borradores:u,onLoad:g_,onDelete:v_}),C==="promociones"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(Ds,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Promociones"})]}),v.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay promociones disponibles"}):s.jsx("div",{className:"space-y-3",children:v.map(W=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:W.nombre}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:W.descripcion}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:W.tipo==="descuento_porcentaje"?`${W.valor}% descuento`:W.tipo==="descuento_monto"?`$${W.valor} descuento`:W.tipo}),s.jsx("button",{onClick:()=>D.info("Seleccione un producto primero"),className:"text-sm text-blue-600 hover:text-blue-800",children:"Aplicar"})]})]},W.id))})]}),C==="productos"&&s.jsx(j8,{onAddToCart:a,searchTerm:vl}),C==="clientes"&&s.jsx(S8,{onClientSelected:W=>{b(W),Qg(W?W.razon_social:"")},clientSearchTerm:""}),s.jsx("nav",{className:`flex justify-around items-center h-16 bg-white border-t mt-auto mb-4 ${M?"hidden":""}`,children:_8.map(W=>s.jsxs("button",{onClick:()=>_(W.id),className:`flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors ${C===W.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[W.icon,s.jsx("span",{className:"text-xs font-medium",children:W.label})]},W.id))})]}),M&&s.jsxs("aside",{className:"flex-1 p-6 bg-white border-l flex flex-col overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Pagar"})]}),s.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Facturación"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("select",{value:ce,onChange:W=>P(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"boleta_manual",children:"Boleta manual"}),s.jsx("option",{value:"boleta",children:"Boleta manual"}),s.jsx("option",{value:"boleta",children:"Boleta electrónica"}),s.jsx("option",{value:"factura",children:"Factura electrónica"})]})}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>In(Ze==="inmediata"?null:"inmediata"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${Ze==="inmediata"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(u8,{className:"w-4 h-4"}),s.jsx("span",{children:"Entrega inmediata"})]})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>In(Ze==="despacho"?null:"despacho"),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${Ze==="despacho"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(Ju,{className:"w-4 h-4"}),s.jsx("span",{children:"Despacho"})]})})]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("button",{onClick:()=>L(!xe),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${xe?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(Ds,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Descuentos"})]}),s.jsxs("button",{onClick:()=>f_(!Yd),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${Yd?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(qt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Agregar cupón"})]})]}),ce==="factura"&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente (requerido)"}),R?s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:R.razon_social}),s.jsxs("p",{className:"text-xs text-blue-700",children:["RUT: ",R.rut]})]}),s.jsx("button",{onClick:()=>Y(null),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Cambiar"})]})}):s.jsx("div",{className:"space-y-3",children:s.jsxs("select",{onChange:W=>{const fe=W.target.value;if(fe){const et=w.find(Mn=>Mn.id===fe);et&&Y(et)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Seleccionar cliente existente"}),w.map(W=>s.jsxs("option",{value:W.id,children:[W.razon_social," - ",W.rut]},W.id))]})})]}),xe&&s.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:[s.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:"Descuentos"}),s.jsx("div",{className:"space-y-2",children:s.jsx("input",{type:"number",placeholder:"Porcentaje de descuento",value:F||"",onChange:W=>Z(Math.min(100,Math.max(0,parseFloat(W.target.value)||0))),className:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm",min:"0",max:"100"})})]}),Yd&&s.jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded-lg",children:[s.jsx("h5",{className:"text-sm font-medium text-orange-800 mb-2",children:"Cupón de Descuento"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Código del cupón",value:ae,onChange:W=>ve(W.target.value.toUpperCase()),className:"flex-1 px-3 py-2 border border-orange-300 rounded-lg text-sm"}),s.jsx("button",{onClick:()=>b_(ae),className:"px-4 py-2 bg-orange-600 text-white rounded-lg text-sm hover:bg-orange-700",children:"Aplicar"})]}),Vt&&s.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["✓ Cupón válido: $",Me," de descuento"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Métodos de pago"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("button",{onClick:()=>ge("efectivo"),className:`flex items-center gap-2 px-4 py-3 rounded-lg ${le==="efectivo"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:[s.jsx(Br,{className:"w-5 h-5"}),s.jsx("span",{children:"Efectivo"})]}),s.jsxs("button",{onClick:()=>ge("tarjeta"),className:`flex items-center gap-2 px-4 py-3 rounded-lg ${le==="tarjeta"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:[s.jsx(i0,{className:"w-5 h-5"}),s.jsx("span",{children:"Tarjeta"})]})]}),le==="tarjeta"&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terminal POS"}),s.jsxs("select",{value:G,onChange:W=>X(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"terminal_principal",children:"Terminal Principal - SumUp"}),s.jsx("option",{value:"terminal_secundaria",children:"Terminal Secundaria - SumUp"}),s.jsx("option",{value:"terminal_movil",children:"Terminal Móvil - SumUp"})]})]}),le==="efectivo"&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto recibido"}),s.jsx("input",{type:"number",value:se||"",placeholder:"Ingrese el monto recibido",onChange:W=>{const fe=W.target.value;z(fe===""?0:Math.max(0,parseFloat(fe)||0))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0",step:"1"})]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Total a pagar"}),s.jsx("span",{className:"font-semibold",children:xt(Kr)})]}),xe&&F>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Subtotal"}),s.jsx("span",{children:xt(n)})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsxs("span",{className:"text-sm",children:["Descuento (",F,"%)"]}),s.jsxs("span",{children:["-",xt(n*(F/100))]})]})]}),Vt&&Me>0&&s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsxs("span",{className:"text-sm",children:["Cupón (",ae,")"]}),s.jsxs("span",{children:["-",xt(Me)]})]}),le==="efectivo"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Monto recibido"}),s.jsx("span",{children:xt(se)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Vuelto"}),s.jsx("span",{children:xt(ev)})]})]})]})}),s.jsx("button",{onClick:y_,disabled:Gt||r.length===0||le==="efectivo"&&se<Kr||ce==="factura"&&!R,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Gt?"Procesando...":"Confirmar pago"})]})]})]}),s.jsx(C8,{isOpen:T,draftName:I,setDraftName:ee,onClose:()=>U(!1),onSave:p_}),s.jsx(N8,{isOpen:te,onClose:Jg,onPrint:Jg,onSendEmail:()=>D.success("Enviado por email")}),K&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Boleta generada"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Enviar por correo electrónico (Opcional)"}),s.jsxs("div",{className:"flex mb-4",children:[s.jsx("input",{type:"email",placeholder:"Email",id:"emailInput",defaultValue:(R==null?void 0:R.email)||"",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>{const W=document.getElementById("emailInput"),fe=W==null?void 0:W.value;fe&&fe.includes("@")?D.success(`Documento enviado a ${fe}`):D.error("Ingrese un email válido")},className:"bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700",children:"Enviar"})]}),s.jsx("button",{onClick:x_,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700",children:"Imprimir"})]})})})]})},E8=({onClose:e})=>{const{user:t}=ze(),r=new Date().toISOString().split("T")[0],[n,a]=g.useState("Caja N°1"),[i,o]=g.useState(r),[l,c]=g.useState("retiro"),[u,d]=g.useState(""),[f,h]=g.useState(""),[m,v]=g.useState([]),[x,y]=g.useState(!1);g.useEffect(()=>{p()},[i]);const p=async()=>{y(!0);try{const{data:j}=await re.from("movimientos_caja").select("*").eq("fecha",i).order("created_at",{ascending:!1});v(j||[])}catch{}finally{y(!1)}},b=async()=>{const j=Math.max(0,Number(u)||0);if(!t||j<=0){toast.error("El monto debe ser mayor a 0");return}y(!0);try{const{data:S}=await re.from("aperturas_caja").select("id").eq("usuario_id",t.id).eq("estado","abierta").single();if(!S)throw new Error("Sin caja abierta");await re.from("movimientos_caja").insert({apertura_caja_id:S.id,usuario_id:t.id,tipo:l,monto:j,observacion:f||null,fecha:i}),d(""),h(""),p()}catch(S){console.error(S)}finally{y(!1)}},w=j=>{const[S,N,C]=j.split("-");return`${C}/${N}/${S}`};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Movimiento de efectivo",icon:s.jsx(Br,{className:"w-6 h-6 text-gray-600"}),showClock:!0}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-3/5 bg-white p-6 flex flex-col justify-between",children:[" ",s.jsxs("form",{className:"grid grid-cols-[auto,1fr] gap-x-6 gap-y-6",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Número de caja"}),s.jsxs("select",{value:n,onChange:j=>a(j.target.value),className:"h-12 px-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx("option",{children:"Caja N°1"}),s.jsx("option",{children:"Caja N°2"})]}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fecha movimiento"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"date",value:i,onChange:j=>o(j.target.value),className:"w-full h-12 pl-4 pr-2 bg-gray-50 border border-gray-200 rounded-lg"})}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo de movimiento"}),s.jsxs("select",{value:l,onChange:j=>c(j.target.value),className:"h-12 px-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx("option",{value:"retiro",children:"Retiro de efectivo"}),s.jsx("option",{value:"ingreso",children:"Ingreso de efectivo"})]}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Monto movimiento"}),s.jsx("input",{type:"number",value:u,onChange:j=>d(j.target.value),placeholder:"0",className:"h-12 px-4 bg-gray-50 border border-gray-200 rounded-lg"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Observación"}),s.jsx("textarea",{value:f,onChange:j=>h(j.target.value),placeholder:"Escribe tu observación...",className:"w-full h-32 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg resize-none"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx(De,{className:"w-4 h-4"})," Cancelar"]}),s.jsx("button",{onClick:b,disabled:x||Number(u)<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium disabled:opacity-50",children:x?"Guardando...":"Guardar"})]})]}),s.jsxs("div",{className:"w-2/5 bg-gray-50 p-6 flex flex-col overflow-auto",children:[" ",s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5 text-blue-600"})," ",s.jsx("span",{className:"text-lg font-semibold text-blue-600",children:"Movimientos disponibles"})]}),s.jsxs("div",{className:"grid grid-cols-[auto,1fr] items-center gap-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Fecha movimiento"}),s.jsx("div",{className:"bg-gray-200 p-3 rounded-lg text-sm text-gray-800",children:w(i)})]}),s.jsx("div",{className:"text-gray-700 text-sm mt-2",children:m.length===0?"Sin registros":`${m.length} registros`})]}),s.jsx("hr",{className:"border-t border-gray-200 my-6"}),s.jsx("div",{className:"space-y-3",children:m.map(j=>s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium capitalize",children:j.tipo}),s.jsxs("span",{className:"text-sm font-semibold",children:[j.tipo==="ingreso"?"+":"-","$",j.monto]})]}),j.observacion&&s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:j.observacion})]},j.id))})]})]})]})},P8=({onClose:e})=>{const t=new Date().toISOString().split("T")[0],[r,n]=g.useState(t),[a,i]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(null),[d,f]=g.useState(1),[h,m]=g.useState(!1);g.useState("");const{user:v,empresaId:x}=ze();g.useEffect(()=>{y()},[r]);const y=async()=>{m(!0),l([]);try{if(!x){const j=[{id:"v1",folio:"9",tipo:"Boleta manual (no válida al SII)",total:204,fecha:new Date().toISOString()},{id:"v2",folio:"10",tipo:"Boleta manual (no válida al SII)",total:350,fecha:new Date().toISOString()},{id:"v3",folio:"3421456",tipo:"Boleta manual (no válida al SII)",total:22e3,fecha:new Date().toISOString()},{id:"v4",folio:"3421457",tipo:"Boleta manual (no válida al SII)",total:34e3,fecha:new Date().toISOString()},{id:"v5",folio:"1001",tipo:"Factura electrónica",total:45e3,fecha:new Date().toISOString()}];l(j);return}try{const{data:j,error:S}=await re.from("ventas").select("id,folio,tipo_dte,total,fecha").eq("empresa_id",x).eq("fecha::date",r).order("fecha",{ascending:!1});if(S)throw S;if(j&&j.length>0)l(j.map(N=>({id:N.id,folio:N.folio,tipo:N.tipo_dte==="boleta"?"Boleta manual (no válida al SII)":"Documento electrónico",total:N.total,fecha:N.fecha||new Date().toISOString()})));else{const N=[{id:"v1",folio:"9",tipo:"Boleta manual (no válida al SII)",total:204,fecha:new Date().toISOString()},{id:"v2",folio:"10",tipo:"Boleta manual (no válida al SII)",total:350,fecha:new Date().toISOString()},{id:"v3",folio:"3421456",tipo:"Boleta manual (no válida al SII)",total:22e3,fecha:new Date().toISOString()},{id:"v4",folio:"3421457",tipo:"Boleta manual (no válida al SII)",total:34e3,fecha:new Date().toISOString()},{id:"v5",folio:"1001",tipo:"Factura electrónica",total:45e3,fecha:new Date().toISOString()}];l(N)}}catch(j){console.error("Error al cargar documentos:",j);const S=[{id:"v1",folio:"9",tipo:"Boleta manual (no válida al SII)",total:204,fecha:new Date().toISOString()},{id:"v2",folio:"10",tipo:"Boleta manual (no válida al SII)",total:350,fecha:new Date().toISOString()},{id:"v3",folio:"3421456",tipo:"Boleta manual (no válida al SII)",total:22e3,fecha:new Date().toISOString()},{id:"v4",folio:"3421457",tipo:"Boleta manual (no válida al SII)",total:34e3,fecha:new Date().toISOString()},{id:"v5",folio:"1001",tipo:"Factura electrónica",total:45e3,fecha:new Date().toISOString()}];l(S)}u(null),i(""),f(1)}catch(j){console.error("Error al cargar documentos:",j);const S=[{id:"v1",folio:"9",tipo:"Boleta manual (no válida al SII)",total:204,fecha:new Date().toISOString()},{id:"v2",folio:"10",tipo:"Boleta manual (no válida al SII)",total:350,fecha:new Date().toISOString()}];l(S)}finally{m(!1)}},p=()=>{if(!a.trim()){D.error("Ingrese un número de folio para buscar");return}const j=o.find(S=>S.folio.includes(a));j?(u(j),D.success("Documento encontrado")):D.error("No se encontró el documento")},b=j=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(j),w=()=>{if(!c){D.error("Debe seleccionar un documento para imprimir");return}try{const j=`
        <div style="font-family: 'Courier New', monospace; width: 80mm; margin: 0 auto; padding: 20px;">
          <div style="text-align: center; border-bottom: 1px dashed #000; padding-bottom: 15px; margin-bottom: 15px;">
            <div style="font-size: 16px; font-weight: bold;">ANROLTEC SPA</div>
            <div style="font-size: 10px;">RUT: 78.168.951-3</div>
            <div style="font-size: 10px;">Av. Providencia 1234, Santiago</div>
          </div>
          
          <div style="text-align: center; font-weight: bold; margin: 10px 0;">
            ${c.tipo.toUpperCase()}
          </div>
          <div style="font-size: 10px;">Folio: ${c.folio}</div>
          <div style="font-size: 10px;">Total: ${b(c.total)}</div>
          <div style="font-size: 10px;">Fecha: ${new Date().toLocaleDateString("es-CL")}</div>
          
          <div style="text-align: center; margin-top: 20px; border-top: 1px dashed #000; padding-top: 10px;">
            <div style="font-size: 9px;">Documento reimpreso</div>
            <div style="font-size: 9px;">Copias: ${d}</div>
          </div>
        </div>
      `,S=document.createElement("div");S.innerHTML=j,S.style.display="none",document.body.appendChild(S);const N=document.body.innerHTML;document.body.innerHTML=j,window.print(),document.body.innerHTML=N,document.body.contains(S)&&document.body.removeChild(S),u(null),i("")}catch(j){console.error("Error en impresión:",j),D.error("Error al imprimir documento")}D.success(`Imprimiendo ${d} ${d===1?"copia":"copias"}`)};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Reimprimir",icon:s.jsx(cm,{className:"w-6 h-6 text-gray-600"}),showClock:!0,userName:(v==null?void 0:v.nombre)||"Usuario",userAvatarUrl:(v==null?void 0:v.avatar_url)||void 0}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx("div",{className:"w-3/5 bg-white p-10 flex items-center justify-center",children:c?s.jsxs("div",{className:"p-4 rounded-lg bg-gray-100 text-gray-700 w-full max-w-lg",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Detalle del documento seleccionado:"}),s.jsxs("p",{children:["Tipo: ",c.tipo]}),s.jsxs("p",{children:["Folio: ",c.folio]}),s.jsxs("p",{children:["Total: ",b(c.total)]}),s.jsxs("p",{children:["Fecha: ",new Date(c.fecha).toLocaleDateString()]})]}):s.jsx("p",{className:"text-gray-400 italic text-lg text-center",children:"Debe seleccionar el documento a reimprimir"})}),s.jsxs("aside",{className:"w-2/5 bg-gray-100 py-10 pl-6 pr-10 overflow-auto space-y-8",children:[s.jsxs("div",{className:"rounded-2xl p-8 bg-gray-100",children:[s.jsxs("h4",{className:"text-base font-semibold text-blue-600 mb-6 flex items-center",children:[s.jsx(yo,{className:"w-5 h-5 mr-2 text-blue-600"}),"Documentos disponibles"]}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("label",{className:"w-36 text-sm text-gray-700",children:"Fecha movimiento"}),s.jsx("div",{className:"relative flex-1",children:s.jsx("input",{type:"date",value:r,onChange:j=>n(j.target.value),className:"w-full h-12 px-4 bg-gray-200 border border-gray-300 rounded-lg"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-600 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Ingresa aquí el número de documento",value:a,onChange:j=>i(j.target.value),onKeyDown:j=>j.key==="Enter"&&p(),className:"w-full h-12 pl-12 pr-4 bg-gray-200 border border-gray-300 rounded-lg"})]})]}),c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`p-6 rounded-2xl flex justify-between items-center bg-gray-200 
                ${c.tipo==="Boleta manual (no válida al SII)"?"border-b border-gray-200 pb-6":""}`,children:[s.jsxs("div",{children:[s.jsxs("h5",{className:"font-semibold text-gray-900",children:[c.tipo," N°",c.folio]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b(c.total)})]}),s.jsx(cm,{className:"w-6 h-6 text-gray-600 cursor-pointer",onClick:w})]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-200",children:[s.jsx("button",{onClick:()=>f(j=>Math.max(1,j-1)),className:"w-6 h-6 flex items-center justify-center hover:bg-gray-300 rounded-full",children:"−"}),s.jsx("span",{className:"w-8 text-center font-medium",children:d}),s.jsx("button",{onClick:()=>f(j=>Math.min(10,j+1)),className:"w-6 h-6 flex items-center justify-center hover:bg-gray-300 rounded-full",children:"+"}),s.jsx("span",{className:"text-sm text-gray-600 ml-3",children:"Copias"})]}),s.jsx("button",{onClick:()=>{u(null),i("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Volver"}),s.jsx("button",{onClick:w,className:"flex-1 h-12 bg-blue-600 text-white rounded-2xl font-semibold hover:bg-blue-700 transition",children:"Reimprimir"})]})]}):s.jsx("div",{className:"space-y-3",children:o.map(j=>s.jsx("div",{onClick:()=>u(j),className:"p-4 rounded-2xl flex justify-between items-center cursor-pointer bg-gray-50",children:s.jsxs("div",{children:[s.jsxs("span",{className:"text-sm font-medium",children:[j.tipo," N°",j.folio]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b(j.total)})]})},j.id))})]})]})]})};function _j(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_j(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function je(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_j(e))&&(n&&(n+=" "),n+=t);return n}var Zu={},kj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(kj);var d0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(d0);var f0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(f0);var ed={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const u=r[i];l?u==="\\"&&i+1<a?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(ed);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kj,r=d0,n=f0,a=ed;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Zu);var O8=Zu.get;const ti=_n(O8);var Ej={exports:{}},Ne={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=Symbol.for("react.transitional.element"),m0=Symbol.for("react.portal"),td=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),nd=Symbol.for("react.profiler"),ad=Symbol.for("react.consumer"),id=Symbol.for("react.context"),od=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),cd=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),T8=Symbol.for("react.view_transition"),A8=Symbol.for("react.client.reference");function kr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case h0:switch(e=e.type,e){case td:case nd:case rd:case sd:case ld:case T8:return e;default:switch(e=e&&e.$$typeof,e){case id:case od:case ud:case cd:return e;case ad:return e;default:return t}}case m0:return t}}}Ne.ContextConsumer=ad;Ne.ContextProvider=id;Ne.Element=h0;Ne.ForwardRef=od;Ne.Fragment=td;Ne.Lazy=ud;Ne.Memo=cd;Ne.Portal=m0;Ne.Profiler=nd;Ne.StrictMode=rd;Ne.Suspense=sd;Ne.SuspenseList=ld;Ne.isContextConsumer=function(e){return kr(e)===ad};Ne.isContextProvider=function(e){return kr(e)===id};Ne.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===h0};Ne.isForwardRef=function(e){return kr(e)===od};Ne.isFragment=function(e){return kr(e)===td};Ne.isLazy=function(e){return kr(e)===ud};Ne.isMemo=function(e){return kr(e)===cd};Ne.isPortal=function(e){return kr(e)===m0};Ne.isProfiler=function(e){return kr(e)===nd};Ne.isStrictMode=function(e){return kr(e)===rd};Ne.isSuspense=function(e){return kr(e)===sd};Ne.isSuspenseList=function(e){return kr(e)===ld};Ne.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===td||e===nd||e===rd||e===sd||e===ld||typeof e=="object"&&e!==null&&(e.$$typeof===ud||e.$$typeof===cd||e.$$typeof===id||e.$$typeof===ad||e.$$typeof===od||e.$$typeof===A8||e.getModuleId!==void 0)};Ne.typeOf=kr;Ej.exports=Ne;var D8=Ej.exports,yr=e=>e===0?0:e>0?1:-1,Nr=e=>typeof e=="number"&&e!=+e,La=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ne=e=>(typeof e=="number"||e instanceof Number)&&!Nr(e),en=e=>ne(e)||typeof e=="string",I8=0,Is=e=>{var t=++I8;return"".concat(e||"").concat(t)},fa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(t)&&typeof t!="string")return n;var i;if(La(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Nr(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},Pj=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Mo=(e,t)=>ne(e)&&ne(t)?r=>e+r*(t-e):()=>t;function Oj(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):ti(n,t))===r)}var We=e=>e===null||typeof e>"u",al=e=>We(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),M8=["viewBox","children"],$8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Uy=["points","pathLength"],If={svg:M8,polygon:Uy,polyline:Uy},p0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],g0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{p0.includes(a)&&(n[a]=i=>r[a](r,i))}),n},L8=(e,t,r)=>n=>(e(t,r,n),null),Tj=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];p0.includes(a)&&typeof i=="function"&&(n||(n={}),n[a]=L8(i,t,r))}),n},By=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Wy=null,Mf=null,Aj=e=>{if(e===Wy&&Array.isArray(Mf))return Mf;var t=[];return g.Children.forEach(e,r=>{We(r)||(D8.isFragment(r)?t=t.concat(Aj(r.props.children)):t.push(r))}),Mf=t,Wy=e,t};function Dj(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>By(a)):n=[By(t)],Aj(e).forEach(a=>{var i=ti(a,"type.displayName")||ti(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var Ij=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,R8=(e,t,r,n)=>{var a,i=(a=n&&(If==null?void 0:If[n]))!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||$8.includes(t))||r&&p0.includes(t)},Ee=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var o;R8((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(a[i]=n[i])}),a},z8=["children","width","height","viewBox","className","style","title","desc"];function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function F8(e,t){if(e==null)return{};var r,n,a=U8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var v0=g.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=F8(e,z8),f=i||{width:n,height:a,x:0,y:0},h=je("recharts-surface",o);return g.createElement("svg",um({},Ee(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),g.createElement("title",null,c),g.createElement("desc",null,u),r)}),B8=["children","className"];function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(null,arguments)}function W8(e,t){if(e==null)return{};var r,n,a=q8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ha=g.forwardRef((e,t)=>{var{children:r,className:n}=e,a=W8(e,B8),i=je("recharts-layer",n);return g.createElement("g",dm({className:i},Ee(a,!0),{ref:t}),r)}),Mj=g.createContext(null),H8=()=>g.useContext(Mj);function _e(e){return function(){return e}}const $j=Math.cos,Hc=Math.sin,qr=Math.sqrt,Kc=Math.PI,dd=2*Kc,fm=Math.PI,hm=2*fm,Ea=1e-6,K8=hm-Ea;function Lj(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function V8(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Lj;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class G8{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Lj:V8(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ea)if(!(Math.abs(f*c-u*d)>Ea)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,v=a-l,x=c*c+u*u,y=m*m+v*v,p=Math.sqrt(x),b=Math.sqrt(h),w=i*Math.tan((fm-Math.acos((x+h-y)/(2*p*b)))/2),j=w/b,S=w/p;Math.abs(j-1)>Ea&&this._append`L${t+j*d},${r+j*f}`,this._append`A${i},${i},0,0,${+(f*m>d*v)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ea||Math.abs(this._y1-d)>Ea)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%hm+hm),h>K8?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ea&&this._append`A${n},${n},0,${+(h>=fm)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function y0(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new G8(t)}function x0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rj(e){this._context=e}Rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fd(e){return new Rj(e)}function zj(e){return e[0]}function Fj(e){return e[1]}function Uj(e,t){var r=_e(!0),n=null,a=fd,i=null,o=y0(l);e=typeof e=="function"?e:e===void 0?zj:_e(e),t=typeof t=="function"?t:t===void 0?Fj:_e(t);function l(c){var u,d=(c=x0(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:_e(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:_e(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:_e(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Wl(e,t,r){var n=null,a=_e(!0),i=null,o=fd,l=null,c=y0(u);e=typeof e=="function"?e:e===void 0?zj:_e(+e),t=typeof t=="function"?t:_e(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Fj:_e(+r);function u(f){var h,m,v,x=(f=x0(f)).length,y,p=!1,b,w=new Array(x),j=new Array(x);for(i==null&&(l=o(b=c())),h=0;h<=x;++h){if(!(h<x&&a(y=f[h],h,f))===p)if(p=!p)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=m;--v)l.point(w[v],j[v]);l.lineEnd(),l.areaEnd()}p&&(w[h]=+e(y,h,f),j[h]=+t(y,h,f),l.point(n?+n(y,h,f):w[h],r?+r(y,h,f):j[h]))}if(b)return l=null,b+""||null}function d(){return Uj().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:_e(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_e(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_e(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:_e(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_e(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_e(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:_e(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class Bj{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Y8(e){return new Bj(e,!0)}function X8(e){return new Bj(e,!1)}const b0={draw(e,t){const r=qr(t/Kc);e.moveTo(r,0),e.arc(0,0,r,0,dd)}},Q8={draw(e,t){const r=qr(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Wj=qr(1/3),J8=Wj*2,Z8={draw(e,t){const r=qr(t/J8),n=r*Wj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},eO={draw(e,t){const r=qr(t),n=-r/2;e.rect(n,n,r,r)}},tO=.8908130915292852,qj=Hc(Kc/10)/Hc(7*Kc/10),rO=Hc(dd/10)*qj,nO=-$j(dd/10)*qj,aO={draw(e,t){const r=qr(t*tO),n=rO*r,a=nO*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=dd*i/5,l=$j(o),c=Hc(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},$f=qr(3),iO={draw(e,t){const r=-qr(t/($f*3));e.moveTo(0,r*2),e.lineTo(-$f*r,-r),e.lineTo($f*r,-r),e.closePath()}},ur=-.5,dr=qr(3)/2,mm=1/qr(12),oO=(mm/2+1)*3,sO={draw(e,t){const r=qr(t/oO),n=r/2,a=r*mm,i=n,o=r*mm+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ur*n-dr*a,dr*n+ur*a),e.lineTo(ur*i-dr*o,dr*i+ur*o),e.lineTo(ur*l-dr*c,dr*l+ur*c),e.lineTo(ur*n+dr*a,ur*a-dr*n),e.lineTo(ur*i+dr*o,ur*o-dr*i),e.lineTo(ur*l+dr*c,ur*c-dr*l),e.closePath()}};function lO(e,t){let r=null,n=y0(a);e=typeof e=="function"?e:_e(e||b0),t=typeof t=="function"?t:_e(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:_e(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:_e(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Vc(){}function Gc(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Hj(e){this._context=e}Hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gc(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cO(e){return new Hj(e)}function Kj(e){this._context=e}Kj.prototype={areaStart:Vc,areaEnd:Vc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gc(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uO(e){return new Kj(e)}function Vj(e){this._context=e}Vj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gc(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dO(e){return new Vj(e)}function Gj(e){this._context=e}Gj.prototype={areaStart:Vc,areaEnd:Vc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function fO(e){return new Gj(e)}function qy(e){return e<0?-1:1}function Hy(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(qy(i)+qy(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Ky(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Lf(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Yc(e){this._context=e}Yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lf(this,this._t0,Ky(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lf(this,Ky(this,r=Hy(this,e,t)),r);break;default:Lf(this,this._t0,r=Hy(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Yj(e){this._context=new Xj(e)}(Yj.prototype=Object.create(Yc.prototype)).point=function(e,t){Yc.prototype.point.call(this,t,e)};function Xj(e){this._context=e}Xj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function hO(e){return new Yc(e)}function mO(e){return new Yj(e)}function Qj(e){this._context=e}Qj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Vy(e),a=Vy(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Vy(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function pO(e){return new Qj(e)}function hd(e,t){this._context=e,this._t=t}hd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function gO(e){return new hd(e,.5)}function vO(e){return new hd(e,0)}function yO(e){return new hd(e,1)}function ro(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pm(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function xO(e,t){return e[t]}function bO(e){const t=[];return t.key=e,t}function wO(){var e=_e([]),t=pm,r=ro,n=xO;function a(i){var o=Array.from(e.apply(this,arguments),bO),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=x0(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:_e(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:_e(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?pm:typeof i=="function"?i:_e(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??ro,a):r},a}function jO(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}ro(e,t)}}function SO(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ro(e,t)}}function NO(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,v=0;v<l;++v){var x=e[t[v]],y=x[n][1]||0,p=x[n-1][1]||0;m+=y-p}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,ro(e,t)}}var CO=["type","size","sizeType"];function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gm.apply(null,arguments)}function Gy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gy(Object(r),!0).forEach(function(n){_O(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gy(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _O(e,t,r){return(t=kO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kO(e){var t=EO(e,"string");return typeof t=="symbol"?t:t+""}function EO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PO(e,t){if(e==null)return{};var r,n,a=OO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OO(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Jj={symbolCircle:b0,symbolCross:Q8,symbolDiamond:Z8,symbolSquare:eO,symbolStar:aO,symbolTriangle:iO,symbolWye:sO},TO=Math.PI/180,AO=e=>{var t="symbol".concat(al(e));return Jj[t]||b0},DO=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*TO;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},IO=(e,t)=>{Jj["symbol".concat(al(e))]=t},Zj=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=PO(e,CO),i=Yy(Yy({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=AO(t),h=lO().type(f).size(DO(r,n,t));return h()},{className:l,cx:c,cy:u}=i,d=Ee(i,!0);return c===+c&&u===+u&&r===+r?g.createElement("path",gm({},d,{className:je("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};Zj.registerSymbol=IO;function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vm.apply(null,arguments)}function Xy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xy(Object(r),!0).forEach(function(n){w0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xy(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w0(e,t,r){return(t=$O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $O(e){var t=LO(e,"string");return typeof t=="symbol"?t:t+""}function LO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fr=32;class j0 extends g.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=fr/2,i=fr/6,o=fr/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return g.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:fr,y2:a,className:"recharts-legend-icon"});if(c==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(fr,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return g.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(fr/8,"h").concat(fr,"v").concat(fr*3/4,"h").concat(-fr,"z"),className:"recharts-legend-icon"});if(g.isValidElement(t.legendIcon)){var u=MO({},t);return delete u.legendIcon,g.cloneElement(t.legendIcon,u)}return g.createElement(Zj,{fill:l,cx:a,cy:a,size:fr,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:fr,height:fr},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=je({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var v=d.inactive?i:d.color,x=h?h(d.value,d,f):d.value;return g.createElement("li",vm({className:m,style:c,key:"legend-item-".concat(f)},Tj(this.props,d,f)),g.createElement(v0,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),g.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}w0(j0,"displayName","Legend");w0(j0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var eS={},tS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(tS);var S0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(S0);var rS={},md={},nS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(nS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nS;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(md);var aS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(aS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=md,r=aS;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(rS);var iS={},oS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zu;function r(n){return function(a){return t.get(a,n)}}e.property=r})(oS);var sS={},Rf={},zf={},N0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(N0);var C0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(C0);var pd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(pd);var Qy;function RO(){return Qy||(Qy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_0(),r=N0,n=C0,a=pd;function i(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function v(x,y,p,b,w,j){const S=m(x,y,p,b,w,j);return S!==void 0?!!S:o(x,y,v,j)},new Map)}function o(f,h,m,v){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,v);case"function":return Object.keys(h).length>0?o(f,{...h},m,v):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,v){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,v);if(h instanceof Map)return c(f,h,m,v);if(h instanceof Set)return d(f,h,m,v);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(v&&v.has(h))return v.get(h)===f;v&&v.set(h,f);try{for(let y=0;y<x.length;y++){const p=x[y];if(!n.isPrimitive(f)&&!(p in f)||h[p]===void 0&&f[p]!==void 0||h[p]===null&&f[p]!==null||!m(f[p],h[p],p,f,h,v))return!1}return!0}finally{v&&v.delete(h)}}function c(f,h,m,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,y]of h.entries()){const p=f.get(x);if(m(p,y,x,f,h,v)===!1)return!1}return!0}function u(f,h,m,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let y=0;y<h.length;y++){const p=h[y];let b=!1;for(let w=0;w<f.length;w++){if(x.has(w))continue;const j=f[w];let S=!1;if(m(j,p,y,f,h,v)&&(S=!0),S){x.add(w),b=!0;break}}if(!b)return!1}return!0}function d(f,h,m,v){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,v):!1}e.isMatchWith=i,e.isSetMatch=d}(zf)),zf}var Jy;function _0(){return Jy||(Jy=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RO();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(Rf)),Rf}var lS={},k0={},E0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(E0);var gd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(gd);var vd={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",v="[object Error]",x="[object DataView]",y="[object Uint8Array]",p="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",S="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",_="[object BigInt64Array]",A="[object Float32Array]",k="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=A,e.float64ArrayTag=k,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=C,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=p})(vd);var cS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(cS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E0,r=gd,n=vd,a=C0,i=cS;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,v=void 0){const x=v==null?void 0:v(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const y=new Array(d.length);m.set(d,y);for(let p=0;p<d.length;p++)y[p]=l(d[p],p,h,m,v);return Object.hasOwn(d,"index")&&(y.index=d.index),Object.hasOwn(d,"input")&&(y.input=d.input),y}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const y=new RegExp(d.source,d.flags);return y.lastIndex=d.lastIndex,y}if(d instanceof Map){const y=new Map;m.set(d,y);for(const[p,b]of d)y.set(p,l(b,p,h,m,v));return y}if(d instanceof Set){const y=new Set;m.set(d,y);for(const p of d)y.add(l(p,void 0,h,m,v));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const y=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,y);for(let p=0;p<d.length;p++)y[p]=l(d[p],p,h,m,v);return y}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const y=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,y),c(y,d,h,m,v),y}if(typeof File<"u"&&d instanceof File){const y=new File([d],d.name,{type:d.type});return m.set(d,y),c(y,d,h,m,v),y}if(d instanceof Blob){const y=new Blob([d],{type:d.type});return m.set(d,y),c(y,d,h,m,v),y}if(d instanceof Error){const y=new d.constructor;return m.set(d,y),y.message=d.message,y.name=d.name,y.stack=d.stack,y.cause=d.cause,c(y,d,h,m,v),y}if(typeof d=="object"&&u(d)){const y=Object.create(Object.getPrototypeOf(d));return m.set(d,y),c(y,d,h,m,v),y}return d}function c(d,f,h=d,m,v){const x=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<x.length;y++){const p=x[y],b=Object.getOwnPropertyDescriptor(d,p);(b==null||b.writable)&&(d[p]=l(f[p],p,h,m,v))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(k0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k0;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(lS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_0(),r=lS;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(sS);var uS={},dS={},fS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k0,r=vd;function n(a,i){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(fS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fS;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(dS);var hS={},P0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(P0);var mS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gd;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(mS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d0,r=P0,n=mS,a=ed;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(hS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_0(),r=f0,n=dS,a=Zu,i=hS;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(uS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S0,r=oS,n=sS,a=uS;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(iS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tS,r=S0,n=rS,a=iS;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=i})(eS);var zO=eS.uniqBy;const Zy=_n(zO);function pS(e,t,r){return t===!0?Zy(e,r):typeof t=="function"?Zy(e,t):e}var gS={exports:{}},vS={},yS={exports:{}},xS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=g;function FO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var UO=typeof Object.is=="function"?Object.is:FO,BO=no.useState,WO=no.useEffect,qO=no.useLayoutEffect,HO=no.useDebugValue;function KO(e,t){var r=t(),n=BO({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return qO(function(){a.value=r,a.getSnapshot=t,Ff(a)&&i({inst:a})},[e,r,t]),WO(function(){return Ff(a)&&i({inst:a}),e(function(){Ff(a)&&i({inst:a})})},[e]),HO(r),r}function Ff(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!UO(e,r)}catch{return!0}}function VO(e,t){return t()}var GO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VO:KO;xS.useSyncExternalStore=no.useSyncExternalStore!==void 0?no.useSyncExternalStore:GO;yS.exports=xS;var YO=yS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=g,XO=YO;function QO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var JO=typeof Object.is=="function"?Object.is:QO,ZO=XO.useSyncExternalStore,e7=yd.useRef,t7=yd.useEffect,r7=yd.useMemo,n7=yd.useDebugValue;vS.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=e7(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=r7(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&o.hasValue){var v=o.value;if(a(v,m))return f=v}return f=m}if(v=f,JO(d,m))return v;var x=n(m);return a!==void 0&&a(v,x)?(d=m,v):(d=m,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=ZO(e,i[0],i[1]);return t7(function(){o.hasValue=!0,o.value=l},[l]),n7(l),l};gS.exports=vS;var a7=gS.exports,O0=g.createContext(null),i7=e=>e,pt=()=>{var e=g.useContext(O0);return e?e.store.dispatch:i7},pc=()=>{},o7=()=>pc,s7=(e,t)=>e===t;function ie(e){var t=g.useContext(O0);return a7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:o7,t?t.store.getState:pc,t?t.store.getState:pc,t?e:pc,s7)}function l7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function c7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function u7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var ex=e=>Array.isArray(e)?e:[e];function d7(e){const t=Array.isArray(e[0])?e[0]:e;return u7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function f7(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var h7=class{constructor(e){this.value=e}deref(){return this.value}},m7=typeof WeakRef<"u"?WeakRef:h7,p7=0,tx=1;function ql(){return{s:p7,v:void 0,o:null,p:null}}function bS(e,t={}){let r=ql();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const y=x.get(v);y===void 0?(l=ql(),x.set(v,l)):l=y}else{let x=l.p;x===null&&(l.p=x=new Map);const y=x.get(v);y===void 0?(l=ql(),x.set(v,l)):l=y}}const u=l;let d;if(l.s===tx)d=l.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new m7(d):d}return u.s=tx,u.v=d,d}return o.clearCache=()=>{r=ql(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function g7(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),l7(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=bS,argsMemoizeOptions:v=[],devModeChecks:x={}}=d,y=ex(h),p=ex(v),b=d7(a),w=f(function(){return i++,u.apply(null,arguments)},...y),j=m(function(){o++;const N=f7(b,arguments);return l=w.apply(null,N),l},...p);return Object.assign(j,{resultFunc:u,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var $=g7(bS),v7=Object.assign((e,t=$)=>{c7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>v7}),wS={},jS={},SS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(SS);var NS={},T0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(T0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T0,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(NS);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SS,r=NS,n=ed;function a(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,v)=>{let x=m;for(let y=0;y<v.length&&x!=null;++y)x=x[v[y]];return x},d=(m,v)=>v==null||m==null?v:typeof m=="object"&&"key"in m?Object.hasOwn(v,m.key)?v[m.key]:u(v,m.path):typeof m=="function"?m(v):Array.isArray(m)?u(v,m):typeof v=="object"?v[m]:v,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(v=>d(v,m))})).slice().sort((m,v)=>{for(let x=0;x<f.length;x++){const y=t.compareValues(m.criteria[x],v.criteria[x],l[x]);if(y!==0)return y}return 0}).map(m=>m.original)}e.orderBy=a})(jS);var CS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t})(CS);var A0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P0,r=md,n=N0,a=pd;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=i})(A0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jS,r=CS,n=A0;function a(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(wS);var y7=wS.sortBy;const xd=_n(y7);var _S=e=>e.legend.settings,x7=e=>e.legend.size,b7=e=>e.legend.payload,w7=$([b7,_S],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?xd(n,r):n});function j7(){return ie(w7)}var Hl=1;function kS(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Hl||Math.abs(o.left-t.left)>Hl||Math.abs(o.top-t.top)>Hl||Math.abs(o.width-t.width)>Hl)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function lt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var S7=typeof Symbol=="function"&&Symbol.observable||"@@observable",rx=S7,Uf=()=>Math.random().toString(36).substring(7).split("").join("."),N7={INIT:`@@redux/INIT${Uf()}`,REPLACE:`@@redux/REPLACE${Uf()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Uf()}`},Xc=N7;function D0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ES(e,t,r){if(typeof e!="function")throw new Error(lt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lt(1));return r(ES)(e,t)}let n=e,a=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,p)=>{o.set(p,y)}))}function d(){if(c)throw new Error(lt(3));return a}function f(y){if(typeof y!="function")throw new Error(lt(4));if(c)throw new Error(lt(5));let p=!0;u();const b=l++;return o.set(b,y),function(){if(p){if(c)throw new Error(lt(6));p=!1,u(),o.delete(b),i=null}}}function h(y){if(!D0(y))throw new Error(lt(7));if(typeof y.type>"u")throw new Error(lt(8));if(typeof y.type!="string")throw new Error(lt(17));if(c)throw new Error(lt(9));try{c=!0,a=n(a,y)}finally{c=!1}return(i=o).forEach(b=>{b()}),y}function m(y){if(typeof y!="function")throw new Error(lt(10));n=y,h({type:Xc.REPLACE})}function v(){const y=f;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(lt(11));function b(){const j=p;j.next&&j.next(d())}return b(),{unsubscribe:y(b)}},[rx](){return this}}}return h({type:Xc.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[rx]:v}}function C7(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Xc.INIT})>"u")throw new Error(lt(12));if(typeof r(void 0,{type:Xc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lt(13))})}function PS(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{C7(r)}catch(i){a=i}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=o[f],v=h(m,l);if(typeof v>"u")throw l&&l.type,new Error(lt(14));u[f]=v,c=c||v!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Qc(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function _7(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(lt(15))};const o={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=Qc(...l)(a.dispatch),{...a,dispatch:i}}}function OS(e){return D0(e)&&"type"in e&&typeof e.type=="string"}var TS=Symbol.for("immer-nothing"),nx=Symbol.for("immer-draftable"),or=Symbol.for("immer-state");function Lr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ao=Object.getPrototypeOf;function ri(e){return!!e&&!!e[or]}function jn(e){var t;return e?AS(e)||Array.isArray(e)||!!e[nx]||!!((t=e.constructor)!=null&&t[nx])||wd(e)||jd(e):!1}var k7=Object.prototype.constructor.toString();function AS(e){if(!e||typeof e!="object")return!1;const t=ao(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===k7}function Jc(e,t){bd(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function bd(e){const t=e[or];return t?t.type_:Array.isArray(e)?1:wd(e)?2:jd(e)?3:0}function ym(e,t){return bd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DS(e,t,r){const n=bd(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function E7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wd(e){return e instanceof Map}function jd(e){return e instanceof Set}function Pa(e){return e.copy_||e.base_}function xm(e,t){if(wd(e))return new Map(e);if(jd(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=AS(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[or];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ao(e),n)}else{const n=ao(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function I0(e,t=!1){return Sd(e)||ri(e)||!jn(e)||(bd(e)>1&&(e.set=e.add=e.clear=e.delete=P7),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>I0(n,!0))),e}function P7(){Lr(2)}function Sd(e){return Object.isFrozen(e)}var O7={};function ni(e){const t=O7[e];return t||Lr(0,e),t}var Ms;function IS(){return Ms}function T7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ax(e,t){t&&(ni("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function bm(e){wm(e),e.drafts_.forEach(A7),e.drafts_=null}function wm(e){e===Ms&&(Ms=e.parent_)}function ix(e){return Ms=T7(Ms,e)}function A7(e){const t=e[or];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ox(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[or].modified_&&(bm(t),Lr(4)),jn(e)&&(e=Zc(t,e),t.parent_||eu(t,e)),t.patches_&&ni("Patches").generateReplacementPatches_(r[or].base_,e,t.patches_,t.inversePatches_)):e=Zc(t,r,[]),bm(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==TS?e:void 0}function Zc(e,t,r){if(Sd(t))return t;const n=t[or];if(!n)return Jc(t,(a,i)=>sx(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return eu(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),Jc(i,(l,c)=>sx(e,n,a,l,c,r,o)),eu(e,a,!1),r&&e.patches_&&ni("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function sx(e,t,r,n,a,i,o){if(ri(a)){const l=i&&t&&t.type_!==3&&!ym(t.assigned_,n)?i.concat(n):void 0,c=Zc(e,a,l);if(DS(r,n,c),ri(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(jn(a)&&!Sd(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Zc(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&eu(e,a)}}function eu(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&I0(t,r)}function D7(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:IS(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=M0;r&&(a=[n],i=$s);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,l}var M0={get(e,t){if(t===or)return e;const r=Pa(e);if(!ym(r,t))return I7(e,r,t);const n=r[t];return e.finalized_||!jn(n)?n:n===Bf(e.base_,t)?(Wf(e),e.copy_[t]=Sm(n,e)):n},has(e,t){return t in Pa(e)},ownKeys(e){return Reflect.ownKeys(Pa(e))},set(e,t,r){const n=MS(Pa(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Bf(Pa(e),t),i=a==null?void 0:a[or];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(E7(r,a)&&(r!==void 0||ym(e.base_,t)))return!0;Wf(e),jm(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Bf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Wf(e),jm(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Pa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Lr(11)},getPrototypeOf(e){return ao(e.base_)},setPrototypeOf(){Lr(12)}},$s={};Jc(M0,(e,t)=>{$s[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$s.deleteProperty=function(e,t){return $s.set.call(this,e,t,void 0)};$s.set=function(e,t,r){return M0.set.call(this,e[0],t,r,e[0])};function Bf(e,t){const r=e[or];return(r?Pa(r):e)[t]}function I7(e,t,r){var a;const n=MS(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function MS(e,t){if(!(t in e))return;let r=ao(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ao(r)}}function jm(e){e.modified_||(e.modified_=!0,e.parent_&&jm(e.parent_))}function Wf(e){e.copy_||(e.copy_=xm(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var M7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Lr(6),n!==void 0&&typeof n!="function"&&Lr(7);let a;if(jn(t)){const i=ix(this),o=Sm(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?bm(i):wm(i)}return ax(i,n),ox(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===TS&&(a=void 0),this.autoFreeze_&&I0(a,!0),n){const i=[],o=[];ni("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else Lr(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jn(e)||Lr(8),ri(e)&&(e=pn(e));const t=ix(this),r=Sm(e,void 0);return r[or].isManual_=!0,wm(t),r}finishDraft(e,t){const r=e&&e[or];(!r||!r.isManual_)&&Lr(9);const{scope_:n}=r;return ax(n,t),ox(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=ni("Patches").applyPatches_;return ri(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Sm(e,t){const r=wd(e)?ni("MapSet").proxyMap_(e,t):jd(e)?ni("MapSet").proxySet_(e,t):D7(e,t);return(t?t.scope_:IS()).drafts_.push(r),r}function pn(e){return ri(e)||Lr(10,e),$S(e)}function $S(e){if(!jn(e)||Sd(e))return e;const t=e[or];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=xm(e,t.scope_.immer_.useStrictShallowCopy_)}else r=xm(e,!0);return Jc(r,(n,a)=>{DS(r,n,$S(a))}),t&&(t.finalized_=!1),r}var sr=new M7,LS=sr.produce;sr.produceWithPatches.bind(sr);sr.setAutoFreeze.bind(sr);sr.setUseStrictShallowCopy.bind(sr);sr.applyPatches.bind(sr);sr.createDraft.bind(sr);sr.finishDraft.bind(sr);function RS(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var $7=RS(),L7=RS,R7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qc:Qc.apply(null,arguments)};function Cr(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(nr(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>OS(n)&&n.type===e,r}var zS=class Go extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Go.prototype)}static get[Symbol.species](){return Go}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Go(...t[0].concat(this)):new Go(...t.concat(this))}};function lx(e){return jn(e)?LS(e,()=>{}):e}function Kl(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function z7(e){return typeof e=="boolean"}var F7=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new zS;return r&&(z7(r)?o.push($7):o.push(L7(r.extraArgument))),o},U7="RTK_autoBatch",cx=e=>t=>{setTimeout(t,e)},B7=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cx(10):e.type==="callback"?e.queueNotification:cx(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[U7]),i=!a,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},W7=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new zS(e);return n&&a.push(B7(typeof n=="object"?n:void 0)),a};function q7(e){const t=F7(),{reducer:r=void 0,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(D0(r))c=PS(r);else throw new Error(nr(1));let u;typeof n=="function"?u=n(t):u=t();let d=Qc;a&&(d=R7({trace:!1,...typeof a=="object"&&a}));const f=_7(...u),h=W7(f);let m=typeof l=="function"?l(h):h();const v=d(...m);return ES(c,o,v)}function FS(e){const t={},r=[];let n;const a={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(nr(28));if(l in t)throw new Error(nr(29));return t[l]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function H7(e){return typeof e=="function"}function K7(e,t){let[r,n,a]=FS(t),i;if(H7(e))i=()=>lx(e());else{const l=lx(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(ri(d)){const m=f(d,c);return m===void 0?d:m}else{if(jn(d))return LS(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=i,o}var V7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",G7=(e=21)=>{let t="",r=e;for(;r--;)t+=V7[Math.random()*64|0];return t},Y7=Symbol.for("rtk-slice-createasyncthunk");function X7(e,t){return`${e}/${t}`}function Q7({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Y7];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(nr(11));typeof process<"u";const l=(typeof a.reducers=="function"?a.reducers(Z7()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,S){const N=typeof j=="string"?j:j.type;if(!N)throw new Error(nr(12));if(N in u.sliceCaseReducersByType)throw new Error(nr(13));return u.sliceCaseReducersByType[N]=S,d},addMatcher(j,S){return u.sliceMatchers.push({matcher:j,reducer:S}),d},exposeAction(j,S){return u.actionCreators[j]=S,d},exposeCaseReducer(j,S){return u.sliceCaseReducersByName[j]=S,d}};c.forEach(j=>{const S=l[j],N={reducerName:j,type:X7(i,j),createNotation:typeof a.reducers=="function"};tT(S)?nT(N,S,d,t):eT(N,S,d)});function f(){const[j={},S=[],N=void 0]=typeof a.extraReducers=="function"?FS(a.extraReducers):[a.extraReducers],C={...j,...u.sliceCaseReducersByType};return K7(a.initialState,_=>{for(let A in C)_.addCase(A,C[A]);for(let A of u.sliceMatchers)_.addMatcher(A.matcher,A.reducer);for(let A of S)_.addMatcher(A.matcher,A.reducer);N&&_.addDefaultCase(N)})}const h=j=>j,m=new Map,v=new WeakMap;let x;function y(j,S){return x||(x=f()),x(j,S)}function p(){return x||(x=f()),x.getInitialState()}function b(j,S=!1){function N(_){let A=_[j];return typeof A>"u"&&S&&(A=Kl(v,N,p)),A}function C(_=h){const A=Kl(m,S,()=>new WeakMap);return Kl(A,_,()=>{const k={};for(const[T,U]of Object.entries(a.selectors??{}))k[T]=J7(U,_,()=>Kl(v,_,p),S);return k})}return{reducerPath:j,getSelectors:C,get selectors(){return C(N)},selectSlice:N}}const w={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:p,...b(o),injectInto(j,{reducerPath:S,...N}={}){const C=S??o;return j.inject({reducerPath:C,reducer:y},N),{...w,...b(C,!0)}}};return w}}function J7(e,t,r,n){function a(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var Er=Q7();function Z7(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function eT({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!rT(n))throw new Error(nr(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Cr(e,o):Cr(e))}function tT(e){return e._reducerDefinitionType==="asyncThunk"}function rT(e){return e._reducerDefinitionType==="reducerWithPrepare"}function nT({type:e,reducerName:t},r,n,a){if(!a)throw new Error(nr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||Vl,pending:l||Vl,rejected:c||Vl,settled:u||Vl})}function Vl(){}var aT="task",US="listener",BS="completed",$0="cancelled",iT=`task-${$0}`,oT=`task-${BS}`,Nm=`${US}-${$0}`,sT=`${US}-${BS}`,Nd=class{constructor(e){Qd(this,"name","TaskAbortError");Qd(this,"message");this.code=e,this.message=`${aT} ${$0} (reason: ${e})`}},L0=(e,t)=>{if(typeof e!="function")throw new TypeError(nr(32))},tu=()=>{},WS=(e,t=tu)=>(e.catch(t),e),qS=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ha=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ka=e=>{if(e.aborted){const{reason:t}=e;throw new Nd(t)}};function HS(e,t){let r=tu;return new Promise((n,a)=>{const i=()=>a(new Nd(e.reason));if(e.aborted){i();return}r=qS(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=tu})}var lT=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Nd?"cancelled":"rejected",error:r}}finally{t==null||t()}},ru=e=>t=>WS(HS(e,t).then(r=>(Ka(e),r))),KS=e=>{const t=ru(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ki}=Object,ux={},Cd="listenerMiddleware",cT=(e,t)=>{const r=n=>qS(e,()=>Ha(n,e.reason));return(n,a)=>{L0(n);const i=new AbortController;r(i);const o=lT(async()=>{Ka(e),Ka(i.signal);const l=await n({pause:ru(i.signal),delay:KS(i.signal),signal:i.signal});return Ka(i.signal),l},()=>Ha(i,oT));return a!=null&&a.autoJoin&&t.push(o.catch(tu)),{result:ru(e)(o),cancel(){Ha(i,iT)}}}},uT=(e,t)=>{const r=async(n,a)=>{Ka(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await HS(t,Promise.race(l));return Ka(t),c}finally{i()}};return(n,a)=>WS(r(n,a))},VS=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Cr(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(nr(21));return L0(i),{predicate:a,type:t,effect:i}},GS=Ki(e=>{const{type:t,predicate:r,effect:n}=VS(e);return{id:G7(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(nr(22))}}},{withTypes:()=>GS}),dx=(e,t)=>{const{type:r,effect:n,predicate:a}=VS(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Cm=e=>{e.pending.forEach(t=>{Ha(t,Nm)})},dT=e=>()=>{e.forEach(Cm),e.clear()},fx=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},YS=Ki(Cr(`${Cd}/add`),{withTypes:()=>YS}),fT=Cr(`${Cd}/removeAll`),XS=Ki(Cr(`${Cd}/remove`),{withTypes:()=>XS}),hT=(...e)=>{console.error(`${Cd}/error`,...e)},il=(e={})=>{const t=new Map,{extra:r,onError:n=hT}=e;L0(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&Cm(d)}),i=d=>{const f=dx(t,d)??GS(d);return a(f)};Ki(i,{withTypes:()=>i});const o=d=>{const f=dx(t,d);return f&&(f.unsubscribe(),d.cancelActive&&Cm(f)),!!f};Ki(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const v=new AbortController,x=uT(i,v.signal),y=[];try{d.pending.add(v),await Promise.resolve(d.effect(f,Ki({},h,{getOriginalState:m,condition:(p,b)=>x(p,b).then(Boolean),take:x,delay:KS(v.signal),pause:ru(v.signal),extra:r,signal:v.signal,fork:cT(v.signal,y),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((p,b,w)=>{p!==v&&(Ha(p,Nm),w.delete(p))})},cancel:()=>{Ha(v,Nm),d.pending.delete(v)},throwIfCancelled:()=>{Ka(v.signal)}})))}catch(p){p instanceof Nd||fx(n,p,{raisedBy:"effect"})}finally{await Promise.all(y),Ha(v,sT),d.pending.delete(v)}},c=dT(t);return{middleware:d=>f=>h=>{if(!OS(h))return f(h);if(YS.match(h))return i(h.payload);if(fT.match(h)){c();return}if(XS.match(h))return o(h.payload);let m=d.getState();const v=()=>{if(m===ux)throw new Error(nr(23));return m};let x;try{if(x=f(h),t.size>0){const y=d.getState(),p=Array.from(t.values());for(const b of p){let w=!1;try{w=b.predicate(h,y,m)}catch(j){w=!1,fx(n,j,{raisedBy:"predicate"})}w&&l(b,h,d,v)}}}finally{m=ux}return x},startListening:i,stopListening:o,clearListeners:c}};function nr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mT={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},QS=Er({name:"chartLayout",initialState:mT,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:pT,setLayout:gT,setChartSize:vT,setScale:yT}=QS.actions,xT=QS.reducer;function hx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hx(Object(r),!0).forEach(function(n){bT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bT(e,t,r){return(t=wT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wT(e){var t=jT(e,"string");return typeof t=="symbol"?t:t+""}function jT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nu=Math.PI/180,ST=e=>e*180/Math.PI,ft=(e,t,r,n)=>({x:e+Math.cos(-nu*n)*r,y:t+Math.sin(-nu*n)*r}),NT=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},CT=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},_T=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=CT({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:ST(c),angleInRadian:c}},kT=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},ET=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},PT=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=_T({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=kT(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?mx(mx({},t),{},{radius:a,angle:ET(d,t)}):null};function px(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?px(Object(r),!0).forEach(function(n){OT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):px(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OT(e,t,r){return(t=TT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TT(e){var t=AT(e,"string");return typeof t=="symbol"?t:t+""}function AT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ar(e,t,r){return We(e)||We(t)?r:en(t)?ti(e,t,r):typeof t=="function"?t(e):r}var DT=(e,t,r,n,a)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(yr(d-u)!==yr(f-d)){var m=[];if(yr(f-d)===yr(a[1]-a[0])){h=f;var v=d+a[1]-a[0];m[0]=Math.min(v,(v+u)/2),m[1]=Math.max(v,(v+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var p=Math.min(u,f),b=Math.max(u,f);if(e>(p+d)/2&&e<=(b+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},IT=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ne(e[i]))return gr(gr({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ne(e[o]))return gr(gr({},e),{},{[o]:e[o]+(a||0)})}return e},xa=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",JS=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,i,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate));return a||o.push(t),i||o.push(r),o},ZS=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/v:0;if(x=m==="angleAxis"&&i&&i.length>=2?yr(i[0]-i[1])*2*x:x,f||h){var y=(f||h||[]).map((p,b)=>{var w=n?n.indexOf(p):p;return{coordinate:o(w)+x,value:p,offset:x,index:b}});return y.filter(p=>!Nr(p.coordinate))}return c&&u?u.map((p,b)=>({coordinate:o(p)+x,value:p,index:b,offset:x})):o.ticks&&!r&&d!=null?o.ticks(d).map((p,b)=>({coordinate:o(p)+x,value:p,offset:x,index:b})):o.domain().map((p,b)=>({coordinate:o(p)+x,value:n?n[p]:p,index:b,offset:x}))},gx=1e-4,MT=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-gx,i=Math.max(n[0],n[1])+gx,o=e(t[0]),l=e(t[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([t[0],t[r-1]])}},$T=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var l=Nr(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},LT=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=Nr(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},RT={sign:$T,expand:jO,none:ro,silhouette:SO,wiggle:NO,positive:LT},zT=(e,t,r)=>{var n=RT[r],a=wO().keys(t).value((i,o)=>+ar(i,o,0)).order(pm).offset(n);return a(e)};function FT(e){return e==null?void 0:String(e)}function vx(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!We(a[t.dataKey])){var l=Oj(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=ar(a,We(o)?t.dataKey:o);return We(c)?null:t.scale(c)}var UT=e=>{var t=e.flat(2).filter(ne);return[Math.min(...t),Math.max(...t)]},BT=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],WT=(e,t,r)=>{if(e!=null)return BT(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=UT(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},yx=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xx=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_m=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=xd(t,d=>d.coordinate),i=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function bx(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return gr(gr({},t),{},{dataKey:r,payload:n,value:a,name:i})}function e3(e,t){if(e)return String(e);if(typeof t=="string")return t}function qT(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?PT({x:e,y:t},n):null}var HT=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return gr(gr(gr({},n),ft(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,{angle:c}=n;return gr(gr(gr({},n),ft(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},KT=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Pn=e=>e.layout.width,On=e=>e.layout.height,VT=e=>e.layout.scale,t3=e=>e.layout.margin,R0=$(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),z0=$(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),GT="data-recharts-item-index",YT="data-recharts-item-data-key",_d=60;function wx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wx(Object(r),!0).forEach(function(n){XT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XT(e,t,r){return(t=QT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QT(e){var t=JT(e,"string");return typeof t=="symbol"?t:t+""}function JT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZT=e=>e.brush.height,gt=$([Pn,On,t3,ZT,R0,z0,_S,x7],(e,t,r,n,a,i,o,l)=>{var c=i.reduce((v,x)=>{var{orientation:y}=x;if(!x.mirror&&!x.hide){var p=typeof x.width=="number"?x.width:_d;return Ln(Ln({},v),{},{[y]:v[y]+p})}return v},{left:r.left||0,right:r.right||0}),u=a.reduce((v,x)=>{var{orientation:y}=x;return!x.mirror&&!x.hide?Ln(Ln({},v),{},{[y]:ti(v,"".concat(y))+x.height}):v},{top:r.top||0,bottom:r.bottom||0}),d=Ln(Ln({},u),c),f=d.bottom;d.bottom+=n,d=IT(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return Ln(Ln({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),eA=$(gt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),r3=$(Pn,On,(e,t)=>({x:0,y:0,width:e,height:t})),tA=g.createContext(null),Ht=()=>g.useContext(tA)!=null,kd=e=>e.brush,Ed=$([kd,gt,t3],(e,t,r)=>({height:e.height,x:ne(e.x)?e.x:t.left,y:ne(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ne(e.width)?e.width:t.width})),F0=()=>{var e,t=Ht(),r=ie(eA),n=ie(Ed),a=(e=ie(kd))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},rA={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},n3=()=>{var e;return(e=ie(gt))!==null&&e!==void 0?e:rA},U0=()=>ie(Pn),B0=()=>ie(On),nA={top:0,right:0,bottom:0,left:0},aA=()=>{var e;return(e=ie(t=>t.layout.margin))!==null&&e!==void 0?e:nA},Fe=e=>e.layout.layoutType,W0=()=>ie(Fe),iA={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},a3=Er({name:"legend",initialState:iA,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=pn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:jx,setLegendSettings:oA,addLegendPayload:sA,removeLegendPayload:lA}=a3.actions,cA=a3.reducer,uA=["contextPayload"];function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},km.apply(null,arguments)}function Sx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sx(Object(r),!0).forEach(function(n){q0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q0(e,t,r){return(t=dA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dA(e){var t=fA(e,"string");return typeof t=="symbol"?t:t+""}function fA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hA(e,t){if(e==null)return{};var r,n,a=mA(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mA(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pA(e){return e.value}function gA(e){var{contextPayload:t}=e,r=hA(e,uA),n=pS(t,e.payloadUniqBy,pA),a=io(io({},r),{},{payload:n});return g.isValidElement(e.content)?g.cloneElement(e.content,a):typeof e.content=="function"?g.createElement(e.content,a):g.createElement(j0,a)}function vA(e,t,r,n,a,i){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-i.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-i.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),io(io({},u),d)}function yA(e){var t=pt();return g.useEffect(()=>{t(oA(e))},[t,e]),null}function xA(e){var t=pt();return g.useEffect(()=>(t(jx(e)),()=>{t(jx({width:0,height:0}))}),[t,e]),null}function bA(e){var t=j7(),r=H8(),n=aA(),{width:a,height:i,wrapperStyle:o,portal:l}=e,[c,u]=kS([t]),d=U0(),f=B0(),h=d-(n.left||0)-(n.right||0),m=Pd.getWidthOrHeight(e.layout,i,a,h),v=l?o:io(io({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||i||"auto"},vA(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var y=g.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:u},g.createElement(yA,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),g.createElement(xA,{width:c.width,height:c.height}),g.createElement(gA,km({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return Qp.createPortal(y,x)}class Pd extends g.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ne(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return g.createElement(bA,this.props)}}q0(Pd,"displayName","Legend");q0(Pd,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Em.apply(null,arguments)}function Nx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nx(Object(r),!0).forEach(function(n){wA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wA(e,t,r){return(t=jA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jA(e){var t=SA(e,"string");return typeof t=="symbol"?t:t+""}function SA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NA(e){return Array.isArray(e)&&en(e[0])&&en(e[1])?e.join(" ~ "):e}var CA=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var S={padding:0,margin:0},N=(l?xd(i,l):i).map((C,_)=>{if(C.type==="none")return null;var A=C.formatter||o||NA,{value:k,name:T}=C,U=k,I=T;if(A){var ee=A(k,T,C,_,i);if(Array.isArray(ee))[U,I]=ee;else if(ee!=null)U=ee;else return null}var te=qf({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:te},en(I)?g.createElement("span",{className:"recharts-tooltip-item-name"},I):null,en(I)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},U),g.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:S},N)}return null},v=qf({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=qf({margin:0},a),y=!We(d),p=y?d:"",b=je("recharts-default-tooltip",c),w=je("recharts-tooltip-label",u);y&&f&&i!==void 0&&i!==null&&(p=f(d,i));var j=h?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Em({className:b,style:v},j),g.createElement("p",{className:w,style:x},g.isValidElement(p)?p:"".concat(p)),m())},$o="recharts-tooltip-wrapper",_A={visibility:"hidden"};function kA(e){var{coordinate:t,translateX:r,translateY:n}=e;return je($o,{["".concat($o,"-right")]:ne(r)&&t&&ne(t.x)&&r>=t.x,["".concat($o,"-left")]:ne(r)&&t&&ne(t.x)&&r<t.x,["".concat($o,"-bottom")]:ne(n)&&t&&ne(t.y)&&n>=t.y,["".concat($o,"-top")]:ne(n)&&t&&ne(t.y)&&n<t.y})}function Cx(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ne(i[n]))return i[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=d,v=h;return m<v?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,y=h+u;return x>y?Math.max(d,h):Math.max(f,h)}function EA(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function PA(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=Cx({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Cx({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=EA({translateX:d,translateY:f,useTranslate3d:l})):u=_A,{cssProperties:u,cssClasses:kA({translateX:d,translateY:f,coordinate:r})}}function _x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_x(Object(r),!0).forEach(function(n){Pm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pm(e,t,r){return(t=OA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OA(e){var t=TA(e,"string");return typeof t=="symbol"?t:t+""}function TA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class AA extends g.PureComponent{constructor(){super(...arguments),Pm(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Pm(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:v,lastBoundingBox:x,innerRef:y,hasPortalFromProps:p}=this.props,{cssClasses:b,cssProperties:w}=PA({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),j=p?{}:Gl(Gl({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),S=Gl(Gl({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:S,ref:y},i)}}var DA=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ol={isSsr:DA()},i3=()=>ie(e=>e.rootProps.accessibilityLayer);function Wr(e){return Number.isFinite(e)}function au(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Om.apply(null,arguments)}function kx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ex(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kx(Object(r),!0).forEach(function(n){IA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IA(e,t,r){return(t=MA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MA(e){var t=$A(e,"string");return typeof t=="symbol"?t:t+""}function $A(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Px={curveBasisClosed:uO,curveBasisOpen:dO,curveBasis:cO,curveBumpX:Y8,curveBumpY:X8,curveLinearClosed:fO,curveLinear:fd,curveMonotoneX:hO,curveMonotoneY:mO,curveNatural:pO,curveStep:gO,curveStepAfter:yO,curveStepBefore:vO},Yl=e=>Wr(e.x)&&Wr(e.y),Lo=e=>e.x,Ro=e=>e.y,LA=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(al(e));return(r==="curveMonotone"||r==="curveBump")&&t?Px["".concat(r).concat(t==="vertical"?"Y":"X")]:Px[r]||fd},RA=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=LA(t,a),l=i?r.filter(Yl):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>Yl(f)):n,d=l.map((f,h)=>Ex(Ex({},f),{},{base:u[h]}));return a==="vertical"?c=Wl().y(Ro).x1(Lo).x0(f=>f.base.x):c=Wl().x(Lo).y1(Ro).y0(f=>f.base.y),c.defined(Yl).curve(o),c(d)}return a==="vertical"&&ne(n)?c=Wl().y(Ro).x1(Lo).x0(n):ne(n)?c=Wl().x(Lo).y1(Ro).y0(n):c=Uj().x(Lo).y(Ro),c.defined(Yl).curve(o),c(l)},o3=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?RA(e):n;return g.createElement("path",Om({},Ee(e,!1),g0(e),{className:je("recharts-curve",t),d:i===null?void 0:i,ref:a}))},zA=["x","y","top","left","width","height","className"];function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(null,arguments)}function Ox(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ox(Object(r),!0).forEach(function(n){UA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ox(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UA(e,t,r){return(t=BA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BA(e){var t=WA(e,"string");return typeof t=="symbol"?t:t+""}function WA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qA(e,t){if(e==null)return{};var r,n,a=HA(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HA(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KA=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),VA=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:l}=e,c=qA(e,zA),u=FA({x:t,y:r,top:n,left:a,width:i,height:o},c);return!ne(t)||!ne(r)||!ne(i)||!ne(o)||!ne(n)||!ne(a)?null:g.createElement("path",Tm({},Ee(u,!0),{className:je("recharts-cross",l),d:KA(t,r,i,o,n,a)}))};function GA(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Tx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tx(Object(r),!0).forEach(function(n){XA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XA(e,t,r){return(t=QA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QA(e){var t=JA(e,"string");return typeof t=="symbol"?t:t+""}function JA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ui(e,t){var r=YA({},e),n=t,a=Object.keys(t),i=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var s3={},l3={},c3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(c3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c3,r=E0,n=gd,a=vd,i=pd;function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,v,x){const y=x(u,d,f,h,m,v);if(y!==void 0)return y;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,v,x)}return c(u,d,v,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),v=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),v===a.argumentsTag&&(v=a.objectTag),m!==v)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const p=u.valueOf(),b=d.valueOf();return i.eq(p,b)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),y=f.get(d);if(x!=null&&y!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[p,b]of u.entries())if(!d.has(p)||!l(b,d.get(p),p,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const p=Array.from(u.values()),b=Array.from(d.values());for(let w=0;w<p.length;w++){const j=p[w],S=b.findIndex(N=>l(j,N,void 0,u,d,f,h));if(S===-1)return!1;b.splice(S,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let p=0;p<u.length;p++)if(!l(u[p],d[p],p,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const b=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(b.length!==w.length)return!1;for(let j=0;j<b.length;j++){const S=b[j],N=u[S];if(!Object.hasOwn(d,S))return!1;const C=d[S];if(!l(N,C,S,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(l3);var u3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(u3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l3,r=u3;function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n})(s3);var ZA=s3.isEqual;const e9=_n(ZA);function t9(e){var t={},r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var iu=1e-4,d3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],f3=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Ax=(e,t)=>r=>{var n=d3(e,t);return f3(n,r)},r9=(e,t)=>r=>{var n=d3(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return f3(a,r)},Dx=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([t,n,r,a]=o);var u=Ax(t,r),d=Ax(n,a),f=r9(t,r),h=v=>v>1?1:v<0?0:v,m=v=>{for(var x=v>1?1:v,y=x,p=0;p<8;++p){var b=u(y)-x,w=f(y);if(Math.abs(b-x)<iu||w<iu)return d(y);y=h(y-b/w)}return d(y)};return m.isStepper=!1,m},n9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<iu&&Math.abs(f)<iu?[l,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},a9=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Dx(e);case"spring":return n9();default:if(e.split("(")[0]==="cubic-bezier")return Dx(e)}return typeof e=="function"?e:null};function Ix(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ix(Object(r),!0).forEach(function(n){i9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ix(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i9(e,t,r){return(t=o9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o9(e){var t=s9(e,"string");return typeof t=="symbol"?t:t+""}function s9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l9=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),c9=(e,t,r)=>e.map(n=>"".concat(l9(n)," ").concat(t,"ms ").concat(r)).join(","),u9=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ls=(e,t)=>Object.keys(t).reduce((r,n)=>Mx(Mx({},r),{},{[n]:e(n,t[n])}),{});function $x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$x(Object(r),!0).forEach(function(n){d9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d9(e,t,r){return(t=f9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f9(e){var t=h9(e,"string");return typeof t=="symbol"?t:t+""}function h9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ou=(e,t,r)=>e+(t-e)*r,Am=e=>{var{from:t,to:r}=e;return t!==r},h3=(e,t,r)=>{var n=Ls((a,i)=>{if(Am(i)){var[o,l]=e(i.from,i.to,i.velocity);return ut(ut({},i),{},{from:o,velocity:l})}return i},t);return r<1?Ls((a,i)=>Am(i)?ut(ut({},i),{},{velocity:ou(i.velocity,n[a].velocity,r),from:ou(i.from,n[a].from,r)}):i,t):h3(e,n,r-1)};function m9(e,t,r,n,a,i){var o,l=n.reduce((h,m)=>ut(ut({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Ls((h,m)=>m.from,l),u=()=>!Object.values(l).filter(Am).length,d=null,f=h=>{o||(o=h);var m=h-o,v=m/r.dt;l=h3(r,l,v),a(ut(ut(ut({},e),t),c())),o=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function p9(e,t,r,n,a,i,o){var l=null,c=a.reduce((f,h)=>ut(ut({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=Ls((x,y)=>ou(...y,r(h)),c);if(i(ut(ut(ut({},e),t),m)),h<1)l=o.setTimeout(d);else{var v=Ls((x,y)=>ou(...y,r(1)),c);i(ut(ut(ut({},e),t),v))}};return()=>(l=o.setTimeout(d),()=>{l()})}const g9=(e,t,r,n,a,i)=>{var o=u9(e,t);return r.isStepper===!0?m9(e,t,r,o,a,i):p9(e,t,r,n,o,a,i)};class v9{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var y9=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dm.apply(null,arguments)}function x9(e,t){if(e==null)return{};var r,n,a=b9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function b9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lx(Object(r),!0).forEach(function(n){Ra(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ra(e,t,r){return(t=w9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(){return t9(new v9)}class H0 extends g.PureComponent{constructor(t,r){super(t,r),Ra(this,"mounted",!1),Ra(this,"manager",null),Ra(this,"stopJSAnimation",null),Ra(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(e9(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(Rn(Rn({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=g9(r,n,a9(i),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:i}:i,f=c9(Object.keys(d),n,o);this.manager.start([l,r,Rn(Rn({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:v}=t,x=x9(t,y9),y=g.Children.count(r),p=this.state.style;if(typeof r=="function")return r(p);if(!l||y===0||a<=0)return r;var b=w=>{var{style:j={},className:S}=w.props,N=g.cloneElement(w,Rn(Rn({},x),{},{style:Rn(Rn({},j),p),className:S}));return N};return y===1?b(g.Children.only(r)):g.createElement("div",null,g.Children.map(r,w=>b(w)))}}Ra(H0,"displayName","Animate");Ra(H0,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var N9=g.createContext(null);function su(e){var t,r,n=g.useContext(N9);return g.createElement(H0,Dm({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:S9()}))}function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lu.apply(null,arguments)}var Rx=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},C9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_9=e=>{var t=ui(e,C9),r=g.useRef(null),[n,a]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var p=r.current.getTotalLength();p&&a(p)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:v,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var y=je("recharts-rectangle",d);return x?g.createElement(su,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:h,animationEasing:f,isActive:x},p=>{var{width:b,height:w,x:j,y:S}=p;return g.createElement(su,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:v,easing:f},g.createElement("path",lu({},Ee(t,!0),{className:y,d:Rx(j,S,b,w,u),ref:r})))}):g.createElement("path",lu({},Ee(t,!0),{className:y,d:Rx(i,o,l,c,u)}))};function m3(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=ft(t,r,n,a),l=ft(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(null,arguments)}var k9=(e,t)=>{var r=yr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Xl=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/nu,f=c?a:a+i*d,h=ft(t,r,u,f),m=ft(t,r,n,f),v=c?a-i*d:a,x=ft(t,r,u*Math.cos(d*nu),v);return{center:h,circleTangency:m,lineTangency:x,theta:d}},p3=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,l=k9(i,o),c=i+l,u=ft(t,r,a,i),d=ft(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ft(t,r,n,i),m=ft(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},E9=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=yr(u-c),{circleTangency:f,lineTangency:h,theta:m}=Xl({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:x,theta:y}=Xl({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),p=l?Math.abs(c-u):Math.abs(c-u)-m-y;if(p<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):p3({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(p>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:j,theta:S}=Xl({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:C,theta:_}=Xl({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=l?Math.abs(c-u):Math.abs(c-u)-S-_;if(A<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b},P9={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},O9=e=>{var t=ui(e,P9),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var h=je("recharts-sector",f),m=i-a,v=fa(o,m,0,!0),x;return v>0&&Math.abs(u-d)<360?x=E9({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=p3({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),g.createElement("path",Im({},Ee(t,!0),{className:h,d:x}))};function T9(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ft(l,c,u,f),m=ft(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return m3(t);return[{x:n,y:a},{x:i,y:o}]}var g3={},v3={},y3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T0;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(y3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y3;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(v3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A0,r=v3;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n})(g3);var A9=g3.range;const x3=_n(A9);function la(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function K0(e){let t,r,n;e.length!==2?(t=la,r=(l,c)=>la(e(l),c),n=(l,c)=>e(l)-c):(t=e===la||e===D9?e:I9,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function I9(){return 0}function b3(e){return e===null?NaN:+e}function*M9(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const $9=K0(la),sl=$9.right;K0(b3).center;class zx extends Map{constructor(t,r=z9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Fx(this,t))}has(t){return super.has(Fx(this,t))}set(t,r){return super.set(L9(this,t),r)}delete(t){return super.delete(R9(this,t))}}function Fx({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function L9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function R9({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function z9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function F9(e=la){if(e===la)return w3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function w3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const U9=Math.sqrt(50),B9=Math.sqrt(10),W9=Math.sqrt(2);function cu(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=U9?10:i>=B9?5:i>=W9?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?cu(e,t,r*2):[l,c,u]}function Mm(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?cu(t,e,r):cu(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function $m(e,t,r){return t=+t,e=+e,r=+r,cu(e,t,r)[2]}function Lm(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?$m(t,e,r):$m(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Ux(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Bx(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function j3(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?w3:F9(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),v=Math.min(n,Math.floor(t+(c-u)*f/c+h));j3(e,t,m,v,a)}const i=e[t];let o=r,l=n;for(zo(e,r,t),a(e[n],i)>0&&zo(e,r,n);o<l;){for(zo(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?zo(e,r,l):(++l,zo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function q9(e,t,r){if(e=Float64Array.from(M9(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Bx(e);if(t>=1)return Ux(e);var n,a=(n-1)*t,i=Math.floor(a),o=Ux(j3(e,i).subarray(0,i+1)),l=Bx(e.subarray(i+1));return o+(l-o)*(a-i)}}function H9(e,t,r=b3){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function K9(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Pr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Tn(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Rm=Symbol("implicit");function V0(){var e=new zx,t=[],r=[],n=Rm;function a(i){let o=e.get(i);if(o===void 0){if(n!==Rm)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new zx;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return V0(t,r).unknown(n)},Pr.apply(a,arguments),a}function G0(){var e=V0().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,v=m?a:n,x=m?n:a;i=(x-v)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),v+=(x-v-i*(h-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=K9(h).map(function(p){return v+i*p});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return G0(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Pr.apply(f(),arguments)}function S3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return S3(t())},e}function V9(){return S3(G0.apply(null,arguments).paddingInner(1))}function Y0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function N3(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ll(){}var Rs=.7,uu=1/Rs,Vi="\\s*([+-]?\\d+)\\s*",zs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G9=/^#([0-9a-f]{3,8})$/,Y9=new RegExp(`^rgb\\(${Vi},${Vi},${Vi}\\)$`),X9=new RegExp(`^rgb\\(${Zr},${Zr},${Zr}\\)$`),Q9=new RegExp(`^rgba\\(${Vi},${Vi},${Vi},${zs}\\)$`),J9=new RegExp(`^rgba\\(${Zr},${Zr},${Zr},${zs}\\)$`),Z9=new RegExp(`^hsl\\(${zs},${Zr},${Zr}\\)$`),eD=new RegExp(`^hsla\\(${zs},${Zr},${Zr},${zs}\\)$`),Wx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Y0(ll,Fs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qx,formatHex:qx,formatHex8:tD,formatHsl:rD,formatRgb:Hx,toString:Hx});function qx(){return this.rgb().formatHex()}function tD(){return this.rgb().formatHex8()}function rD(){return C3(this).formatHsl()}function Hx(){return this.rgb().formatRgb()}function Fs(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=G9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Kx(t):r===3?new Ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ql(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ql(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Y9.exec(e))?new Ft(t[1],t[2],t[3],1):(t=X9.exec(e))?new Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Q9.exec(e))?Ql(t[1],t[2],t[3],t[4]):(t=J9.exec(e))?Ql(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z9.exec(e))?Yx(t[1],t[2]/100,t[3]/100,1):(t=eD.exec(e))?Yx(t[1],t[2]/100,t[3]/100,t[4]):Wx.hasOwnProperty(e)?Kx(Wx[e]):e==="transparent"?new Ft(NaN,NaN,NaN,0):null}function Kx(e){return new Ft(e>>16&255,e>>8&255,e&255,1)}function Ql(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ft(e,t,r,n)}function nD(e){return e instanceof ll||(e=Fs(e)),e?(e=e.rgb(),new Ft(e.r,e.g,e.b,e.opacity)):new Ft}function zm(e,t,r,n){return arguments.length===1?nD(e):new Ft(e,t,r,n??1)}function Ft(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Y0(Ft,zm,N3(ll,{brighter(e){return e=e==null?uu:Math.pow(uu,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rs:Math.pow(Rs,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ft(Va(this.r),Va(this.g),Va(this.b),du(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vx,formatHex:Vx,formatHex8:aD,formatRgb:Gx,toString:Gx}));function Vx(){return`#${za(this.r)}${za(this.g)}${za(this.b)}`}function aD(){return`#${za(this.r)}${za(this.g)}${za(this.b)}${za((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gx(){const e=du(this.opacity);return`${e===1?"rgb(":"rgba("}${Va(this.r)}, ${Va(this.g)}, ${Va(this.b)}${e===1?")":`, ${e})`}`}function du(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Va(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function za(e){return e=Va(e),(e<16?"0":"")+e.toString(16)}function Yx(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Rr(e,t,r,n)}function C3(e){if(e instanceof Rr)return new Rr(e.h,e.s,e.l,e.opacity);if(e instanceof ll||(e=Fs(e)),!e)return new Rr;if(e instanceof Rr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Rr(o,l,c,e.opacity)}function iD(e,t,r,n){return arguments.length===1?C3(e):new Rr(e,t,r,n??1)}function Rr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Y0(Rr,iD,N3(ll,{brighter(e){return e=e==null?uu:Math.pow(uu,e),new Rr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rs:Math.pow(Rs,e),new Rr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ft(Hf(e>=240?e-240:e+120,a,n),Hf(e,a,n),Hf(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Rr(Xx(this.h),Jl(this.s),Jl(this.l),du(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=du(this.opacity);return`${e===1?"hsl(":"hsla("}${Xx(this.h)}, ${Jl(this.s)*100}%, ${Jl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xx(e){return e=(e||0)%360,e<0?e+360:e}function Jl(e){return Math.max(0,Math.min(1,e||0))}function Hf(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const X0=e=>()=>e;function oD(e,t){return function(r){return e+r*t}}function sD(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function lD(e){return(e=+e)==1?_3:function(t,r){return r-t?sD(t,r,e):X0(isNaN(t)?r:t)}}function _3(e,t){var r=t-e;return r?oD(e,r):X0(isNaN(e)?t:e)}const Qx=function e(t){var r=lD(t);function n(a,i){var o=r((a=zm(a)).r,(i=zm(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=_3(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function cD(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function uD(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dD(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=xo(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function fD(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function fu(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function hD(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=xo(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kf=new RegExp(Fm.source,"g");function mD(e){return function(){return e}}function pD(e){return function(t){return e(t)+""}}function gD(e,t){var r=Fm.lastIndex=Kf.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Fm.exec(e))&&(a=Kf.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:fu(n,a)})),r=Kf.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?pD(c[0].x):mD(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function xo(e,t){var r=typeof t,n;return t==null||r==="boolean"?X0(t):(r==="number"?fu:r==="string"?(n=Fs(t))?(t=n,Qx):gD:t instanceof Fs?Qx:t instanceof Date?fD:uD(t)?cD:Array.isArray(t)?dD:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hD:fu)(e,t)}function Q0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function vD(e,t){t===void 0&&(t=e,e=xo);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function yD(e){return function(){return e}}function hu(e){return+e}var Jx=[0,1];function Pt(e){return e}function Um(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:yD(isNaN(t)?NaN:.5)}function xD(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function bD(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Um(a,n),i=r(o,i)):(n=Um(n,a),i=r(i,o)),function(l){return i(n(l))}}function wD(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Um(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=sl(e,l,1,n)-1;return i[c](a[c](l))}}function cl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Od(){var e=Jx,t=Jx,r=xo,n,a,i,o=Pt,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Pt&&(o=xD(e[0],e[h-1])),l=h>2?wD:bD,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),fu)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,hu),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Q0,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Pt,d()):o!==Pt},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function J0(){return Od()(Pt,Pt)}function jD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mu(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function oo(e){return e=mu(Math.abs(e)),e?e[1]:NaN}function SD(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ND(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var CD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Us(e){if(!(t=CD.exec(e)))throw new Error("invalid format: "+e);var t;return new Z0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Us.prototype=Z0.prototype;function Z0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Z0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _D(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var k3;function kD(e,t){var r=mu(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(k3=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+mu(e,Math.max(0,t+i-1))[0]}function Zx(e,t){var r=mu(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const e1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Zx(e*100,t),r:Zx,s:kD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function t1(e){return e}var r1=Array.prototype.map,n1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ED(e){var t=e.grouping===void 0||e.thousands===void 0?t1:SD(r1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?t1:ND(r1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Us(f);var h=f.fill,m=f.align,v=f.sign,x=f.symbol,y=f.zero,p=f.width,b=f.comma,w=f.precision,j=f.trim,S=f.type;S==="n"?(b=!0,S="g"):e1[S]||(w===void 0&&(w=12),j=!0,S="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var N=x==="$"?r:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=x==="$"?n:/[%p]/.test(S)?o:"",_=e1[S],A=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(T){var U=N,I=C,ee,te,B;if(S==="c")I=_(T)+I,T="";else{T=+T;var E=T<0||1/T<0;if(T=isNaN(T)?c:_(Math.abs(T),w),j&&(T=_D(T)),E&&+T==0&&v!=="+"&&(E=!1),U=(E?v==="("?v:l:v==="-"||v==="("?"":v)+U,I=(S==="s"?n1[8+k3/3]:"")+I+(E&&v==="("?")":""),A){for(ee=-1,te=T.length;++ee<te;)if(B=T.charCodeAt(ee),48>B||B>57){I=(B===46?a+T.slice(ee+1):T.slice(ee))+I,T=T.slice(0,ee);break}}}b&&!y&&(T=t(T,1/0));var O=U.length+T.length+I.length,M=O<p?new Array(p-O+1).join(h):"";switch(b&&y&&(T=t(M+T,M.length?p-I.length:1/0),M=""),m){case"<":T=U+T+I+M;break;case"=":T=U+M+T+I;break;case"^":T=M.slice(0,O=M.length>>1)+U+T+I+M.slice(O);break;default:T=M+U+T+I;break}return i(T)}return k.toString=function(){return f+""},k}function d(f,h){var m=u((f=Us(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(oo(h)/3)))*3,x=Math.pow(10,-v),y=n1[8+v/3];return function(p){return m(x*p)+y}}return{format:u,formatPrefix:d}}var Zl,eg,E3;PD({thousands:",",grouping:[3],currency:["$",""]});function PD(e){return Zl=ED(e),eg=Zl.format,E3=Zl.formatPrefix,Zl}function OD(e){return Math.max(0,-oo(Math.abs(e)))}function TD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oo(t)/3)))*3-oo(Math.abs(e)))}function AD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oo(t)-oo(e))+1}function P3(e,t,r,n){var a=Lm(e,t,r),i;switch(n=Us(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=TD(a,o))&&(n.precision=i),E3(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=AD(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=OD(a))&&(n.precision=i-(n.type==="%")*2);break}}return eg(n)}function ba(e){var t=e.domain;return e.ticks=function(r){var n=t();return Mm(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return P3(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=$m(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function O3(){var e=J0();return e.copy=function(){return cl(e,O3())},Pr.apply(e,arguments),ba(e)}function T3(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,hu),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return T3(e).unknown(t)},e=arguments.length?Array.from(e,hu):[0,1],ba(r)}function A3(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function a1(e){return Math.log(e)}function i1(e){return Math.exp(e)}function DD(e){return-Math.log(-e)}function ID(e){return-Math.exp(-e)}function MD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $D(e){return e===10?MD:e===Math.E?Math.exp:t=>Math.pow(e,t)}function LD(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function o1(e){return(t,r)=>-e(-t,r)}function tg(e){const t=e(a1,i1),r=t.domain;let n=10,a,i;function o(){return a=LD(n),i=$D(n),r()[0]<0?(a=o1(a),i=o1(i),e(DD,ID)):e(a1,i1),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),v,x;const y=l==null?10:+l;let p=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(v=1;v<n;++v)if(x=h<0?v/i(-h):v*i(h),!(x<u)){if(x>d)break;p.push(x)}}else for(;h<=m;++h)for(v=n-1;v>=1;--v)if(x=h>0?v/i(-h):v*i(h),!(x<u)){if(x>d)break;p.push(x)}p.length*2<y&&(p=Mm(u,d,y))}else p=Mm(h,m,Math.min(m-h,y)).map(i);return f?p.reverse():p},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Us(c)).precision==null&&(c.trim=!0),c=eg(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(A3(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function D3(){const e=tg(Od()).domain([1,10]);return e.copy=()=>cl(e,D3()).base(e.base()),Pr.apply(e,arguments),e}function s1(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function l1(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function rg(e){var t=1,r=e(s1(t),l1(t));return r.constant=function(n){return arguments.length?e(s1(t=+n),l1(t)):t},ba(r)}function I3(){var e=rg(Od());return e.copy=function(){return cl(e,I3()).constant(e.constant())},Pr.apply(e,arguments)}function c1(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RD(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zD(e){return e<0?-e*e:e*e}function ng(e){var t=e(Pt,Pt),r=1;function n(){return r===1?e(Pt,Pt):r===.5?e(RD,zD):e(c1(r),c1(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},ba(t)}function ag(){var e=ng(Od());return e.copy=function(){return cl(e,ag()).exponent(e.exponent())},Pr.apply(e,arguments),e}function FD(){return ag.apply(null,arguments).exponent(.5)}function u1(e){return Math.sign(e)*e*e}function UD(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function M3(){var e=J0(),t=[0,1],r=!1,n;function a(i){var o=UD(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(u1(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,hu)).map(u1)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return M3(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Pr.apply(a,arguments),ba(a)}function $3(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=H9(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[sl(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(la),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return $3().domain(e).range(t).unknown(n)},Pr.apply(i,arguments)}function L3(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[sl(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return L3().domain([e,t]).range(a).unknown(i)},Pr.apply(ba(o),arguments)}function R3(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[sl(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return R3().domain(e).range(t).unknown(r)},Pr.apply(a,arguments)}const Vf=new Date,Gf=new Date;function Je(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Je(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Vf.setTime(+i),Gf.setTime(+o),e(Vf),e(Gf),Math.floor(r(Vf,Gf))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const pu=Je(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Je(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):pu);pu.range;const fn=1e3,xr=fn*60,hn=xr*60,Sn=hn*24,ig=Sn*7,d1=Sn*30,Yf=Sn*365,Fa=Je(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fn)},(e,t)=>(t-e)/fn,e=>e.getUTCSeconds());Fa.range;const og=Je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fn)},(e,t)=>{e.setTime(+e+t*xr)},(e,t)=>(t-e)/xr,e=>e.getMinutes());og.range;const sg=Je(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xr)},(e,t)=>(t-e)/xr,e=>e.getUTCMinutes());sg.range;const lg=Je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fn-e.getMinutes()*xr)},(e,t)=>{e.setTime(+e+t*hn)},(e,t)=>(t-e)/hn,e=>e.getHours());lg.range;const cg=Je(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hn)},(e,t)=>(t-e)/hn,e=>e.getUTCHours());cg.range;const ul=Je(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xr)/Sn,e=>e.getDate()-1);ul.range;const Td=Je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sn,e=>e.getUTCDate()-1);Td.range;const z3=Je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sn,e=>Math.floor(e/Sn));z3.range;function di(e){return Je(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xr)/ig)}const Ad=di(0),gu=di(1),BD=di(2),WD=di(3),so=di(4),qD=di(5),HD=di(6);Ad.range;gu.range;BD.range;WD.range;so.range;qD.range;HD.range;function fi(e){return Je(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ig)}const Dd=fi(0),vu=fi(1),KD=fi(2),VD=fi(3),lo=fi(4),GD=fi(5),YD=fi(6);Dd.range;vu.range;KD.range;VD.range;lo.range;GD.range;YD.range;const ug=Je(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ug.range;const dg=Je(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dg.range;const Nn=Je(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Nn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Je(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Nn.range;const Cn=Je(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Cn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Je(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Cn.range;function F3(e,t,r,n,a,i){const o=[[Fa,1,fn],[Fa,5,5*fn],[Fa,15,15*fn],[Fa,30,30*fn],[i,1,xr],[i,5,5*xr],[i,15,15*xr],[i,30,30*xr],[a,1,hn],[a,3,3*hn],[a,6,6*hn],[a,12,12*hn],[n,1,Sn],[n,2,2*Sn],[r,1,ig],[t,1,d1],[t,3,3*d1],[e,1,Yf]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),v=m?m.range(u,+d+1):[];return h?v.reverse():v}function c(u,d,f){const h=Math.abs(d-u)/f,m=K0(([,,y])=>y).right(o,h);if(m===o.length)return e.every(Lm(u/Yf,d/Yf,f));if(m===0)return pu.every(Math.max(Lm(u,d,f),1));const[v,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return v.every(x)}return[l,c]}const[XD,QD]=F3(Cn,dg,Dd,z3,cg,sg),[JD,ZD]=F3(Nn,ug,Ad,ul,lg,og);function Xf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qf(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fo(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function eI(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Uo(a),d=Bo(a),f=Uo(i),h=Bo(i),m=Uo(o),v=Bo(o),x=Uo(l),y=Bo(l),p=Uo(c),b=Bo(c),w={a:E,A:O,b:M,B:q,c:null,d:v1,e:v1,f:SI,g:DI,G:MI,H:bI,I:wI,j:jI,L:U3,m:NI,M:CI,p:K,q:V,Q:b1,s:w1,S:_I,u:kI,U:EI,V:PI,w:OI,W:TI,x:null,X:null,y:AI,Y:II,Z:$I,"%":x1},j={a:le,A:ge,b:ce,B:P,c:null,d:y1,e:y1,f:FI,g:XI,G:JI,H:LI,I:RI,j:zI,L:W3,m:UI,M:BI,p:G,q:X,Q:b1,s:w1,S:WI,u:qI,U:HI,V:KI,w:VI,W:GI,x:null,X:null,y:YI,Y:QI,Z:ZI,"%":x1},S={a:k,A:T,b:U,B:I,c:ee,d:p1,e:p1,f:gI,g:m1,G:h1,H:g1,I:g1,j:fI,L:pI,m:dI,M:hI,p:A,q:uI,Q:yI,s:xI,S:mI,u:iI,U:oI,V:sI,w:aI,W:lI,x:te,X:B,y:m1,Y:h1,Z:cI,"%":vI};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),j.x=N(r,j),j.X=N(n,j),j.c=N(t,j);function N(R,Y){return function(se){var z=[],xe=-1,L=0,F=R.length,Z,ae,ve;for(se instanceof Date||(se=new Date(+se));++xe<F;)R.charCodeAt(xe)===37&&(z.push(R.slice(L,xe)),(ae=f1[Z=R.charAt(++xe)])!=null?Z=R.charAt(++xe):ae=Z==="e"?" ":"0",(ve=Y[Z])&&(Z=ve(se,ae)),z.push(Z),L=xe+1);return z.push(R.slice(L,xe)),z.join("")}}function C(R,Y){return function(se){var z=Fo(1900,void 0,1),xe=_(z,R,se+="",0),L,F;if(xe!=se.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(Y&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(L=Qf(Fo(z.y,0,1)),F=L.getUTCDay(),L=F>4||F===0?vu.ceil(L):vu(L),L=Td.offset(L,(z.V-1)*7),z.y=L.getUTCFullYear(),z.m=L.getUTCMonth(),z.d=L.getUTCDate()+(z.w+6)%7):(L=Xf(Fo(z.y,0,1)),F=L.getDay(),L=F>4||F===0?gu.ceil(L):gu(L),L=ul.offset(L,(z.V-1)*7),z.y=L.getFullYear(),z.m=L.getMonth(),z.d=L.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),F="Z"in z?Qf(Fo(z.y,0,1)).getUTCDay():Xf(Fo(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(F+5)%7:z.w+z.U*7-(F+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Qf(z)):Xf(z)}}function _(R,Y,se,z){for(var xe=0,L=Y.length,F=se.length,Z,ae;xe<L;){if(z>=F)return-1;if(Z=Y.charCodeAt(xe++),Z===37){if(Z=Y.charAt(xe++),ae=S[Z in f1?Y.charAt(xe++):Z],!ae||(z=ae(R,se,z))<0)return-1}else if(Z!=se.charCodeAt(z++))return-1}return z}function A(R,Y,se){var z=u.exec(Y.slice(se));return z?(R.p=d.get(z[0].toLowerCase()),se+z[0].length):-1}function k(R,Y,se){var z=m.exec(Y.slice(se));return z?(R.w=v.get(z[0].toLowerCase()),se+z[0].length):-1}function T(R,Y,se){var z=f.exec(Y.slice(se));return z?(R.w=h.get(z[0].toLowerCase()),se+z[0].length):-1}function U(R,Y,se){var z=p.exec(Y.slice(se));return z?(R.m=b.get(z[0].toLowerCase()),se+z[0].length):-1}function I(R,Y,se){var z=x.exec(Y.slice(se));return z?(R.m=y.get(z[0].toLowerCase()),se+z[0].length):-1}function ee(R,Y,se){return _(R,t,Y,se)}function te(R,Y,se){return _(R,r,Y,se)}function B(R,Y,se){return _(R,n,Y,se)}function E(R){return o[R.getDay()]}function O(R){return i[R.getDay()]}function M(R){return c[R.getMonth()]}function q(R){return l[R.getMonth()]}function K(R){return a[+(R.getHours()>=12)]}function V(R){return 1+~~(R.getMonth()/3)}function le(R){return o[R.getUTCDay()]}function ge(R){return i[R.getUTCDay()]}function ce(R){return c[R.getUTCMonth()]}function P(R){return l[R.getUTCMonth()]}function G(R){return a[+(R.getUTCHours()>=12)]}function X(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var Y=N(R+="",w);return Y.toString=function(){return R},Y},parse:function(R){var Y=C(R+="",!1);return Y.toString=function(){return R},Y},utcFormat:function(R){var Y=N(R+="",j);return Y.toString=function(){return R},Y},utcParse:function(R){var Y=C(R+="",!0);return Y.toString=function(){return R},Y}}}var f1={"-":"",_:" ",0:"0"},it=/^\s*\d+/,tI=/^%/,rI=/[\\^$*+?|[\]().{}]/g;function ye(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function nI(e){return e.replace(rI,"\\$&")}function Uo(e){return new RegExp("^(?:"+e.map(nI).join("|")+")","i")}function Bo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function aI(e,t,r){var n=it.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function iI(e,t,r){var n=it.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function sI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function lI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function h1(e,t,r){var n=it.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function m1(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cI(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uI(e,t,r){var n=it.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function dI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function p1(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fI(e,t,r){var n=it.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function g1(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mI(e,t,r){var n=it.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pI(e,t,r){var n=it.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gI(e,t,r){var n=it.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vI(e,t,r){var n=tI.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function yI(e,t,r){var n=it.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xI(e,t,r){var n=it.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function v1(e,t){return ye(e.getDate(),t,2)}function bI(e,t){return ye(e.getHours(),t,2)}function wI(e,t){return ye(e.getHours()%12||12,t,2)}function jI(e,t){return ye(1+ul.count(Nn(e),e),t,3)}function U3(e,t){return ye(e.getMilliseconds(),t,3)}function SI(e,t){return U3(e,t)+"000"}function NI(e,t){return ye(e.getMonth()+1,t,2)}function CI(e,t){return ye(e.getMinutes(),t,2)}function _I(e,t){return ye(e.getSeconds(),t,2)}function kI(e){var t=e.getDay();return t===0?7:t}function EI(e,t){return ye(Ad.count(Nn(e)-1,e),t,2)}function B3(e){var t=e.getDay();return t>=4||t===0?so(e):so.ceil(e)}function PI(e,t){return e=B3(e),ye(so.count(Nn(e),e)+(Nn(e).getDay()===4),t,2)}function OI(e){return e.getDay()}function TI(e,t){return ye(gu.count(Nn(e)-1,e),t,2)}function AI(e,t){return ye(e.getFullYear()%100,t,2)}function DI(e,t){return e=B3(e),ye(e.getFullYear()%100,t,2)}function II(e,t){return ye(e.getFullYear()%1e4,t,4)}function MI(e,t){var r=e.getDay();return e=r>=4||r===0?so(e):so.ceil(e),ye(e.getFullYear()%1e4,t,4)}function $I(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ye(t/60|0,"0",2)+ye(t%60,"0",2)}function y1(e,t){return ye(e.getUTCDate(),t,2)}function LI(e,t){return ye(e.getUTCHours(),t,2)}function RI(e,t){return ye(e.getUTCHours()%12||12,t,2)}function zI(e,t){return ye(1+Td.count(Cn(e),e),t,3)}function W3(e,t){return ye(e.getUTCMilliseconds(),t,3)}function FI(e,t){return W3(e,t)+"000"}function UI(e,t){return ye(e.getUTCMonth()+1,t,2)}function BI(e,t){return ye(e.getUTCMinutes(),t,2)}function WI(e,t){return ye(e.getUTCSeconds(),t,2)}function qI(e){var t=e.getUTCDay();return t===0?7:t}function HI(e,t){return ye(Dd.count(Cn(e)-1,e),t,2)}function q3(e){var t=e.getUTCDay();return t>=4||t===0?lo(e):lo.ceil(e)}function KI(e,t){return e=q3(e),ye(lo.count(Cn(e),e)+(Cn(e).getUTCDay()===4),t,2)}function VI(e){return e.getUTCDay()}function GI(e,t){return ye(vu.count(Cn(e)-1,e),t,2)}function YI(e,t){return ye(e.getUTCFullYear()%100,t,2)}function XI(e,t){return e=q3(e),ye(e.getUTCFullYear()%100,t,2)}function QI(e,t){return ye(e.getUTCFullYear()%1e4,t,4)}function JI(e,t){var r=e.getUTCDay();return e=r>=4||r===0?lo(e):lo.ceil(e),ye(e.getUTCFullYear()%1e4,t,4)}function ZI(){return"+0000"}function x1(){return"%"}function b1(e){return+e}function w1(e){return Math.floor(+e/1e3)}var wi,H3,K3;eM({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eM(e){return wi=eI(e),H3=wi.format,wi.parse,K3=wi.utcFormat,wi.utcParse,wi}function tM(e){return new Date(e)}function rM(e){return e instanceof Date?+e:+new Date(+e)}function fg(e,t,r,n,a,i,o,l,c,u){var d=J0(),f=d.invert,h=d.domain,m=u(".%L"),v=u(":%S"),x=u("%I:%M"),y=u("%I %p"),p=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function S(N){return(c(N)<N?m:l(N)<N?v:o(N)<N?x:i(N)<N?y:n(N)<N?a(N)<N?p:b:r(N)<N?w:j)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,rM)):h().map(tM)},d.ticks=function(N){var C=h();return e(C[0],C[C.length-1],N??10)},d.tickFormat=function(N,C){return C==null?S:u(C)},d.nice=function(N){var C=h();return(!N||typeof N.range!="function")&&(N=t(C[0],C[C.length-1],N??10)),N?h(A3(C,N)):d},d.copy=function(){return cl(d,fg(e,t,r,n,a,i,o,l,c,u))},d}function nM(){return Pr.apply(fg(JD,ZD,Nn,ug,Ad,ul,lg,og,Fa,H3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aM(){return Pr.apply(fg(XD,QD,Cn,dg,Dd,Td,cg,sg,Fa,K3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Id(){var e=0,t=1,r,n,a,i,o=Pt,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,v;return arguments.length?([m,v]=h,o=f(m,v),u):[o(0),o(1)]}}return u.range=d(xo),u.rangeRound=d(Q0),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function wa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function V3(){var e=ba(Id()(Pt));return e.copy=function(){return wa(e,V3())},Tn.apply(e,arguments)}function G3(){var e=tg(Id()).domain([1,10]);return e.copy=function(){return wa(e,G3()).base(e.base())},Tn.apply(e,arguments)}function Y3(){var e=rg(Id());return e.copy=function(){return wa(e,Y3()).constant(e.constant())},Tn.apply(e,arguments)}function hg(){var e=ng(Id());return e.copy=function(){return wa(e,hg()).exponent(e.exponent())},Tn.apply(e,arguments)}function iM(){return hg.apply(null,arguments).exponent(.5)}function X3(){var e=[],t=Pt;function r(n){if(n!=null&&!isNaN(n=+n))return t((sl(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(la),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>q9(e,i/n))},r.copy=function(){return X3(t).domain(e)},Tn.apply(r,arguments)}function Md(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=Pt,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-i)*(n*x<n*i?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function v(x){return function(y){var p,b,w;return arguments.length?([p,b,w]=y,u=vD(x,[p,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=v(xo),m.rangeRound=v(Q0),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),i=x(t),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function Q3(){var e=ba(Md()(Pt));return e.copy=function(){return wa(e,Q3())},Tn.apply(e,arguments)}function J3(){var e=tg(Md()).domain([.1,1,10]);return e.copy=function(){return wa(e,J3()).base(e.base())},Tn.apply(e,arguments)}function Z3(){var e=rg(Md());return e.copy=function(){return wa(e,Z3()).constant(e.constant())},Tn.apply(e,arguments)}function mg(){var e=ng(Md());return e.copy=function(){return wa(e,mg()).exponent(e.exponent())},Tn.apply(e,arguments)}function oM(){return mg.apply(null,arguments).exponent(.5)}const Yo=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:G0,scaleDiverging:Q3,scaleDivergingLog:J3,scaleDivergingPow:mg,scaleDivergingSqrt:oM,scaleDivergingSymlog:Z3,scaleIdentity:T3,scaleImplicit:Rm,scaleLinear:O3,scaleLog:D3,scaleOrdinal:V0,scalePoint:V9,scalePow:ag,scaleQuantile:$3,scaleQuantize:L3,scaleRadial:M3,scaleSequential:V3,scaleSequentialLog:G3,scaleSequentialPow:hg,scaleSequentialQuantile:X3,scaleSequentialSqrt:iM,scaleSequentialSymlog:Y3,scaleSqrt:FD,scaleSymlog:I3,scaleThreshold:R3,scaleTime:nM,scaleUtc:aM,tickFormat:P3},Symbol.toStringTag,{value:"Module"}));var hi=e=>e.chartData,sM=$([hi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),eN=(e,t,r,n)=>n?sM(e):hi(e);function co(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Wr(t)&&Wr(r))return!0}return!1}function j1(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function lM(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Wr(r))a=r;else if(typeof r=="function")return;if(Wr(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(co(o))return o}}function cM(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(co(n))return j1(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(ne(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&yx.test(a)){var c=yx.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ne(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&xx.test(i)){var d=xx.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(co(h))return t==null?h:j1(h,t,r)}}}var bo=1e9,uM={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gg,Ie=!0,_r="[DecimalError] ",Ga=_r+"Invalid argument: ",pg=_r+"Exponent out of range: ",wo=Math.floor,Oa=Math.pow,dM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,er,rt=1e7,Oe=7,tN=9007199254740991,yu=wo(tN/Oe),J={};J.absoluteValue=J.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};J.comparedTo=J.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};J.decimalPlaces=J.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Oe;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};J.dividedBy=J.div=function(e){return gn(this,new this.constructor(e))};J.dividedToIntegerBy=J.idiv=function(e){var t=this,r=t.constructor;return Se(gn(t,new r(e),0,1),r.precision)};J.equals=J.eq=function(e){return!this.cmp(e)};J.exponent=function(){return Ge(this)};J.greaterThan=J.gt=function(e){return this.cmp(e)>0};J.greaterThanOrEqualTo=J.gte=function(e){return this.cmp(e)>=0};J.isInteger=J.isint=function(){return this.e>this.d.length-2};J.isNegative=J.isneg=function(){return this.s<0};J.isPositive=J.ispos=function(){return this.s>0};J.isZero=function(){return this.s===0};J.lessThan=J.lt=function(e){return this.cmp(e)<0};J.lessThanOrEqualTo=J.lte=function(e){return this.cmp(e)<1};J.logarithm=J.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(er))throw Error(_r+"NaN");if(r.s<1)throw Error(_r+(r.s?"NaN":"-Infinity"));return r.eq(er)?new n(0):(Ie=!1,t=gn(Bs(r,i),Bs(e,i),i),Ie=!0,Se(t,a))};J.minus=J.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aN(t,e):rN(t,(e.s=-e.s,e))};J.modulo=J.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(_r+"NaN");return r.s?(Ie=!1,t=gn(r,e,0,1).times(e),Ie=!0,r.minus(t)):Se(new n(r),a)};J.naturalExponential=J.exp=function(){return nN(this)};J.naturalLogarithm=J.ln=function(){return Bs(this)};J.negated=J.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};J.plus=J.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rN(t,e):aN(t,(e.s=-e.s,e))};J.precision=J.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ga+e);if(t=Ge(a)+1,n=a.d.length-1,r=n*Oe+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};J.squareRoot=J.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(_r+"NaN")}for(e=Ge(l),Ie=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Xr(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=wo((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(gn(l,i,o+2)).times(.5),Xr(i.d).slice(0,o)===(t=Xr(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Se(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ie=!0,Se(n,r)};J.times=J.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%rt|0,t=l/rt|0;i[a]=(i[a]+t)%rt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ie?Se(e,f.precision):e};J.toDecimalPlaces=J.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(tn(e,0,bo),t===void 0?t=n.rounding:tn(t,0,8),Se(r,e+Ge(r)+1,t))};J.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ai(n,!0):(tn(e,0,bo),t===void 0?t=a.rounding:tn(t,0,8),n=Se(new a(n),e+1,t),r=ai(n,!0,e+1)),r};J.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ai(a):(tn(e,0,bo),t===void 0?t=i.rounding:tn(t,0,8),n=Se(new i(a),e+Ge(a)+1,t),r=ai(n.abs(),!1,e+Ge(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};J.toInteger=J.toint=function(){var e=this,t=e.constructor;return Se(new t(e),Ge(e)+1,t.rounding)};J.toNumber=function(){return+this};J.toPower=J.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(er);if(l=new c(l),!l.s){if(e.s<1)throw Error(_r+"Infinity");return l}if(l.eq(er))return l;if(n=c.precision,e.eq(er))return Se(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=tN){for(a=new c(er),t=Math.ceil(n/Oe+4),Ie=!1;r%2&&(a=a.times(l),N1(a.d,t)),r=wo(r/2),r!==0;)l=l.times(l),N1(l.d,t);return Ie=!0,e.s<0?new c(er).div(a):Se(a,n)}}else if(i<0)throw Error(_r+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ie=!1,a=e.times(Bs(l,n+u)),Ie=!0,a=nN(a),a.s=i,a};J.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ge(a),n=ai(a,r<=i.toExpNeg||r>=i.toExpPos)):(tn(e,1,bo),t===void 0?t=i.rounding:tn(t,0,8),a=Se(new i(a),e,t),r=Ge(a),n=ai(a,e<=r||r<=i.toExpNeg,e)),n};J.toSignificantDigits=J.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(tn(e,1,bo),t===void 0?t=n.rounding:tn(t,0,8)),Se(new n(r),e,t)};J.toString=J.valueOf=J.val=J.toJSON=J[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ge(e),r=e.constructor;return ai(e,t<=r.toExpNeg||t>=r.toExpPos)};function rN(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ie?Se(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Oe),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/rt|0,c[i]%=rt;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ie?Se(t,f):t}function tn(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ga+e)}function Xr(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Oe-n.length,r&&(i+=Wn(r)),i+=n;o=e[t],n=o+"",r=Oe-n.length,r&&(i+=Wn(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var gn=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%rt|0,o=i/rt|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*rt+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,v,x,y,p,b,w,j,S,N,C,_,A=n.constructor,k=n.s==a.s?1:-1,T=n.d,U=a.d;if(!n.s)return new A(n);if(!a.s)throw Error(_r+"Division by zero");for(c=n.e-a.e,C=U.length,S=T.length,m=new A(k),v=m.d=[],u=0;U[u]==(T[u]||0);)++u;if(U[u]>(T[u]||0)&&--c,i==null?b=i=A.precision:o?b=i+(Ge(n)-Ge(a))+1:b=i,b<0)return new A(0);if(b=b/Oe+2|0,u=0,C==1)for(d=0,U=U[0],b++;(u<S||d)&&b--;u++)w=d*rt+(T[u]||0),v[u]=w/U|0,d=w%U|0;else{for(d=rt/(U[0]+1)|0,d>1&&(U=e(U,d),T=e(T,d),C=U.length,S=T.length),j=C,x=T.slice(0,C),y=x.length;y<C;)x[y++]=0;_=U.slice(),_.unshift(0),N=U[0],U[1]>=rt/2&&++N;do d=0,l=t(U,x,C,y),l<0?(p=x[0],C!=y&&(p=p*rt+(x[1]||0)),d=p/N|0,d>1?(d>=rt&&(d=rt-1),f=e(U,d),h=f.length,y=x.length,l=t(f,x,h,y),l==1&&(d--,r(f,C<h?_:U,h))):(d==0&&(l=d=1),f=U.slice()),h=f.length,h<y&&f.unshift(0),r(x,f,y),l==-1&&(y=x.length,l=t(U,x,C,y),l<1&&(d++,r(x,C<y?_:U,y))),y=x.length):l===0&&(d++,x=[0]),v[u++]=d,l&&x[0]?x[y++]=T[j]||0:(x=[T[j]],y=1);while((j++<S||x[0]!==void 0)&&b--)}return v[0]||v.shift(),m.e=c,Se(m,o?i+Ge(m)+1:i)}}();function nN(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ge(e)>16)throw Error(pg+Ge(e));if(!e.s)return new d(er);for(t==null?(Ie=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Oa(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(er),d.precision=l;;){if(a=Se(a.times(e),l),r=r.times(++c),o=i.plus(gn(a,r,l)),Xr(o.d).slice(0,l)===Xr(i.d).slice(0,l)){for(;u--;)i=Se(i.times(i),l);return d.precision=f,t==null?(Ie=!0,Se(i,f)):i}i=o}}function Ge(e){for(var t=e.e*Oe,r=e.d[0];r>=10;r/=10)t++;return t}function Jf(e,t,r){if(t>e.LN10.sd())throw Ie=!0,r&&(e.precision=r),Error(_r+"LN10 precision limit exceeded");return Se(new e(e.LN10),t)}function Wn(e){for(var t="";e--;)t+="0";return t}function Bs(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,v=m.d,x=m.constructor,y=x.precision;if(m.s<1)throw Error(_r+(m.s?"NaN":"-Infinity"));if(m.eq(er))return new x(0);if(t==null?(Ie=!1,u=y):u=t,m.eq(10))return t==null&&(Ie=!0),Jf(x,u);if(u+=h,x.precision=u,r=Xr(v),n=r.charAt(0),i=Ge(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Xr(m.d),n=r.charAt(0),f++;i=Ge(m),n>1?(m=new x("0."+r),i++):m=new x(n+"."+r.slice(1))}else return c=Jf(x,u+2,y).times(i+""),m=Bs(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=y,t==null?(Ie=!0,Se(m,y)):m;for(l=o=m=gn(m.minus(er),m.plus(er),u),d=Se(m.times(m),u),a=3;;){if(o=Se(o.times(d),u),c=l.plus(gn(o,new x(a),u)),Xr(c.d).slice(0,u)===Xr(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Jf(x,u+2,y).times(i+""))),l=gn(l,new x(f),u),x.precision=y,t==null?(Ie=!0,Se(l,y)):l;l=c,a+=2}}function S1(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=wo(r/Oe),e.d=[],n=(r+1)%Oe,r<0&&(n+=Oe),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Oe;n<a;)e.d.push(+t.slice(n,n+=Oe));t=t.slice(n),n=Oe-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ie&&(e.e>yu||e.e<-yu))throw Error(pg+r)}else e.s=0,e.e=0,e.d=[0];return e}function Se(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Oe,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Oe),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Oe,a=n-Oe+o}if(r!==void 0&&(i=Oa(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Oa(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ge(e),f.length=1,t=t-i-1,f[0]=Oa(10,(Oe-t%Oe)%Oe),e.e=wo(-t/Oe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Oa(10,Oe-n),f[d]=a>0?(u/Oa(10,o-a)%Oa(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==rt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=rt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ie&&(e.e>yu||e.e<-yu))throw Error(pg+Ge(e));return e}function aN(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ie?Se(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Oe),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=rt-1;--c[i],c[a]+=rt}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ie?Se(t,m):t):new h(0)}function ai(e,t,r){var n,a=Ge(e),i=Xr(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wn(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Wn(-a-1)+i,r&&(n=r-o)>0&&(i+=Wn(n))):a>=o?(i+=Wn(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Wn(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Wn(n))),e.s<0?"-"+i:i}function N1(e,t){if(e.length>t)return e.length=t,!0}function iN(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ga+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return S1(o,i.toString())}else if(typeof i!="string")throw Error(Ga+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,dM.test(i))S1(o,i);else throw Error(Ga+i)}if(a.prototype=J,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=iN,a.config=a.set=fM,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function fM(e){if(!e||typeof e!="object")throw Error(_r+"Object expected");var t,r,n,a=["precision",1,bo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(wo(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Ga+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ga+r+": "+n);return this}var gg=iN(uM);er=new gg(1);const be=gg;var hM=e=>e,oN={"@@functional/placeholder":!0},sN=e=>e===oN,C1=e=>function t(){return arguments.length===0||arguments.length===1&&sN(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},lN=(e,t)=>e===1?t:C1(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==oN).length;return i>=e?t(...n):lN(e-i,C1(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>sN(d)?l.shift():d);return t(...u,...l)}))}),$d=e=>lN(e.length,e),Bm=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mM=$d((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),pM=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hM;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},Wm=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),cN=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function uN(e){var t;return e===0?t=1:t=Math.floor(new be(e).abs().log(10).toNumber())+1,t}function dN(e,t,r){for(var n=new be(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}$d((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});$d((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});$d((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var fN=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},hN=(e,t,r)=>{if(e.lte(0))return new be(0);var n=uN(e.toNumber()),a=new be(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new be(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new be(c.toNumber()):new be(Math.ceil(c.toNumber()))},gM=(e,t,r)=>{var n=new be(1),a=new be(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new be(10).pow(uN(e)-1),a=new be(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new be(Math.floor(e)))}else e===0?a=new be(Math.floor((t-1)/2)):r||(a=new be(Math.floor(e)));var o=Math.floor((t-1)/2),l=pM(mM(c=>a.add(new be(c-o).mul(n)).toNumber()),Bm);return l(0,t)},mN=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new be(0),tickMin:new be(0),tickMax:new be(0)};var o=hN(new be(r).sub(t).div(n-1),a,i),l;t<=0&&r>=0?l=new be(0):(l=new be(t).add(r).div(2),l=l.sub(new be(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new be(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?mN(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new be(c).mul(o)),tickMax:l.add(new be(u).mul(o))})};function vM(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=fN([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...Bm(0,n-1).map(()=>1/0)]:[...Bm(0,n-1).map(()=>-1/0),l];return t>r?Wm(c):c}if(o===l)return gM(o,n,a);var{step:u,tickMin:d,tickMax:f}=mN(o,l,i,a,0),h=dN(d,f.add(new be(.1).mul(u)),u);return t>r?Wm(h):h}function yM(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=fN([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=hN(new be(o).sub(i).div(l-1),a,0),u=[...dN(new be(i),new be(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Wm(u):u}var xM=cN(vM),bM=cN(yM),wM=e=>e.rootProps.barCategoryGap,Ld=e=>e.rootProps.stackOffset,vg=e=>e.options.chartName,yg=e=>e.rootProps.syncId,pN=e=>e.rootProps.syncMethod,xg=e=>e.options.eventEmitter,ln={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Jt={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},Rd=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},jM={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ln.angleAxisId,includeHidden:!1,name:void 0,reversed:ln.reversed,scale:ln.scale,tick:ln.tick,tickCount:void 0,ticks:void 0,type:ln.type,unit:void 0},SM={allowDataOverflow:Jt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jt.scale,tick:Jt.tick,tickCount:Jt.tickCount,ticks:void 0,type:Jt.type,unit:void 0},NM={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ln.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ln.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ln.scale,tick:ln.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},CM={allowDataOverflow:Jt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jt.scale,tick:Jt.tick,tickCount:Jt.tickCount,ticks:void 0,type:"category",unit:void 0},bg=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NM:jM,wg=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?CM:SM,zd=e=>e.polarOptions,jg=$([Pn,On,gt],NT),gN=$([zd,jg],(e,t)=>{if(e!=null)return fa(e.innerRadius,t,0)}),vN=$([zd,jg],(e,t)=>{if(e!=null)return fa(e.outerRadius,t,t*.8)}),_M=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},yN=$([zd],_M);$([bg,yN],Rd);var xN=$([jg,gN,vN],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});$([wg,xN],Rd);var kM=$([Fe,zd,gN,vN,Pn,On],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:fa(o,a,a/2),cy:fa(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ot=(e,t)=>t,Fd=(e,t,r)=>r;function _1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_1(Object(r),!0).forEach(function(n){EM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EM(e,t,r){return(t=PM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PM(e){var t=OM(e,"string");return typeof t=="symbol"?t:t+""}function OM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qm=[0,"auto"],Yt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},An=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Yt},Xt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qm,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:_d},ja=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Xt},TM={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Sg=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??TM},Kt=(e,t,r)=>{switch(t){case"xAxis":return An(e,r);case"yAxis":return ja(e,r);case"zAxis":return Sg(e,r);case"angleAxis":return bg(e,r);case"radiusAxis":return wg(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},AM=(e,t,r)=>{switch(t){case"xAxis":return An(e,r);case"yAxis":return ja(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dl=(e,t,r)=>{switch(t){case"xAxis":return An(e,r);case"yAxis":return ja(e,r);case"angleAxis":return bg(e,r);case"radiusAxis":return wg(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bN=e=>e.graphicalItems.countOfBars>0;function wN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var jN=e=>e.graphicalItems.cartesianItems,DM=$([ot,Fd],wN),SN=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),fl=$([jN,Kt,DM],SN),NN=e=>e.filter(t=>t.stackId===void 0),IM=$([fl],NN),CN=e=>e.map(t=>t.data).filter(Boolean).flat(1),MM=$([fl],CN),_N=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Ud=$([MM,eN],_N),kN=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ar(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:ar(a,n)}))):e.map(n=>({value:n})),Bd=$([Ud,Kt,fl],kN);function EN(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function mi(e){return e.filter(t=>en(t)||t instanceof Date).map(Number).filter(t=>Nr(t)===!1)}function $M(e,t,r){return!r||typeof t!="number"||Nr(t)?[]:r.length?mi(r.flatMap(n=>{var a=ar(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Wr(i)||!Wr(o)))return[t-i,t+o]})):[]}var PN=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,l]=i,c=l.map(u=>u.dataKey);return[o,{stackedData:zT(e,c,r),graphicalItems:l}]}))},LM=$([Ud,fl,Ld],PN),ON=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=WT(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},RM=$([LM,hi,ot],ON),TN=(e,t,r,n)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>EN(n,d)),u=ar(a,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:$M(a,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:ar(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),zM=$(Ud,Kt,IM,ot,TN);function FM(e){var{value:t}=e;if(en(t)||t instanceof Date)return t}var UM=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=mi(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},BM=(e,t,r)=>{var n=e.map(FM).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Pj(n))?x3(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Ng=e=>{var t;if(e==null||!("domain"in e))return qm;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=mi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:qm},Cg=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},AN=e=>e.referenceElements.dots,jo=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),WM=$([AN,ot,Fd],jo),DN=e=>e.referenceElements.areas,qM=$([DN,ot,Fd],jo),IN=e=>e.referenceElements.lines,HM=$([IN,ot,Fd],jo),MN=(e,t)=>{var r=mi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KM=$(WM,ot,MN),$N=(e,t)=>{var r=mi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},VM=$([qM,ot],$N),LN=(e,t)=>{var r=mi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},GM=$(HM,ot,LN),YM=$(KM,GM,VM,(e,t,r)=>Cg(e,r,t)),XM=$([Kt],Ng),RN=(e,t,r,n,a)=>{var i=lM(t,e.allowDataOverflow);return i??cM(t,Cg(r,a,UM(n)),e.allowDataOverflow)},QM=$([Kt,XM,RM,zM,YM],RN),JM=[0,1],zN=(e,t,r,n,a,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,u=xa(t,i);return u&&l==null?x3(0,r.length):c==="category"?BM(n,e,u):a==="expand"?JM:o}},_g=$([Kt,Fe,Ud,Bd,Ld,ot,QM],zN),FN=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(al(i));return l in Yo?l:"point"}}},hl=$([Kt,Fe,bN,vg,ot],FN);function ZM(e){if(e!=null){if(e in Yo)return Yo[e]();var t="scale".concat(al(e));if(t in Yo)return Yo[t]()}}function kg(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=ZM(t);if(a!=null){var i=a.domain(r).range(n);return MT(i),i}}}var UN=(e,t,r)=>{var n=Ng(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&co(e))return xM(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&co(e))return bM(e,t.tickCount,t.allowDecimals)}},Eg=$([_g,dl,hl],UN),BN=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&co(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,i),Math.max(o,l)]}return t},e$=$([Kt,_g,Eg,ot],BN),t$=$(Bd,Kt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(mi(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),WN=$(t$,Fe,wM,gt,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Wr(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=fa(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),r$=(e,t)=>{var r=An(e,t);return r==null||typeof r.padding!="string"?0:WN(e,"xAxis",t,r.padding)},n$=(e,t)=>{var r=ja(e,t);return r==null||typeof r.padding!="string"?0:WN(e,"yAxis",t,r.padding)},a$=$(An,r$,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),i$=$(ja,n$,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),o$=$([gt,a$,Ed,kd,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),s$=$([gt,Fe,i$,Ed,kd,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ml=(e,t,r,n)=>{var a;switch(t){case"xAxis":return o$(e,r,n);case"yAxis":return s$(e,r,n);case"zAxis":return(a=Sg(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return yN(e);case"radiusAxis":return xN(e,r);default:return}},qN=$([Kt,ml],Rd),So=$([Kt,hl,e$,qN],kg);$(fl,ot,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>EN(t,r)));function HN(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Wd=(e,t)=>t,qd=(e,t,r)=>r,l$=$(R0,Wd,qd,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(HN)),c$=$(z0,Wd,qd,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(HN)),KN=(e,t)=>({width:e.width,height:t.height}),u$=(e,t)=>{var r=typeof t.width=="number"?t.width:_d;return{width:r,height:e.height}},d$=$(gt,An,KN),f$=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},h$=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},m$=$(On,gt,l$,Wd,qd,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=KN(t,l);o==null&&(o=f$(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),p$=$(Pn,gt,c$,Wd,qd,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=u$(t,l);o==null&&(o=h$(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),g$=(e,t)=>{var r=gt(e),n=An(e,t);if(n!=null){var a=m$(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},v$=(e,t)=>{var r=gt(e),n=ja(e,t);if(n!=null){var a=p$(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},y$=$(gt,ja,(e,t)=>{var r=typeof t.width=="number"?t.width:_d;return{width:r,height:e.height}}),VN=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,l=xa(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&a&&Pj(c))return c}},Pg=$([Fe,Bd,Kt,ot],VN),GN=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=xa(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(l=>l.value)}},Og=$([Fe,Bd,dl,ot],GN),k1=$([Fe,AM,hl,So,Pg,Og,ml,Eg,ot],(e,t,r,n,a,i,o,l,c)=>{if(t==null)return null;var u=xa(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),x$=(e,t,r,n,a,i,o,l,c)=>{if(!(t==null||n==null)){var u=xa(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=d==="category"&&n.bandwidth?n.bandwidth()/m:0;v=c==="angleAxis"&&i!=null&&i.length>=2?yr(i[0]-i[1])*2*v:v;var x=f||a;if(x){var y=x.map((p,b)=>{var w=o?o.indexOf(p):p;return{index:b,coordinate:n(w)+v,value:p,offset:v}});return y.filter(p=>!Nr(p.coordinate))}return u&&l?l.map((p,b)=>({coordinate:n(p)+v,value:p,index:b,offset:v})):n.ticks?n.ticks(h).map(p=>({coordinate:n(p)+v,value:p,offset:v})):n.domain().map((p,b)=>({coordinate:n(p)+v,value:o?o[p]:p,index:b,offset:v}))}},YN=$([Fe,dl,hl,So,Eg,ml,Pg,Og,ot],x$),b$=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=xa(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?yr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},XN=$([Fe,dl,So,ml,Pg,Og,ot],b$),Hd=$(Kt,So,(e,t)=>{if(!(e==null||t==null))return xu(xu({},e),{},{scale:t})}),w$=$([Kt,hl,_g,qN],kg);$((e,t,r)=>Sg(e,r),w$,(e,t)=>{if(!(e==null||t==null))return xu(xu({},e),{},{scale:t})});var j$=$([Fe,R0,z0],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),QN=e=>e.options.defaultTooltipEventType,JN=e=>e.options.validateTooltipEventTypes;function ZN(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Tg(e,t){var r=QN(e),n=JN(e);return ZN(t,r,n)}function S$(e){return ie(t=>Tg(t,e))}var eC=(e,t)=>{var r,n=Number(t);if(!(Nr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},N$=e=>e.tooltip.settings,Yn={active:!1,index:null,dataKey:void 0,coordinate:void 0},C$={itemInteraction:{click:Yn,hover:Yn},axisInteraction:{click:Yn,hover:Yn},keyboardInteraction:Yn,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tC=Er({name:"tooltip",initialState:C$,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=pn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:_$,removeTooltipEntrySettings:k$,setTooltipSettingsState:E$,setActiveMouseOverItemIndex:P$,mouseLeaveItem:oW,mouseLeaveChart:rC,setActiveClickItemIndex:sW,setMouseOverAxisIndex:nC,setMouseClickAxisIndex:O$,setSyncInteraction:Hm,setKeyboardInteraction:Km}=tC.actions,T$=tC.reducer;function E1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(r),!0).forEach(function(n){A$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A$(e,t,r){return(t=D$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D$(e){var t=I$(e,"string");return typeof t=="symbol"?t:t+""}function I$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M$(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $$(e){return e.index!=null}var aC=(e,t,r,n)=>{if(t==null)return Yn;var a=M$(e,t,r);if(a==null)return Yn;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($$(a)){if(i)return ec(ec({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return ec(ec({},Yn),{},{coordinate:a.coordinate})},Ag=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Wr(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},iC=(e,t,r,n,a,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},oC=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},pl=e=>e.options.tooltipPayloadSearcher,No=e=>e.tooltip;function P1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P1(Object(r),!0).forEach(function(n){L$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L$(e,t,r){return(t=R$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R$(e){var t=z$(e,"string");return typeof t=="symbol"?t:t+""}function z$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F$(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function U$(e,t){return e??t}var sC=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var v,{dataDefinedOnItem:x,settings:y}=m,p=U$(x,l),b=F$(p,u,d),w=(v=y==null?void 0:y.dataKey)!==null&&v!==void 0?v:n==null?void 0:n.dataKey,j=y==null?void 0:y.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?S=Oj(b,n.dataKey,a):S=i(b,t,c,j),Array.isArray(S))S.forEach(C=>{var _=O1(O1({},y),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(bx({tooltipEntrySettings:_,dataKey:C.dataKey,payload:C.payload,value:ar(C.payload,C.dataKey),name:C.name}))});else{var N;h.push(bx({tooltipEntrySettings:y,dataKey:w,payload:S,value:ar(S,w),name:(N=ar(S,j))!==null&&N!==void 0?N:y==null?void 0:y.name}))}return h},f)}},st=e=>{var t=Fe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Co=e=>e.tooltip.settings.axisId,vt=e=>{var t=st(e),r=Co(e);return dl(e,t,r)},Dg=$([vt,Fe,bN,vg,st],FN),B$=$([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),W$=$([st,Co],wN),Kd=$([B$,vt,W$],SN),q$=$([Kd],CN),pi=$([q$,hi],_N),Ig=$([pi,vt,Kd],kN),H$=$([vt],Ng),K$=$([pi,Kd,Ld],PN),V$=$([K$,hi,st],ON),G$=$([Kd],NN),Y$=$([pi,vt,G$,st],TN),X$=$([AN,st,Co],jo),Q$=$([X$,st],MN),J$=$([DN,st,Co],jo),Z$=$([J$,st],$N),eL=$([IN,st,Co],jo),tL=$([eL,st],LN),rL=$([Q$,tL,Z$],Cg),nL=$([vt,H$,V$,Y$,rL],RN),lC=$([vt,Fe,pi,Ig,Ld,st,nL],zN),aL=$([lC,vt,Dg],UN),iL=$([vt,lC,aL,st],BN),cC=e=>{var t=st(e),r=Co(e),n=!1;return ml(e,t,r,n)},uC=$([vt,cC],Rd),dC=$([vt,Dg,iL,uC],kg),oL=$([Fe,Ig,vt,st],VN),sL=$([Fe,Ig,vt,st],GN),lL=(e,t,r,n,a,i,o,l)=>{if(t){var{type:c}=t,u=xa(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?yr(a[0]-a[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},Dn=$([Fe,vt,Dg,dC,cC,oL,sL,st],lL),Mg=$([QN,JN,N$],(e,t,r)=>ZN(r.shared,e,t)),fC=e=>e.tooltip.settings.trigger,$g=e=>e.tooltip.settings.defaultIndex,Vd=$([No,Mg,fC,$g],aC),Ws=$([Vd,pi],Ag),hC=$([Dn,Ws],eC),cL=$([Vd],e=>{if(e)return e.dataKey}),mC=$([No,Mg,fC,$g],oC),uL=$([Pn,On,Fe,gt,Dn,$g,mC,pl],iC),dL=$([Vd,uL],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),fL=$([Vd],e=>e.active),hL=$([mC,Ws,hi,vt,hC,pl,Mg],sC),mL=$([hL],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function T1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T1(Object(r),!0).forEach(function(n){pL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pL(e,t,r){return(t=gL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gL(e){var t=vL(e,"string");return typeof t=="symbol"?t:t+""}function vL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yL=()=>ie(vt),xL=()=>{var e=yL(),t=ie(Dn),r=ie(dC);return _m(A1(A1({},e),{},{scale:r}),t)},bL=()=>ie(vg),Lg=(e,t)=>t,pC=(e,t,r)=>r,Rg=(e,t,r,n)=>n,wL=$(Dn,e=>xd(e,t=>t.coordinate)),zg=$([No,Lg,pC,Rg],aC),gC=$([zg,pi],Ag),jL=(e,t,r)=>{if(t!=null){var n=No(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},vC=$([No,Lg,pC,Rg],oC),bu=$([Pn,On,Fe,gt,Dn,Rg,vC,pl],iC),SL=$([zg,bu],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),yC=$(Dn,gC,eC),NL=$([vC,gC,hi,vt,yC,pl,Lg],sC),CL=$([zg],e=>({isActive:e.active,activeIndex:e.index})),_L=(e,t,r,n,a,i,o,l)=>{if(!(!e||!t||!n||!a||!i)){var c=qT(e.chartX,e.chartY,t,r,l);if(c){var u=KT(c,t),d=DT(u,o,i,n,a),f=HT(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vm.apply(null,arguments)}function D1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D1(Object(r),!0).forEach(function(n){kL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kL(e,t,r){return(t=EL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EL(e){var t=PL(e,"string");return typeof t=="symbol"?t:t+""}function PL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OL(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,v;if(u==="ScatterChart")m=d,v=VA;else if(u==="BarChart")m=GA(o,d,a,i),v=_9;else if(o==="radial"){var{cx:x,cy:y,radius:p,startAngle:b,endAngle:w}=m3(d);m={cx:x,cy:y,startAngle:b,endAngle:w,innerRadius:p,outerRadius:p},v=O9}else m={points:T9(o,d,a)},v=o3;var j=typeof l=="object"&&"className"in l?l.className:void 0,S=tc(tc(tc(tc({stroke:"#ccc",pointerEvents:"none"},a),m),Ee(l,!1)),{},{payload:f,payloadIndex:h,className:je("recharts-tooltip-cursor",j)});return g.isValidElement(l)?g.cloneElement(l,S):g.createElement(v,S)}function TL(e){var t=xL(),r=n3(),n=W0(),a=bL();return g.createElement(OL,Vm({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var xC=g.createContext(null),AL=()=>g.useContext(xC),bC={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,v=new Array(m);h<m;h++)v[h]=f[h].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,v){var x=r?r+u:u;if(!this._events[x])return!1;var y=this._events[x],p=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),p){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,v),!0}for(w=1,b=new Array(p-1);w<p;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var j=y.length,S;for(w=0;w<j;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),p){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!b)for(S=1,b=new Array(p-1);S<p;S++)b[S-1]=arguments[S];y[w].fn.apply(y[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!h||v.once)&&(!f||v.context===f)&&o(this,m);else{for(var x=0,y=[],p=v.length;x<p;x++)(v[x].fn!==d||h&&!v[x].once||f&&v[x].context!==f)&&y.push(v[x]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(bC);var DL=bC.exports;const IL=_n(DL);var qs=new IL,Gm="recharts.syncEvent.tooltip",I1="recharts.syncEvent.brush";function ML(e,t){if(t){var r=Number.parseInt(t,10);if(!Nr(r))return e==null?void 0:e[r]}}var $L={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wC=Er({name:"options",initialState:$L,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),LL=wC.reducer,{createEventEmitter:RL}=wC.actions;function zL(e){return e.tooltip.syncInteraction}var FL={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},jC=Er({name:"chartData",initialState:FL,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:M1,setDataStartEndIndexes:UL,setComputedData:lW}=jC.actions,BL=jC.reducer,SC=()=>{};function WL(){var e=ie(yg),t=ie(xg),r=pt(),n=ie(pN),a=ie(Dn),i=W0(),o=F0(),l=ie(c=>c.rootProps.className);g.useEffect(()=>{if(e==null)return SC;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},v=n(a,m);h=a[v]}else n==="value"&&(h=a.find(N=>String(N.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(Hm({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:y,y:p}=x,b=Math.min(y,o.x+o.width),w=Math.min(p,o.y+o.height),j={x:i==="horizontal"?h.coordinate:b,y:i==="horizontal"?w:h.coordinate},S=Hm({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(S)}}};return qs.on(Gm,c),()=>{qs.off(Gm,c)}},[l,r,t,e,n,a,i,o])}function qL(){var e=ie(yg),t=ie(xg),r=pt();g.useEffect(()=>{if(e==null)return SC;var n=(a,i,o)=>{t!==o&&e===a&&r(UL(i))};return qs.on(I1,n),()=>{qs.off(I1,n)}},[r,t,e])}function HL(){var e=pt();g.useEffect(()=>{e(RL())},[e]),WL(),qL()}function KL(e,t,r,n,a,i){var o=ie(h=>jL(h,e,t)),l=ie(xg),c=ie(yg),u=ie(pN),d=ie(zL),f=d==null?void 0:d.active;g.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=Hm({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});qs.emit(Gm,c,h,l)}},[f,r,o,a,n,l,c,u,i])}function $1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$1(Object(r),!0).forEach(function(n){VL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VL(e,t,r){return(t=GL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GL(e){var t=YL(e,"string");return typeof t=="symbol"?t:t+""}function YL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XL(e){return e.dataKey}function QL(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(CA,t)}var R1=[],JL={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ol.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZL(e){var t=ui(e,JL),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:v,cursor:x,shared:y,trigger:p,defaultIndex:b,portal:w,axisId:j}=t,S=pt(),N=typeof b=="number"?String(b):b;g.useEffect(()=>{S(E$({shared:y,trigger:p,axisId:j,active:r,defaultIndex:N}))},[S,y,p,j,r,N]);var C=F0(),_=i3(),A=S$(y),{activeIndex:k,isActive:T}=ie(ce=>CL(ce,A,p,N)),U=ie(ce=>NL(ce,A,p,N)),I=ie(ce=>yC(ce,A,p,N)),ee=ie(ce=>SL(ce,A,p,N)),te=U,B=AL(),E=r??T,[O,M]=kS([te,E]),q=A==="axis"?I:void 0;KL(A,p,ee,q,k,E);var K=w??B;if(K==null)return null;var V=te??R1;E||(V=R1),l&&V.length&&(V=pS(te.filter(ce=>ce.value!=null&&(ce.hide!==!0||t.includeHidden)),d,XL));var le=V.length>0,ge=g.createElement(AA,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:c,active:E,coordinate:ee,hasPayload:le,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:C,wrapperStyle:v,lastBoundingBox:O,innerRef:M,hasPortalFromProps:!!w},QL(o,L1(L1({},t),{},{payload:V,label:q,active:E,coordinate:ee,accessibilityLayer:_})));return g.createElement(g.Fragment,null,Qp.createPortal(ge,K),E&&g.createElement(TL,{cursor:x,tooltipEventType:A,coordinate:ee,payload:te,index:k}))}var NC={},CC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,l=null,c=0,u=null,d;const{leading:f=!1,trailing:h=!0,maxWait:m}=a,v="maxWait"in a,x=v?Math.max(Number(m)||0,n):0,y=C=>(i!==null&&(d=r.apply(o,i)),i=o=null,c=C,d),p=C=>(c=C,u=setTimeout(S,n),f&&i!==null?y(C):d),b=C=>(u=null,h&&i!==null?y(C):d),w=C=>{if(l===null)return!0;const _=C-l,A=_>=n||_<0,k=v&&C-c>=x;return A||k},j=C=>{const _=l===null?0:C-l,A=n-_,k=x-(C-c);return v?Math.min(A,k):A},S=()=>{const C=Date.now();if(w(C))return b(C);u=setTimeout(S,j(C))},N=function(...C){const _=Date.now(),A=w(_);if(i=C,o=this,l=_,A){if(u===null)return p(_);if(v)return clearTimeout(u),u=setTimeout(S,n),y(_)}return u===null&&(u=setTimeout(S,n)),d};return N.cancel=()=>{u!==null&&clearTimeout(u),c=0,l=i=o=u=null},N.flush=()=>u===null?d:b(Date.now()),N}e.debounce=t})(CC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CC;function r(n,a=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(NC);var eR=NC.throttle;const tR=_n(eR);var us=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function z1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z1(Object(r),!0).forEach(function(n){rR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rR(e,t,r){return(t=nR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nR(e){var t=aR(e,"string");return typeof t=="symbol"?t:t+""}function aR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iR=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:v={}}=e,x=g.useRef(null),y=g.useRef();y.current=m,g.useImperativeHandle(t,()=>x.current);var[p,b]=g.useState({containerWidth:n.width,containerHeight:n.height}),w=g.useCallback((S,N)=>{b(C=>{var _=Math.round(S),A=Math.round(N);return C.containerWidth===_&&C.containerHeight===A?C:{containerWidth:_,containerHeight:A}})},[]);g.useEffect(()=>{var S=A=>{var k,{width:T,height:U}=A[0].contentRect;w(T,U),(k=y.current)===null||k===void 0||k.call(y,T,U)};d>0&&(S=tR(S,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(S),{width:C,height:_}=x.current.getBoundingClientRect();return w(C,_),N.observe(x.current),()=>{N.disconnect()}},[w,d]);var j=g.useMemo(()=>{var{containerWidth:S,containerHeight:N}=p;if(S<0||N<0)return null;us(La(a)||La(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),us(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=La(a)?S:a,_=La(i)?N:i;return r&&r>0&&(C?_=C/r:_&&(C=_*r),c&&_>c&&(_=c)),us(C>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,_,a,i,o,l,r),g.Children.map(u,A=>g.cloneElement(A,{width:C,height:_,style:Zf({width:C,height:_},A.props.style)}))},[r,u,i,c,l,o,p,a]);return g.createElement("div",{id:f?"".concat(f):void 0,className:je("recharts-responsive-container",h),style:Zf(Zf({},v),{},{width:a,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},g.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function F1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F1(Object(r),!0).forEach(function(n){oR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oR(e,t,r){return(t=sR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sR(e){var t=lR(e,"string");return typeof t=="symbol"?t:t+""}function lR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ji={widthCache:{},cacheCount:0},cR=2e3,uR={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},U1="recharts_measurement_span";function dR(e){var t=Ym({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var ds=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ol.isSsr)return{width:0,height:0};var n=dR(r),a=JSON.stringify({text:t,copyStyle:n});if(ji.widthCache[a])return ji.widthCache[a];try{var i=document.getElementById(U1);i||(i=document.createElement("span"),i.setAttribute("id",U1),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Ym(Ym({},uR),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ji.widthCache[a]=c,++ji.cacheCount>cR&&(ji.cacheCount=0,ji.widthCache={}),c}catch{return{width:0,height:0}}},B1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fR=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,hR=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_C={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mR=Object.keys(_C),Li="NaN";function pR(e,t){return e*_C[t]}class $t{static parse(t){var r,[,n,a]=(r=hR.exec(t))!==null&&r!==void 0?r:[];return new $t(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Nr(t)&&(this.unit=""),r!==""&&!fR.test(r)&&(this.num=NaN,this.unit=""),mR.includes(r)&&(this.num=pR(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new $t(NaN,""):new $t(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new $t(NaN,""):new $t(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $t(NaN,""):new $t(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new $t(NaN,""):new $t(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nr(this.num)}}function kC(e){if(e.includes(Li))return Li;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=B1.exec(t))!==null&&r!==void 0?r:[],o=$t.parse(n??""),l=$t.parse(i??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Li;t=t.replace(B1,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=W1.exec(t))!==null&&u!==void 0?u:[],m=$t.parse(d??""),v=$t.parse(h??""),x=f==="+"?m.add(v):m.subtract(v);if(x.isNaN())return Li;t=t.replace(W1,x.toString())}return t}var q1=/\(([^()]*)\)/;function gR(e){for(var t=e,r;(r=q1.exec(t))!=null;){var[,n]=r;t=t.replace(q1,kC(n))}return t}function vR(e){var t=e.replace(/\s+/g,"");return t=gR(t),t=kC(t),t}function yR(e){try{return vR(e)}catch{return Li}}function eh(e){var t=yR(e.slice(5,-1));return t===Li?"":t}var xR=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bR=["dx","dy","angle","className","breakAll"];function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(null,arguments)}function H1(e,t){if(e==null)return{};var r,n,a=wR(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EC=/[ \f\n\r\t\v\u2028\u2029]+/,PC=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];We(t)||(r?a=t.toString().split(""):a=t.toString().split(EC));var i=a.map(l=>({word:l,width:ds(l,n).width})),o=r?0:ds(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},jR=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ne(i),d=o,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce((U,I)=>{var{word:ee,width:te}=I,B=U[U.length-1];if(B&&(n==null||a||B.width+te+r<Number(n)))B.words.push(ee),B.width+=te+r;else{var E={words:[ee],width:te};U.push(E)}return U},[])},h=f(t),m=k=>k.reduce((T,U)=>T.width>U.width?T:U);if(!u||a)return h;var v=h.length>i||m(h).width>Number(n);if(!v)return h;for(var x="…",y=k=>{var T=d.slice(0,k),U=PC({breakAll:c,style:l,children:T+x}).wordsWithComputedWidth,I=f(U),ee=I.length>i||m(I).width>Number(n);return[ee,I]},p=0,b=d.length-1,w=0,j;p<=b&&w<=d.length-1;){var S=Math.floor((p+b)/2),N=S-1,[C,_]=y(N),[A]=y(S);if(!C&&!A&&(p=S+1),C&&A&&(b=S-1),!C&&A){j=_;break}w++}return j||h},K1=e=>{var t=We(e)?[]:e.toString().split(EC);return[{words:t}]},SR=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!ol.isSsr){var l,c,u=PC({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return K1(n);return jR({breakAll:i,children:n,maxLines:o,style:a},l,c,t,r)}return K1(n)},V1="#808080",Fg=g.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=V1}=e,d=H1(e,xR),f=g.useMemo(()=>SR({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:v,className:x,breakAll:y}=d,p=H1(d,bR);if(!en(r)||!en(n))return null;var b=r+(ne(h)?h:0),w=n+(ne(m)?m:0),j;switch(c){case"start":j=eh("calc(".concat(i,")"));break;case"middle":j=eh("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:j=eh("calc(".concat(f.length-1," * -").concat(a,")"));break}var S=[];if(o){var N=f[0].width,{width:C}=d;S.push("scale(".concat(ne(C)?C/N:1,")"))}return v&&S.push("rotate(".concat(v,", ").concat(b,", ").concat(w,")")),S.length&&(p.transform=S.join(" ")),g.createElement("text",Xm({},Ee(p,!0),{ref:t,x:b,y:w,className:je("recharts-text",x),textAnchor:l,fill:u.includes("url")?V1:u}),f.map((_,A)=>{var k=_.words.join(y?"":" ");return g.createElement("tspan",{x:b,dy:A===0?j:a,key:"".concat(k,"-").concat(A)},k)}))});Fg.displayName="Text";var NR=["offset"],CR=["labelRef"];function G1(e,t){if(e==null)return{};var r,n,a=_R(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _R(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Y1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y1(Object(r),!0).forEach(function(n){kR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kR(e,t,r){return(t=ER(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ER(e){var t=PR(e,"string");return typeof t=="symbol"?t:t+""}function PR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cn.apply(null,arguments)}var OR=e=>{var{value:t,formatter:r}=e,n=We(e.children)?t:e.children;return typeof r=="function"?r(n):n},Ug=e=>e!=null&&typeof e=="function",TR=(e,t)=>{var r=yr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AR=(e,t,r)=>{var{position:n,viewBox:a,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=a,v=(u+d)/2,x=TR(f,h),y=x>=0?1:-1,p,b;n==="insideStart"?(p=f+y*i,b=m):n==="insideEnd"?(p=h-y*i,b=!m):n==="end"&&(p=h+y*i,b=m),b=x<=0?b:!b;var w=ft(l,c,v,p),j=ft(l,c,v,p+(b?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),N=We(e.id)?Is("recharts-radial-line-"):e.id;return g.createElement("text",cn({},r,{dominantBaseline:"central",className:je("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:N,d:S})),g.createElement("textPath",{xlinkHref:"#".concat(N)},t))},DR=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:h}=ft(a,i,l+r,d);return{x:f,y:h,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(o+l)/2,{x:v,y:x}=ft(a,i,m,d);return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},IR=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,v=m*n,x=m>0?"end":"start",y=m>0?"start":"end";if(a==="top"){var p={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return He(He({},p),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var b={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return He(He({},b),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var w={x:i-v,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return He(He({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:i+l+v,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return He(He({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var S=r?{width:l,height:c}:{};return a==="insideLeft"?He({x:i+v,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},S):a==="insideRight"?He({x:i+l-v,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},S):a==="insideTop"?He({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},S):a==="insideBottom"?He({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},S):a==="insideTopLeft"?He({x:i+v,y:o+d,textAnchor:y,verticalAnchor:h},S):a==="insideTopRight"?He({x:i+l-v,y:o+d,textAnchor:x,verticalAnchor:h},S):a==="insideBottomLeft"?He({x:i+v,y:o+c-d,textAnchor:y,verticalAnchor:f},S):a==="insideBottomRight"?He({x:i+l-v,y:o+c-d,textAnchor:x,verticalAnchor:f},S):a&&typeof a=="object"&&(ne(a.x)||La(a.x))&&(ne(a.y)||La(a.y))?He({x:i+fa(a.x,l),y:o+fa(a.y,c),textAnchor:"end",verticalAnchor:"end"},S):He({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},MR=e=>"cx"in e&&ne(e.cx);function Zt(e){var{offset:t=5}=e,r=G1(e,NR),n=He({offset:t},r),{viewBox:a,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=F0(),m=a||h;if(!m||We(o)&&We(l)&&!g.isValidElement(c)&&typeof c!="function")return null;if(g.isValidElement(c)){var v=G1(n,CR);return g.cloneElement(c,v)}var x;if(typeof c=="function"){if(x=g.createElement(c,n),g.isValidElement(x))return x}else x=OR(n);var y=MR(m),p=Ee(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return AR(n,x,p);var b=y?DR(n):IR(n,m);return g.createElement(Fg,cn({ref:f,className:je("recharts-label",u)},p,b,{breakAll:d}),x)}Zt.displayName="Label";var OC=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:v,height:x,clockWise:y,labelViewBox:p}=e;if(p)return p;if(ne(v)&&ne(x)){if(ne(d)&&ne(f))return{x:d,y:f,width:v,height:x};if(ne(h)&&ne(m))return{x:h,y:m,width:v,height:x}}if(ne(d)&&ne(f))return{x:d,y:f,width:0,height:0};if(ne(t)&&ne(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:y};if(e.viewBox)return e.viewBox},$R=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(Zt,cn({key:"label-implicit"},n)):en(e)?g.createElement(Zt,cn({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===Zt?g.cloneElement(e,He({key:"label-implicit"},n)):g.createElement(Zt,cn({key:"label-implicit",content:e},n)):Ug(e)?g.createElement(Zt,cn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(Zt,cn({},e,{key:"label-implicit"},n)):null},LR=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,o=OC(t),l=Dj(a,Zt).map((u,d)=>g.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=$R(t.label,r||o,i);return[c,...l]};Zt.parseViewBox=OC;Zt.renderCallByParent=LR;var TC={},AC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(AC);var DC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(DC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AC,r=DC,n=md;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(TC);var RR=TC.last;const zR=_n(RR);var FR=["valueAccessor"],UR=["data","dataKey","clockWise","id","textBreakAll"];function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wu.apply(null,arguments)}function X1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X1(Object(r),!0).forEach(function(n){BR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BR(e,t,r){return(t=WR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e){var t=qR(e,"string");return typeof t=="symbol"?t:t+""}function qR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J1(e,t){if(e==null)return{};var r,n,a=HR(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KR=e=>Array.isArray(e.value)?zR(e.value):e.value;function Ya(e){var{valueAccessor:t=KR}=e,r=J1(e,FR),{data:n,dataKey:a,clockWise:i,id:o,textBreakAll:l}=r,c=J1(r,UR);return!n||!n.length?null:g.createElement(ha,{className:"recharts-label-list"},n.map((u,d)=>{var f=We(a)?t(u,d):ar(u&&u.payload,a),h=We(o)?{}:{id:"".concat(o,"-").concat(d)};return g.createElement(Zt,wu({},Ee(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Zt.parseViewBox(We(i)?u:Q1(Q1({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Ya.displayName="LabelList";function VR(e,t){return e?e===!0?g.createElement(Ya,{key:"labelList-implicit",data:t}):g.isValidElement(e)||Ug(e)?g.createElement(Ya,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?g.createElement(Ya,wu({data:t},e,{key:"labelList-implicit"})):null:null}function GR(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=Dj(n,Ya).map((o,l)=>g.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var i=VR(e.label,t);return[i,...a]}Ya.renderCallByParent=GR;function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(null,arguments)}var IC=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=je("recharts-dot",a);return t===+t&&r===+r&&n===+n?g.createElement("circle",Qm({},Ee(e,!1),g0(e),{className:i,cx:t,cy:r,r:n})):null},YR={radiusAxis:{},angleAxis:{}},XR=Er({name:"polarAxis",initialState:YR,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),QR=XR.reducer,JR={countOfBars:0,cartesianItems:[],polarItems:[]},MC=Er({name:"graphicalItems",initialState:JR,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=pn(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=pn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=pn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:cW,removeBar:uW,addCartesianGraphicalItem:ZR,replaceCartesianGraphicalItem:ez,removeCartesianGraphicalItem:tz,addPolarGraphicalItem:dW,removePolarGraphicalItem:fW}=MC.actions,rz=MC.reducer;function Z1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z1(Object(r),!0).forEach(function(n){nz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nz(e,t,r){return(t=az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=iz(e,"string");return typeof t=="symbol"?t:t+""}function iz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e){var t=pt(),r=g.useRef(null);return g.useEffect(()=>{var n=eb(eb({},e),{},{stackId:FT(e.stackId)});r.current===null?t(ZR(n)):r.current!==n&&t(ez({prev:r.current,next:n})),r.current=n},[t,e]),g.useEffect(()=>()=>{r.current&&(t(tz(r.current)),r.current=null)},[t]),null}function sz(e){var{fn:t,args:r}=e,n=pt(),a=Ht();return g.useEffect(()=>{if(!a){var i=t(r);return n(_$(i)),()=>{n(k$(i))}}},[t,r,n,a]),null}var lz=()=>{};function cz(e){var{legendPayload:t}=e,r=pt(),n=Ht();return g.useEffect(()=>n?lz:(r(sA(t)),()=>{r(lA(t))}),[r,n,t]),null}function uz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Is(t)),n=g.useRef(e);return n.current!==e&&(r.current=Is(t),n.current=e),r.current}var dz=$([gt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),fz=$([dz,Pn,On],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),hz=e=>{var t=Ht();return ie(r=>Hd(r,"xAxis",e,t))},mz=e=>{var t=Ht();return ie(r=>Hd(r,"yAxis",e,t))},Bg=()=>ie(fz),pz=()=>ie(mL);function tb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tb(Object(r),!0).forEach(function(n){gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gz(e,t,r){return(t=vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xz=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=rb(rb({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ee(a,!1)),g0(a)),l;return g.isValidElement(a)?l=g.cloneElement(a,o):typeof a=="function"?l=a(o):l=g.createElement(IC,o),g.createElement(ha,{className:"recharts-active-dot"},l)};function bz(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=ie(Ws),o=pz();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return We(l)?null:xz({point:l,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var wz=["children"];function jz(e,t){if(e==null)return{};var r,n,a=Sz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nb=()=>{},$C=g.createContext({addErrorBar:nb,removeErrorBar:nb}),Nz={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},LC=g.createContext(Nz);function Cz(e){var{children:t}=e,r=jz(e,wz);return g.createElement(LC.Provider,{value:r},t)}var _z=()=>g.useContext(LC),kz=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[f,h]=g.useState([]),m=g.useCallback(y=>{h(p=>[...p,y])},[h]),v=g.useCallback(y=>{h(p=>p.filter(b=>b!==y))},[h]),x=Ht();return g.createElement($C.Provider,{value:{addErrorBar:m,removeErrorBar:v}},g.createElement(oz,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,errorBars:f,stackId:l,hide:c,barSize:d,isPanorama:x}),t)};function Ez(e){var{addErrorBar:t,removeErrorBar:r}=g.useContext($C);return g.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var Pz=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function RC(e,t,r){return(t=Oz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oz(e){var t=Tz(e,"string");return typeof t=="symbol"?t:t+""}function Tz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hs.apply(null,arguments)}function Az(e,t){if(e==null)return{};var r,n,a=Dz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Iz(e){var{direction:t,width:r,dataKey:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=Az(e,Pz),u=Ee(c,!1),{data:d,dataPointFormatter:f,xAxisId:h,yAxisId:m,errorBarOffset:v}=_z(),x=hz(h),y=mz(m);if((x==null?void 0:x.scale)==null||(y==null?void 0:y.scale)==null||d==null||t==="x"&&x.type!=="number")return null;var p=d.map(b=>{var{x:w,y:j,value:S,errorVal:N}=f(b,n,t);if(!N)return null;var C=[],_,A;if(Array.isArray(N)?[_,A]=N:_=A=N,t==="x"){var{scale:k}=x,T=j+v,U=T+r,I=T-r,ee=k(S-_),te=k(S+A);C.push({x1:te,y1:U,x2:te,y2:I}),C.push({x1:ee,y1:T,x2:te,y2:T}),C.push({x1:ee,y1:U,x2:ee,y2:I})}else if(t==="y"){var{scale:B}=y,E=w+v,O=E-r,M=E+r,q=B(S-_),K=B(S+A);C.push({x1:O,y1:K,x2:M,y2:K}),C.push({x1:E,y1:q,x2:E,y2:K}),C.push({x1:O,y1:q,x2:M,y2:q})}var V="".concat(w+v,"px ").concat(j+v,"px");return g.createElement(ha,Hs({className:"recharts-errorBar",key:"bar-".concat(C.map(le=>"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)))},u),C.map(le=>{var ge=a?{transformOrigin:"".concat(le.x1-5,"px")}:void 0;return g.createElement(su,{from:{transform:"scaleY(0)",transformOrigin:V},to:{transform:"scaleY(1)",transformOrigin:V},begin:i,easing:l,isActive:a,duration:o,key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2),style:{transformOrigin:V}},g.createElement("line",Hs({},le,{style:ge})))}))});return g.createElement(ha,{className:"recharts-errorBars"},p)}var zC=g.createContext(void 0);function Mz(e){var t=g.useContext(zC);return e??t??"x"}function $z(e){var{direction:t,children:r}=e;return g.createElement(zC.Provider,{value:t},r)}var FC={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Lz(e){var t=Mz(e.direction),{width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o}=ui(e,FC);return g.createElement(g.Fragment,null,g.createElement(Ez,{dataKey:e.dataKey,direction:t}),g.createElement(Iz,Hs({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o})))}class UC extends g.Component{render(){return g.createElement(Lz,this.props)}}RC(UC,"defaultProps",FC);RC(UC,"displayName","ErrorBar");function BC(e,t){var r,n,a=ie(u=>An(u,e)),i=ie(u=>ja(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Yt.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Xt.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Rz(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Bg(),{needClipX:i,needClipY:o,needClip:l}=BC(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var zz=e=>{var{chartData:t}=e,r=pt(),n=Ht();return g.useEffect(()=>n?()=>{}:(r(M1(t)),()=>{r(M1(void 0))}),[t,r,n]),null},ab={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Fz=Er({name:"brush",initialState:ab,reducers:{setBrushSettings(e,t){return t.payload==null?ab:t.payload}}}),Uz=Fz.reducer;function Bz(e,t,r){return(t=Wz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wz(e){var t=qz(e,"string");return typeof t=="symbol"?t:t+""}function qz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Wg{static create(t){return new Wg(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Bz(Wg,"EPS",1e-4);function Hz(e){return(e%180+180)%180}var Kz=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Hz(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Vz={dots:[],areas:[],lines:[]},Gz=Er({name:"referenceElements",initialState:Vz,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=pn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=pn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=pn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),Yz=Gz.reducer,Xz=g.createContext(void 0),Qz=e=>{var{children:t}=e,[r]=g.useState("".concat(Is("recharts"),"-clip")),n=Bg();if(n==null)return null;var{x:a,y:i,width:o,height:l}=n;return g.createElement(Xz.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:a,y:i,height:l,width:o}))),t)};function th(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function WC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Jz(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Kz(n,r)}function Zz(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:l}=e;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function ju(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function eF(e,t){return WC(e,t+1)}function tF(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:WC(n,u)};var x=c,y,p=()=>(y===void 0&&(y=r(v,x)),y),b=v.coordinate,w=c===0||ju(e,b,p,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(p()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function ib(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ib(Object(r),!0).forEach(function(n){rF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ib(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rF(e,t,r){return(t=nF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=aF(e,"string");return typeof t=="symbol"?t:t+""}function aF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iF(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(h){var m=i[h],v,x=()=>(v===void 0&&(v=r(m,h)),v);if(h===o-1){var y=e*(m.coordinate+e*x()/2-c);i[h]=m=St(St({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=St(St({},m),{},{tickCoord:m.coordinate});var p=ju(e,m.tickCoord,x,l,c);p&&(c=m.tickCoord-e*(x()/2+a),i[h]=St(St({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function oF(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=St(St({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=ju(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=St(St({},d),{},{isShow:!0}))}for(var v=i?l-1:l,x=function(b){var w=o[b],j,S=()=>(j===void 0&&(j=r(w,b)),j);if(b===0){var N=e*(w.coordinate-e*S()/2-c);o[b]=w=St(St({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[b]=w=St(St({},w),{},{tickCoord:w.coordinate});var C=ju(e,w.tickCoord,S,c,u);C&&(c=w.tickCoord+e*(S()/2+a),o[b]=St(St({},w),{},{isShow:!0}))},y=0;y<v;y++)x(y);return o}function qg(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ne(c)||ol.isSsr){var h;return(h=eF(a,ne(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],v=l==="top"||l==="bottom"?"width":"height",x=d&&v==="width"?ds(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(w,j)=>{var S=typeof u=="function"?u(w.value,j):w.value;return v==="width"?Jz(ds(S,{fontSize:t,letterSpacing:r}),x,f):ds(S,{fontSize:t,letterSpacing:r})[v]},p=a.length>=2?yr(a[1].coordinate-a[0].coordinate):1,b=Zz(i,p,v);return c==="equidistantPreserveStart"?tF(p,b,y,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=oF(p,b,y,a,o,c==="preserveStartEnd"):m=iF(p,b,y,a,o),m.filter(w=>w.isShow))}var sF=["viewBox"],lF=["viewBox"];function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ri.apply(null,arguments)}function ob(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ob(Object(r),!0).forEach(function(n){Hg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ob(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sb(e,t){if(e==null)return{};var r,n,a=cF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hg(e,t,r){return(t=uF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uF(e){var t=dF(e,"string");return typeof t=="symbol"?t:t+""}function dF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Sa extends g.Component{constructor(t){super(t),this.tickRefs=g.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=sb(t,sF),i=this.props,{viewBox:o}=i,l=sb(i,lF);return!th(n,o)||!th(a,l)||!th(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,v,x,y=c?-1:1,p=t.tickSize||l,b=ne(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*i,h=m-y*p,x=h-y*u,v=b;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-y*p,v=d-y*u,x=b;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+y*p,v=d+y*u,x=b;break;default:d=f=t.coordinate,m=n+ +c*i,h=m+y*p,x=h+y*u,v=b;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:v,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:l}=this.props,c=Ye(Ye(Ye({},Ee(this.props,!1)),Ee(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=Ye(Ye({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=Ye(Ye({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return g.createElement("line",Ri({},c,{className:je("recharts-cartesian-axis-line",ti(l,"className"))}))}static renderTickItem(t,r,n){var a,i=je(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))a=g.cloneElement(t,Ye(Ye({},r),{},{className:i}));else if(typeof t=="function")a=t(Ye(Ye({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=je(o,t.className)),a=g.createElement(Fg,Ri({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,u=qg(Ye(Ye({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),h=Ee(this.props,!1),m=Ee(o,!1),v=Ye(Ye({},h),{},{fill:"none"},Ee(a,!1)),x=u.map((y,p)=>{var{line:b,tick:w}=this.getTickLineCoord(y),j=Ye(Ye(Ye(Ye({textAnchor:d,verticalAnchor:f},h),{},{stroke:"none",fill:i},m),w),{},{index:p,payload:y,visibleTicksCount:u.length,tickFormatter:l});return g.createElement(ha,Ri({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Tj(this.props,y,p)),a&&g.createElement("line",Ri({},v,b,{className:je("recharts-cartesian-axis-tick-line",ti(a,"className"))})),o&&Sa.renderTickItem(o,j,"".concat(typeof l=="function"?l(y.value,p):y.value).concat(c||"")))});return x.length>0?g.createElement("g",{className:"recharts-cartesian-axis-ticks"},x):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:g.createElement(ha,{className:je("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Zt.renderCallByParent(this.props))}}Hg(Sa,"displayName","CartesianAxis");Hg(Sa,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var fF=["x1","y1","x2","y2","key"],hF=["offset"],mF=["xAxisId","yAxisId"],pF=["xAxisId","yAxisId"];function lb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lb(Object(r),!0).forEach(function(n){gF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gF(e,t,r){return(t=vF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vF(e){var t=yF(e,"string");return typeof t=="symbol"?t:t+""}function yF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ua.apply(null,arguments)}function Su(e,t){if(e==null)return{};var r,n,a=xF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bF=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:l}=e;return g.createElement("rect",{x:n,y:a,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qC(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:l}=t,c=Su(t,fF),u=Ee(c,!1),d=Su(u,hF);r=g.createElement("line",Ua({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function wF(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var i=Su(e,mF),o=a.map((l,c)=>{var u=Ct(Ct({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return qC(n,u)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function jF(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var i=Su(e,pF),o=a.map((l,c)=>{var u=Ct(Ct({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return qC(n,u)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function SF(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],v=m?a+o-f:u[h+1]-f;if(v<=0)return null;var x=h%t.length;return g.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:v,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function NF(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],v=m?a+o-f:u[h+1]-f;if(v<=0)return null;var x=h%r.length;return g.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:v,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var CF=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return JS(qg(Ct(Ct(Ct({},Sa.defaultProps),r),{},{ticks:ZS(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},_F=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return JS(qg(Ct(Ct(Ct({},Sa.defaultProps),r),{},{ticks:ZS(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},kF={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function HC(e){var t=U0(),r=B0(),n=n3(),a=Ct(Ct({},ui(e,kF)),{},{x:ne(e.x)?e.x:n.left,y:ne(e.y)?e.y:n.top,width:ne(e.width)?e.width:n.width,height:ne(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,v=Ht(),x=ie(A=>k1(A,"xAxis",i,v)),y=ie(A=>k1(A,"yAxis",o,v));if(!ne(u)||u<=0||!ne(d)||d<=0||!ne(l)||l!==+l||!ne(c)||c!==+c)return null;var p=a.verticalCoordinatesGenerator||CF,b=a.horizontalCoordinatesGenerator||_F,{horizontalPoints:w,verticalPoints:j}=a;if((!w||!w.length)&&typeof b=="function"){var S=h&&h.length,N=b({yAxis:y?Ct(Ct({},y),{},{ticks:S?h:y.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);us(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!j||!j.length)&&typeof p=="function"){var C=m&&m.length,_=p({xAxis:x?Ct(Ct({},x),{},{ticks:C?m:x.ticks}):void 0,width:t,height:r,offset:n},C?!0:f);us(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(j=_)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(bF,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),g.createElement(SF,Ua({},a,{horizontalPoints:w})),g.createElement(NF,Ua({},a,{verticalPoints:j})),g.createElement(wF,Ua({},a,{offset:n,horizontalPoints:w,xAxis:x,yAxis:y})),g.createElement(jF,Ua({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:y})))}HC.displayName="CartesianGrid";var KC=(e,t,r,n)=>Hd(e,"xAxis",t,n),VC=(e,t,r,n)=>XN(e,"xAxis",t,n),GC=(e,t,r,n)=>Hd(e,"yAxis",r,n),YC=(e,t,r,n)=>XN(e,"yAxis",r,n),EF=$([Fe,KC,GC,VC,YC],(e,t,r,n,a)=>xa(e,"xAxis")?_m(t,n,!1):_m(r,a,!1)),PF=(e,t,r,n,a)=>a,OF=$([jN,PF],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),TF=$([Fe,KC,GC,VC,YC,OF,EF,eN],(e,t,r,n,a,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=c==null?void 0:c.slice(u,d+1),m!=null)return XF({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:m})}}),AF=["type","layout","connectNulls","needClip"],DF=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function XC(e,t){if(e==null)return{};var r,n,a=IF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cb(Object(r),!0).forEach(function(n){Gd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gd(e,t,r){return(t=MF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=$F(e,"string");return typeof t=="symbol"?t:t+""}function $F(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uo.apply(null,arguments)}var LF=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:e3(r,t),payload:e}]};function RF(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:e3(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var QC=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function zF(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var FF=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return QC(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...zF(r,a),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function UF(e,t){var r;if(g.isValidElement(e))r=g.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=je("recharts-line-dot",typeof e!="boolean"?e.className:"");r=g.createElement(IC,uo({},t,{className:n}))}return r}function BF(e,t){return e==null?!1:t?!0:e.length===1}function WF(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!BF(r,a))return null;var l=Ij(a),c=Ee(n,!1),u=Ee(a,!0),d=r.map((h,m)=>{var v=$r($r($r({key:"dot-".concat(m),r:3},c),u),{},{index:m,cx:h.x,cy:h.y,dataKey:i,value:h.value,payload:h.payload,points:r});return UF(a,v)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return g.createElement(ha,uo({className:"recharts-line-dots",key:"dots"},f),d)}function Jm(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,f=XC(i,AF),h=$r($r({},Ee(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:c,connectNulls:u,strokeDasharray:a??i.strokeDasharray});return g.createElement(g.Fragment,null,(n==null?void 0:n.length)>1&&g.createElement(o3,uo({},h,{pathRef:r})),g.createElement(WF,{points:n,clipPathId:t,props:i}),o&&Ya.renderCallByParent(i,n))}function qF(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function HF(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:m,height:v,onAnimationEnd:x,onAnimationStart:y}=r,p=a.current,b=uz(r,"recharts-line-"),[w,j]=g.useState(!1),S=g.useCallback(()=>{typeof x=="function"&&x(),j(!1)},[x]),N=g.useCallback(()=>{typeof y=="function"&&y(),j(!0)},[y]),C=qF(n.current),_=i.current;return g.createElement(su,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:S,onAnimationStart:N,key:b},A=>{var{t:k}=A,T=Mo(_,C+_),U=Math.min(T(k),C),I;if(l){var ee="".concat(l).split(/[,\s]+/gim).map(E=>parseFloat(E));I=FF(U,C,ee)}else I=QC(C,U);if(p){var te=p.length/o.length,B=k===1?o:o.map((E,O)=>{var M=Math.floor(O*te);if(p[M]){var q=p[M],K=Mo(q.x,E.x),V=Mo(q.y,E.y);return $r($r({},E),{},{x:K(k),y:V(k)})}if(h){var le=Mo(m*2,E.x),ge=Mo(v/2,E.y);return $r($r({},E),{},{x:le(k),y:ge(k)})}return $r($r({},E),{},{x:E.x,y:E.y})});return a.current=B,g.createElement(Jm,{props:r,points:B,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:I})}return k>0&&C>0&&(a.current=o,i.current=U),g.createElement(Jm,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:I})})}function KF(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,i=g.useRef(null),o=g.useRef(0),l=g.useRef(null),c=i.current;return a&&n&&n.length&&c!==n?g.createElement(HF,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):g.createElement(Jm,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var VF=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:ar(e.payload,t)});class GF extends g.Component{constructor(){super(...arguments),Gd(this,"id",Is("recharts-line-"))}render(){var t,{hide:r,dot:n,points:a,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:f,id:h,needClip:m,layout:v}=this.props;if(r)return null;var x=je("recharts-line",i),y=We(h)?this.id:h,{r:p=3,strokeWidth:b=2}=(t=Ee(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=Ij(n),j=p*2+b;return g.createElement(g.Fragment,null,g.createElement(ha,{className:x},m&&g.createElement("defs",null,g.createElement(Rz,{clipPathId:y,xAxisId:o,yAxisId:l}),!w&&g.createElement("clipPath",{id:"clipPath-dots-".concat(y)},g.createElement("rect",{x:u-j/2,y:c-j/2,width:d+j,height:f+j}))),g.createElement(KF,{props:this.props,clipPathId:y}),g.createElement($z,{direction:v==="horizontal"?"y":"x"},g.createElement(Cz,{xAxisId:o,yAxisId:l,data:a,dataPointFormatter:VF,errorBarOffset:0},this.props.children))),g.createElement(bz,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var JC={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!ol.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function YF(e){var t=ui(e,JC),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:m,yAxisId:v}=t,x=XC(t,DF),{needClip:y}=BC(m,v),{height:p,width:b,x:w,y:j}=Bg(),S=W0(),N=Ht(),C=g.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),_=ie(A=>TF(A,m,v,N,C));return S!=="horizontal"&&S!=="vertical"?null:g.createElement(GF,uo({},x,{connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:m,yAxisId:v,points:_,layout:S,height:p,width:b,left:w,top:j,needClip:y}))}function XF(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=ar(u,o);return t==="horizontal"?{x:vx({axis:r,ticks:a,bandSize:l,entry:u,index:d}),y:We(f)?null:n.scale(f),value:f,payload:u}:{x:We(f)?null:r.scale(f),y:vx({axis:n,ticks:i,bandSize:l,entry:u,index:d}),value:f,payload:u}})}class Nu extends g.PureComponent{render(){return g.createElement(kz,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},g.createElement(cz,{legendPayload:LF(this.props)}),g.createElement(sz,{fn:RF,args:this.props}),g.createElement(YF,this.props))}}Gd(Nu,"displayName","Line");Gd(Nu,"defaultProps",JC);function ub(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ub(Object(r),!0).forEach(function(n){QF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ub(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QF(e,t,r){return(t=JF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JF(e){var t=ZF(e,"string");return typeof t=="symbol"?t:t+""}function ZF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eU={xAxis:{},yAxis:{},zAxis:{}},ZC=Er({name:"cartesianAxis",initialState:eU,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=db(db({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:tU,removeXAxis:rU,addYAxis:nU,removeYAxis:aU,addZAxis:hW,removeZAxis:mW,updateYAxisWidth:iU}=ZC.actions,oU=ZC.reducer,sU=["children"],lU=["dangerouslySetInnerHTML","ticks"];function e_(e,t,r){return(t=cU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cU(e){var t=uU(e,"string");return typeof t=="symbol"?t:t+""}function uU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zm.apply(null,arguments)}function t_(e,t){if(e==null)return{};var r,n,a=dU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fU(e){var t=pt(),r=g.useMemo(()=>{var i=t_(e,sU);return i},[e]),n=ie(i=>An(i,r.id)),a=r===n;return g.useEffect(()=>(t(tU(r)),()=>{t(rU(r))}),[r,t]),a?e.children:null}var hU=e=>{var{xAxisId:t,className:r}=e,n=ie(r3),a=Ht(),i="xAxis",o=ie(f=>So(f,i,t,a)),l=ie(f=>YN(f,i,t,a)),c=ie(f=>d$(f,t)),u=ie(f=>g$(f,t));if(c==null||u==null)return null;var d=t_(e,lU);return g.createElement(Sa,Zm({},d,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:je("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},mU=e=>{var t,r,n,a,i;return g.createElement(fU,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},g.createElement(hU,e))};class Kg extends g.Component{render(){return g.createElement(mU,this.props)}}e_(Kg,"displayName","XAxis");e_(Kg,"defaultProps",{allowDataOverflow:Yt.allowDataOverflow,allowDecimals:Yt.allowDecimals,allowDuplicatedCategory:Yt.allowDuplicatedCategory,height:Yt.height,hide:!1,mirror:Yt.mirror,orientation:Yt.orientation,padding:Yt.padding,reversed:Yt.reversed,scale:Yt.scale,tickCount:Yt.tickCount,type:Yt.type,xAxisId:0});var pU=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},gU=["dangerouslySetInnerHTML","ticks"];function r_(e,t,r){return(t=vU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(null,arguments)}function xU(e,t){if(e==null)return{};var r,n,a=bU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wU(e){var t=pt();return g.useEffect(()=>(t(nU(e)),()=>{t(aU(e))}),[e,t]),null}var jU=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,o=g.useRef(null),l=g.useRef(null),c=ie(r3),u=Ht(),d=pt(),f="yAxis",h=ie(p=>So(p,f,r,u)),m=ie(p=>y$(p,r)),v=ie(p=>v$(p,r)),x=ie(p=>YN(p,f,r,u));if(g.useLayoutEffect(()=>{var p;if(!(a!=="auto"||!m||Ug(i)||g.isValidElement(i))){var b=o.current,w=b==null||(p=b.tickRefs)===null||p===void 0?void 0:p.current,{tickSize:j,tickMargin:S}=b.props,N=pU({ticks:w,label:l.current,labelGapWithTick:5,tickSize:j,tickMargin:S});Math.round(m.width)!==Math.round(N)&&d(iU({id:r,width:N}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,i,r,a]),m==null||v==null)return null;var y=xU(e,gU);return g.createElement(Sa,ep({},y,{ref:o,labelRef:l,scale:h,x:v.x,y:v.y,width:m.width,height:m.height,className:je("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},SU=e=>{var t,r,n,a,i;return g.createElement(g.Fragment,null,g.createElement(wU,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),g.createElement(jU,e))},NU={allowDataOverflow:Xt.allowDataOverflow,allowDecimals:Xt.allowDecimals,allowDuplicatedCategory:Xt.allowDuplicatedCategory,hide:!1,mirror:Xt.mirror,orientation:Xt.orientation,padding:Xt.padding,reversed:Xt.reversed,scale:Xt.scale,tickCount:Xt.tickCount,type:Xt.type,width:Xt.width,yAxisId:0};class Vg extends g.Component{render(){return g.createElement(SU,this.props)}}r_(Vg,"displayName","YAxis");r_(Vg,"defaultProps",NU);var CU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gl=g;function _U(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kU=typeof Object.is=="function"?Object.is:_U,EU=gl.useSyncExternalStore,PU=gl.useRef,OU=gl.useEffect,TU=gl.useMemo,AU=gl.useDebugValue;CU.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=PU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=TU(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),a!==void 0&&o.hasValue){var v=o.value;if(a(v,m))return f=v}return f=m}if(v=f,kU(d,m))return v;var x=n(m);return a!==void 0&&a(v,x)?(d=m,v):(d=m,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=EU(e,i[0],i[1]);return OU(function(){o.hasValue=!0,o.value=l},[l]),AU(l),l};function DU(e){e()}function IU(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DU(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var fb={notify(){},get:()=>[]};function MU(e,t){let r,n=fb,a=0,i=!1;function o(x){d();const y=n.subscribe(x);let p=!1;return()=>{p||(p=!0,y(),f())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=IU())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=fb)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return v}var $U=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LU=$U(),RU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zU=RU(),FU=()=>LU||zU?g.useLayoutEffect:g.useEffect,UU=FU(),rh=Symbol.for("react-redux-context"),nh=typeof globalThis<"u"?globalThis:{};function BU(){if(!g.createContext)return{};const e=nh[rh]??(nh[rh]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var WU=BU();function qU(e){const{children:t,context:r,serverState:n,store:a}=e,i=g.useMemo(()=>{const c=MU(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=g.useMemo(()=>a.getState(),[a]);UU(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||WU;return g.createElement(l.Provider,{value:i},t)}var HU=qU,KU=(e,t)=>t,Gg=$([KU,Fe,kM,st,uC,Dn,wL,gt],_L),Yg=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},n_=Cr("mouseClick"),a_=il();a_.startListening({actionCreator:n_,effect:(e,t)=>{var r=e.payload,n=Gg(t.getState(),Yg(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(O$({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var tp=Cr("mouseMove"),i_=il();i_.startListening({actionCreator:tp,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Tg(n,n.tooltip.settings.shared),i=Gg(n,Yg(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(nC({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(rC()))}});function VU(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var hb={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},o_=Er({name:"rootProps",initialState:hb,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:hb.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),GU=o_.reducer,{updateOptions:YU}=o_.actions,XU=Er({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),QU=XU.reducer,s_=Cr("keyDown"),l_=Cr("focus"),Xg=il();Xg.startListening({actionCreator:s_,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Ag(a,pi(r))),l=Dn(r);if(i==="Enter"){var c=bu(r,"axis","hover",String(a.index));t.dispatch(Km({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=j$(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=bu(r,"axis","hover",String(h));t.dispatch(Km({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});Xg.startListening({actionCreator:l_,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=bu(r,"axis","hover",String(i));t.dispatch(Km({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var hr=Cr("externalEvent"),c_=il();c_.startListening({actionCreator:hr,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:dL(r),activeDataKey:cL(r),activeIndex:Ws(r),activeLabel:hC(r),activeTooltipIndex:Ws(r),isTooltipActive:fL(r)};e.payload.handler(n,e.payload.reactEvent)}}});var JU=$([No],e=>e.tooltipItemPayloads),ZU=$([JU,pl,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),u_=Cr("touchMove"),d_=il();d_.startListening({actionCreator:u_,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Tg(n,n.tooltip.settings.shared);if(a==="axis"){var i=Gg(n,Yg({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(nC({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(GT),d=(o=c.getAttribute(YT))!==null&&o!==void 0?o:void 0,f=ZU(t.getState(),u,d);t.dispatch(P$({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var eB=PS({brush:Uz,cartesianAxis:oU,chartData:BL,graphicalItems:rz,layout:xT,legend:cA,options:LL,polarAxis:QR,polarOptions:QU,referenceElements:Yz,rootProps:GU,tooltip:T$}),tB=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return q7({reducer:eB,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([a_.middleware,i_.middleware,Xg.middleware,c_.middleware,d_.middleware]),devTools:{serialize:{replacer:VU},name:"recharts-".concat(r)}})};function rB(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Ht(),i=g.useRef(null);if(a)return r;i.current==null&&(i.current=tB(t,n));var o=O0;return g.createElement(HU,{context:o,store:i.current},r)}function nB(e){var{layout:t,width:r,height:n,margin:a}=e,i=pt(),o=Ht();return g.useEffect(()=>{o||(i(gT(t)),i(vT({width:r,height:n})),i(pT(a)))},[i,o,t,r,n,a]),null}function aB(e){var t=pt();return g.useEffect(()=>{t(YU(e))},[t,e]),null}var iB=["children"];function oB(e,t){if(e==null)return{};var r,n,a=sB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cu(){return Cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cu.apply(null,arguments)}var lB={width:"100%",height:"100%"},cB=g.forwardRef((e,t)=>{var r=U0(),n=B0(),a=i3();if(!au(r)||!au(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,g.createElement(v0,Cu({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:lB,ref:t}),i)}),uB=e=>{var{children:t}=e,r=ie(Ed);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return g.createElement(v0,{width:n,height:a,x:o,y:i},t)},mb=g.forwardRef((e,t)=>{var{children:r}=e,n=oB(e,iB),a=Ht();return a?g.createElement(uB,null,r):g.createElement(cB,Cu({ref:t},n),r)});function dB(){var e=pt(),[t,r]=g.useState(null),n=ie(VT);return g.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Wr(i)&&i!==n&&e(yT(i))}},[t,e,n]),r}function pb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pb(Object(r),!0).forEach(function(n){hB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hB(e,t,r){return(t=mB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mB(e){var t=pB(e,"string");return typeof t=="symbol"?t:t+""}function pB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gB=g.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:v,onTouchStart:x,style:y,width:p}=e,b=pt(),[w,j]=g.useState(null),[S,N]=g.useState(null);HL();var C=dB(),_=g.useCallback(V=>{C(V),typeof t=="function"&&t(V),j(V),N(V)},[C,t,j,N]),A=g.useCallback(V=>{b(n_(V)),b(hr({handler:i,reactEvent:V}))},[b,i]),k=g.useCallback(V=>{b(tp(V)),b(hr({handler:u,reactEvent:V}))},[b,u]),T=g.useCallback(V=>{b(rC()),b(hr({handler:d,reactEvent:V}))},[b,d]),U=g.useCallback(V=>{b(tp(V)),b(hr({handler:f,reactEvent:V}))},[b,f]),I=g.useCallback(()=>{b(l_())},[b]),ee=g.useCallback(V=>{b(s_(V.key))},[b]),te=g.useCallback(V=>{b(hr({handler:o,reactEvent:V}))},[b,o]),B=g.useCallback(V=>{b(hr({handler:l,reactEvent:V}))},[b,l]),E=g.useCallback(V=>{b(hr({handler:c,reactEvent:V}))},[b,c]),O=g.useCallback(V=>{b(hr({handler:h,reactEvent:V}))},[b,h]),M=g.useCallback(V=>{b(hr({handler:x,reactEvent:V}))},[b,x]),q=g.useCallback(V=>{b(u_(V)),b(hr({handler:v,reactEvent:V}))},[b,v]),K=g.useCallback(V=>{b(hr({handler:m,reactEvent:V}))},[b,m]);return g.createElement(xC.Provider,{value:w},g.createElement(Mj.Provider,{value:S},g.createElement("div",{className:je("recharts-wrapper",n),style:fB({position:"relative",cursor:"default",width:p,height:a},y),onClick:A,onContextMenu:te,onDoubleClick:B,onFocus:I,onKeyDown:ee,onMouseDown:E,onMouseEnter:k,onMouseLeave:T,onMouseMove:U,onMouseUp:O,onTouchEnd:K,onTouchMove:q,onTouchStart:M,ref:_},r)))}),vB=["children","className","width","height","style","compact","title","desc"];function yB(e,t){if(e==null)return{};var r,n,a=xB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bB=g.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:o,compact:l,title:c,desc:u}=e,d=yB(e,vB),f=Ee(d,!1);return l?g.createElement(mb,{otherAttributes:f,title:c,desc:u},r):g.createElement(gB,{className:n,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(mb,{otherAttributes:f,title:c,desc:u,ref:t},g.createElement(Qz,null,r)))}),wB=["width","height"];function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rp.apply(null,arguments)}function jB(e,t){if(e==null)return{};var r,n,a=SB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NB={top:5,right:5,bottom:5,left:5},CB={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:NB,reverseStackOrder:!1,syncMethod:"index"},_B=g.forwardRef(function(t,r){var n,a=ui(t.categoricalChartProps,CB),{width:i,height:o}=a,l=jB(a,wB);if(!au(i)||!au(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return g.createElement(rB,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},g.createElement(zz,{chartData:h.data}),g.createElement(nB,{width:i,height:o,layout:a.layout,margin:a.margin}),g.createElement(aB,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),g.createElement(bB,rp({},l,{width:i,height:o,ref:r})))}),kB=["axis"],EB=g.forwardRef((e,t)=>g.createElement(_B,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kB,tooltipPayloadSearcher:ML,categoricalChartProps:e,ref:t}));const PB=()=>{const{empresaId:e}=ze(),[t,r]=g.useState({ventasTotales:0,margen:0,unidadesVendidas:0,numeroVentas:0,ticketPromedio:0}),[n,a]=g.useState([]),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,h]=g.useState(!1),[m,v]=g.useState(null),[x,y]=g.useState(null),[p,b]=g.useState(new Date().toLocaleString("es-CL")),[w,j]=g.useState(new Date(Date.now()-14*24*60*60*1e3).toISOString().split("T")[0]),[S,N]=g.useState(new Date().toISOString().split("T")[0]),[C,_]=g.useState({caja1:!0,caja2:!0,caja3:!0,caja4:!0}),A=B=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(B),k=({active:B,payload:E,label:O})=>B&&E&&E.length?s.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded-lg shadow-md text-sm",children:[s.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:O}),E.map((M,q)=>s.jsxs("p",{style:{color:M.stroke},children:[M.name==="actual"?"Periodo seleccionado":"Periodo anterior",":"," ",s.jsx("span",{className:"font-medium",children:A(M.value)})]},`item-${q}`))]}):null,T=g.useCallback(async()=>{if(e){d(!0),v(null);try{try{const{data:B,error:E}=await re.from("ventas").select("id, total").eq("empresa_id",e).gte("fecha",w).lte("fecha",S);if(E)throw E;const{data:O,error:M}=await re.from("venta_items").select("cantidad").in("venta_id",(B==null?void 0:B.map(ce=>ce.id))||[]);M&&console.error("Error loading venta items:",M);const q=(B==null?void 0:B.reduce((ce,P)=>ce+(P.total||0),0))||0,K=(B==null?void 0:B.length)||0,V=(O==null?void 0:O.reduce((ce,P)=>ce+(P.cantidad||0),0))||0,le=q*.3,ge=K?q/K:0;b(new Date().toLocaleString("es-CL")),r({ventasTotales:q,margen:le,unidadesVendidas:V,numeroVentas:K,ticketPromedio:ge})}catch(B){console.error("Error loading real data, using mock data:",B),r({ventasTotales:101239,margen:30372,unidadesVendidas:4,numeroVentas:5,ticketPromedio:20248}),b(new Date().toLocaleString("es-CL"))}}catch(B){const E=B instanceof Error?B.message:"Error desconocido al cargar KPIs.";console.error("Error loading KPI data:",E),v("Error al cargar los KPIs. Intenta de nuevo."),D.error("Error al cargar los KPIs.")}finally{d(!1)}}},[e,w,S]),U=g.useCallback(async()=>{if(e){h(!0),y(null);try{let B;try{const{data:E,error:O}=await re.rpc("ventas_por_mes",{empresa_id_arg:e,fecha_inicio:w,fecha_fin:S});if(O)throw O;B=E}catch(E){console.error("Error loading from RPC, using mock data:",E),B=[{mes:"Jul",actual:101239,anterior:85e3}]}if(B&&Array.isArray(B)&&B.length)a(B.map(E=>({mes:E.mes,actual:parseFloat(E.actual.toString()),anterior:parseFloat(E.anterior.toString())})));else{const E=new Date(w),O=new Date(S),M=[],q=new Date(E.getFullYear(),E.getMonth(),1);for(;q<=O;)M.push({mes:q.toLocaleString("es-CL",{month:"short"}).charAt(0).toUpperCase()+q.toLocaleString("es-CL",{month:"short"}).slice(1),actual:0,anterior:0}),q.setMonth(q.getMonth()+1);a(M),D("No hay datos disponibles para el rango de fechas seleccionado.",{icon:"ℹ️"})}(!B||!Array.isArray(B)||B.length===0)&&r({ventasTotales:101239,margen:30372,unidadesVendidas:4,numeroVentas:5,ticketPromedio:20248})}catch(B){const E=B instanceof Error?B.message:"Error desconocido al cargar datos del gráfico.";console.error("Error loading monthly chart data:",E),y("Error al cargar los datos del gráfico. Intenta de nuevo."),D.error("Error al cargar el gráfico de ventas.")}finally{h(!1)}}},[e,w,S]);g.useEffect(()=>{T(),U()},[e,T,U]);const I=()=>{T(),U(),c(!1),D.success("Filtros aplicados")},ee=()=>{T(),U(),D.success("Datos actualizados")},te=()=>{const E=[["Fecha","Ventas Totales","Margen","Unidades Vendidas","N° Ventas","Ticket Promedio"],[new Date().toLocaleDateString("es-CL"),t.ventasTotales,t.margen,t.unidadesVendidas,t.numeroVentas,t.ticketPromedio]].map(K=>K.join(",")).join(`
`),O=new Blob([E],{type:"text/csv"}),M=window.URL.createObjectURL(O),q=document.createElement("a");q.href=M,q.download=`reporte_ventas_${new Date().toISOString().split("T")[0]}.csv`,q.click(),window.URL.revokeObjectURL(M),D.success("Reporte descargado en Excel")};return s.jsxs("div",{className:"h-screen bg-white flex flex-col relative",children:[s.jsx(It,{title:"Reportes",icon:s.jsx(vj,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6 space-y-6 overflow-auto",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:u?s.jsxs("div",{className:"col-span-full text-center py-8",children:[s.jsx(Bl,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Cargando KPIs..."})]}):m?s.jsxs("div",{className:"col-span-full text-center py-8 text-red-600",children:[s.jsx("p",{children:m}),s.jsxs("button",{onClick:T,className:"mt-2 text-blue-600 hover:underline flex items-center justify-center mx-auto",children:[s.jsx(Hi,{className:"w-4 h-4 mr-1"})," Reintentar"]})]}):[{label:"Ventas totales",value:t.ventasTotales,format:"currency"},{label:"Margen",value:t.margen,format:"currency"},{label:"Unidades vendidas",value:t.unidadesVendidas,format:"units"},{label:"N° de ventas",value:t.numeroVentas,format:"units"},{label:"Ticket promedio",value:t.ticketPromedio,format:"currency"}].map((B,E)=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl flex flex-col justify-between shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:B.label}),s.jsx(a8,{className:"w-4 h-4 text-gray-400"})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-2xl font-semibold text-gray-900",children:typeof B.value=="number"&&!isNaN(B.value)?B.format==="currency"?A(B.value):B.format==="units"||B.format==="number"?B.value.toLocaleString("es-CL"):A(B.value):"N/A"}),s.jsx("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-lg",children:"+100%"})]})]},E))}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 relative",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm space-y-4 flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ventas totales por mes"}),s.jsx("button",{onClick:ee,className:"text-blue-600 hover:text-blue-800 p-2 rounded-full hover:bg-blue-50 transition-colors",disabled:f||u,title:"Actualizar datos",children:f||u?s.jsx(Bl,{className:"w-5 h-5 animate-spin"}):s.jsx(Hi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),s.jsx("span",{children:"Período anterior"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),s.jsx("span",{children:"Período seleccionado"})]}),s.jsx(da,{className:"w-4 h-4"})]}),f?s.jsxs("div",{className:"h-[300px] flex items-center justify-center flex-col",children:[s.jsx(Bl,{className:"w-10 h-10 animate-spin text-blue-600"}),s.jsx("p",{className:"text-gray-600 mt-3",children:"Cargando gráfico..."})]}):x?s.jsxs("div",{className:"h-[300px] flex items-center justify-center flex-col text-red-600",children:[s.jsx("p",{children:x}),s.jsxs("button",{onClick:U,className:"mt-2 text-blue-600 hover:underline flex items-center justify-center",children:[s.jsx(Hi,{className:"w-4 h-4 mr-1"})," Reintentar"]})]}):s.jsx(iR,{width:"100%",height:300,children:s.jsxs(EB,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[s.jsx(HC,{stroke:"#eee",strokeDasharray:"3 3",vertical:!1}),s.jsx(Kg,{dataKey:"mes",axisLine:!1,tickLine:!1}),s.jsx(Vg,{tickFormatter:B=>A(B),axisLine:!1,tickLine:!1,width:100}),s.jsx(ZL,{content:s.jsx(k,{})}),i&&s.jsx(Nu,{type:"monotone",dataKey:"anterior",stroke:"#9CA3AF",strokeWidth:2,dot:!1,name:"Período anterior"}),s.jsx(Nu,{type:"monotone",dataKey:"actual",stroke:"#1E40AF",strokeWidth:2,dot:!1,name:"Período seleccionado"}),s.jsx(Pd,{layout:"horizontal",verticalAlign:"bottom",align:"center"})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:B=>o(B.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),"Ver período anterior"]})})]}),s.jsxs("div",{className:"hidden lg:flex flex-col items-center p-3 space-y-3 bg-white rounded-2xl shadow-sm h-fit w-20",children:[s.jsxs("button",{onClick:te,className:"group flex flex-col items-center text-blue-600 hover:text-blue-800 transition-colors p-1 rounded-lg hover:bg-blue-50 text-center",title:"Descargar Reporte",children:[s.jsx(yj,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[10px] mt-1",children:"Descargar Excel"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"group flex flex-col items-center text-blue-600 hover:text-blue-800 transition-colors p-1 rounded-lg hover:bg-blue-50 text-center",title:"Filtrar",children:[s.jsx(wj,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[10px] mt-1",children:"Filtros"})]}),s.jsxs("div",{className:"text-center text-gray-500 mt-auto pt-2 border-t border-gray-100 w-full",children:[s.jsx(As,{className:"w-4 h-4 text-blue-600 mx-auto mb-1"}),s.jsx("div",{className:"text-[7px] text-gray-500",children:new Date().toLocaleDateString("es-CL")}),s.jsx("div",{className:"text-[7px] text-gray-500",children:new Date().toLocaleTimeString("es-CL")}),s.jsxs("div",{className:"text-center py-1 text-gray-500 text-[6px]",children:["Última: ",p.split(",")[1]]})]})]})]})]}),l&&s.jsxs("div",{className:"absolute top-0 right-0 w-80 h-full bg-white border-l border-gray-200 p-6 shadow-lg z-20 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"Filtros"}),s.jsx("button",{onClick:()=>c(!1),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Cerrar filtros",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pb-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fInicio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rango de fechas"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",id:"fInicio",value:w,onChange:B=>j(B.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"}),s.jsx("span",{className:"text-gray-500",children:"–"}),s.jsx("input",{type:"date",id:"fFin",value:S,onChange:B=>N(B.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cajeros"}),s.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(C).map(([B,E])=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:O=>_(M=>({...M,[B]:O.target.checked})),className:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-gray-800",children:B.toUpperCase()})]},B))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Productos"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-gray-800",children:"Con poco movimiento"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"text-gray-800",children:"Con mucho movimiento"})]})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsxs("button",{onClick:I,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md flex items-center justify-center",disabled:u||f,children:[(u||f)&&s.jsx(Bl,{className:"w-4 h-4 animate-spin mr-2"}),"Aplicar filtros"]})})]})]})},OB=({onClose:e})=>{var ge,ce;const{user:t,empresaId:r}=ze(),{carrito:n,total:a,addToCart:i,removeFromCart:o,updateQuantity:l,clearCart:c,currentCliente:u,selectClient:d,clientes:f}=Dt(),[h,m]=g.useState(""),[v,x]=g.useState(""),[y,p]=g.useState([]),[b,w]=g.useState([]),[j,S]=g.useState(null);g.useState(!1),g.useState(!1);const[N,C]=g.useState(!1),[_,A]=g.useState(""),[k,T]=g.useState({fecha:new Date().toISOString().split("T")[0],tipo:"Guía de despacho manual",destinatario:"",direccion:"",comuna:"",ciudad:"",region:"",numDocumento:""}),[U,I]=g.useState([]),[ee,te]=g.useState([]),[B,E]=g.useState(""),[O,M]=g.useState("");g.useEffect(()=>{u&&(S(u),T(P=>({...P,destinatario:u.razon_social,direccion:u.direccion||"",comuna:u.comuna||"",ciudad:u.ciudad||"",region:u.region||"",numDocumento:u.rut})))},[u]),g.useEffect(()=>{(async()=>{if(!r){I([{id:"caja1",nombre:"Caja Principal"},{id:"caja2",nombre:"Caja Secundaria"}]),te([{id:"sucursal1",nombre:"Sucursal Principal"},{id:"sucursal2",nombre:"Sucursal Centro"}]),E("caja1"),M("sucursal1");return}try{const{data:G,error:X}=await re.from("cajas").select("*").eq("empresa_id",r).eq("activo",!0);!X&&G&&G.length>0?(I(G),E(G[0].id)):(I([{id:"caja1",nombre:"Caja Principal"},{id:"caja2",nombre:"Caja Secundaria"}]),E("caja1"));const{data:R,error:Y}=await re.from("sucursales").select("*").eq("empresa_id",r).eq("activo",!0);!Y&&R&&R.length>0?(te(R),M(R[0].id)):(te([{id:"sucursal1",nombre:"Sucursal Principal"},{id:"sucursal2",nombre:"Sucursal Centro"}]),M("sucursal1"))}catch(G){console.error("Error loading cajas y sucursales:",G),I([{id:"caja1",nombre:"Caja Principal"},{id:"caja2",nombre:"Caja Secundaria"}]),te([{id:"sucursal1",nombre:"Sucursal Principal"},{id:"sucursal2",nombre:"Sucursal Centro"}]),E("caja1"),M("sucursal1")}})()},[r]),g.useEffect(()=>{if(!r){p([{id:"1",nombre:"Ejemplo producto 1",precio:34.5,stock:100},{id:"2",nombre:"Ejemplo producto 2",precio:68.5,stock:50},{id:"3",nombre:"Ejemplo producto 3",precio:34.5,stock:75}]),w(j?[{id:"doc1",label:"Boleta manual (no válida al SII) N°V17522786664074",total:35},{id:"doc2",label:"Boleta manual (no válida al SII) N°3421457",total:34e3},{id:"doc3",label:"Factura N°1001",total:45e3}]:[]);return}(async()=>{try{const G=n.map(X=>({id:X.id,nombre:X.nombre,precio:X.precio,stock:X.stock||0}));if(G.length>0?p(G):p([{id:"1",nombre:"Ejemplo producto 1",precio:34.5,stock:100},{id:"2",nombre:"Ejemplo producto 2",precio:68.5,stock:50},{id:"3",nombre:"Ejemplo producto 3",precio:34.5,stock:75}]),j){const{data:X,error:R}=await re.from("ventas").select("id, folio, tipo_dte, total").eq("empresa_id",r).eq("cliente_id",j.id).limit(10);!R&&X&&X.length>0?w(X.map(Y=>({id:Y.id,label:(Y.tipo_dte==="boleta"?"Boleta manual (no válida al SII)":Y.tipo_dte)+" Nº"+Y.folio,total:Y.total}))):w([])}else w([])}catch(G){console.error("Error loading data:",G),p([{id:"1",nombre:"Ejemplo producto 1",precio:34.5,stock:100},{id:"2",nombre:"Ejemplo producto 2",precio:68.5,stock:50},{id:"3",nombre:"Ejemplo producto 3",precio:34.5,stock:75}]),w([])}})()},[r,v,n,j]);const q=P=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(P),K=P=>{c(),(async()=>{try{if(!r){[{id:"f1eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",empresa_id:"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",nombre:"Ejemplo producto 1",precio:34.5,stock:100,activo:!0,created_at:new Date().toISOString(),costo:0,descripcion:"Producto de ejemplo",codigo:"PROD001",destacado:!1,updated_at:new Date().toISOString()}].forEach(xe=>i(xe));return}const{data:X,error:R}=await re.from("ventas").select("id").eq("id",P.id).eq("empresa_id",r).single();if(R||!X){[{id:"f1eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",empresa_id:r,nombre:"Ejemplo producto 1",precio:34.5,stock:100,activo:!0,created_at:new Date().toISOString(),costo:0,descripcion:"Producto de ejemplo",codigo:"PROD001",destacado:!1,updated_at:new Date().toISOString()}].forEach(xe=>i(xe));return}const{data:Y,error:se}=await re.from("venta_items").select(`
            id,
            cantidad,
            precio_unitario,
            productos (
              id,
              empresa_id,
              nombre,
              precio,
              stock,
              activo,
              created_at,
              costo,
              descripcion,
              codigo,
              destacado,
              updated_at
            )
          `).eq("venta_id",X.id);if(se||!Y||Y.length===0){[{id:"f1eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",empresa_id:r,nombre:"Ejemplo producto 1",precio:34.5,stock:100,activo:!0,created_at:new Date().toISOString(),costo:0,descripcion:"Producto de ejemplo",codigo:"PROD001",destacado:!1,updated_at:new Date().toISOString()}].forEach(xe=>i(xe));return}Y.forEach(z=>{if(z.productos){const xe={...z.productos,precio:z.precio_unitario};for(let L=0;L<z.cantidad;L++)i(xe)}}),D.success(`Productos cargados desde ${P.label}`)}catch(X){console.error("Error loading venta products:",X),D.error("Error al cargar productos de la venta"),[{id:"f1eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",empresa_id:r||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",nombre:"Ejemplo producto 1",precio:34.5,stock:100,activo:!0,created_at:new Date().toISOString(),costo:0,descripcion:"Producto de ejemplo",codigo:"PROD001",destacado:!1,updated_at:new Date().toISOString()}].forEach(Y=>i(Y))}})()},V=()=>{c(),S(null),A(""),m(""),x(""),T({fecha:new Date().toISOString().split("T")[0],tipo:"Guía de despacho manual",destinatario:"",direccion:"",comuna:"",ciudad:"",region:"",numDocumento:""}),C(!1),e()},le=async()=>{if(!j){C(!0),D.error("Debe seleccionar un cliente para el despacho");return}if(n.length===0){D.error("No hay productos para despachar");return}try{const P={empresa_id:r,usuario_id:t==null?void 0:t.id,cliente_id:j.id,destinatario:k.destinatario,direccion:k.direccion,comuna:k.comuna,ciudad:k.ciudad,region:k.region,tipo:k.tipo,numero_documento:k.numDocumento,total:a,fecha:new Date().toISOString()},{data:G,error:X}=await re.from("despachos").insert([P]).select().single();if(X){console.error("Error al crear despacho:",X),D.error("Error al crear despacho. Verifique los datos e intente nuevamente.");return}const R=n.map(Y=>({despacho_id:G.id,producto_id:Y.id,cantidad:Y.quantity,precio:Y.precio}));if(R.length>0){const{error:Y}=await re.from("despachos_items").insert(R);if(Y){console.error("Error al insertar detalles del despacho:",Y),D.error("Error al insertar detalles del despacho.");return}}D.success("Despacho creado exitosamente."),c(),S(null),A(""),T({fecha:new Date().toISOString().split("T")[0],tipo:"Guía de despacho manual",destinatario:"",direccion:"",comuna:"",ciudad:"",region:"",numDocumento:""}),e()}catch(P){console.error("Error general en el despacho:",P),D.error("Error inesperado. Intente nuevamente.")}};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Despacho",icon:s.jsx(Ju,{className:"w-6 h-6 text-gray-600"}),userName:((ge=t==null?void 0:t.user_metadata)==null?void 0:ge.full_name)||(t==null?void 0:t.email)||"Usuario",userAvatarUrl:((ce=t==null?void 0:t.user_metadata)==null?void 0:ce.avatar_url)||"",showClock:!0}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 bg-white p-6 flex flex-col",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el producto o servicio",value:h,onChange:P=>m(P.target.value),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(dt,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium border-b border-gray-200 pb-2 mb-4 text-gray-600",children:[s.jsx("span",{className:"pl-1",children:"Producto"}),s.jsx("span",{className:"text-center",children:"Cantidad"}),s.jsx("span",{className:"text-center",children:"Descuento"}),s.jsx("span",{className:"text-right pr-1",children:"Importe"})]}),s.jsx("div",{className:"space-y-3 pb-4 flex-grow overflow-y-auto max-h-96",children:n.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"No hay ítems en el despacho."}):n.map(P=>s.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("span",{className:"text-gray-800",children:P.nombre}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>l(P.id,Math.max(1,P.quantity-1)),disabled:P.quantity<=1,className:"p-1 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(s0,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center font-semibold text-gray-800",children:P.quantity}),s.jsx("button",{onClick:()=>l(P.id,P.quantity+1),className:"p-1 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600 transition-colors",children:s.jsx(qt,{className:"w-4 h-4"})})]}),s.jsx("span",{className:"text-center text-gray-800",children:"0%"}),s.jsxs("div",{className:"flex items-center justify-between pl-4",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:q(P.precio*P.quantity)}),s.jsx("button",{onClick:()=>o(P.id),className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-gray-100 transition-colors",children:s.jsx(De,{className:"w-4 h-4"})})]})]},P.id))}),s.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center mb-4",children:[s.jsxs("span",{className:"text-gray-600 text-sm",children:["N° Líneas ",n.length," / Tot. ítems ",n.reduce((P,G)=>P+G.quantity,0)]}),s.jsx("select",{className:"px-2 py-1.5 border rounded-lg bg-gray-50 text-sm focus:ring-2 focus:ring-blue-500 w-fit ml-auto",children:s.jsx("option",{children:"Guía de despacho manual"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center mb-3",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Cliente: ",j?j.razon_social:"No seleccionado"]}),s.jsxs("div",{className:"flex items-center justify-end",children:[s.jsx("span",{className:"text-lg font-semibold mr-2",children:"Total"}),s.jsx("div",{className:"bg-gray-100 p-2 rounded-lg text-right min-w-[100px]",children:s.jsx("span",{className:"text-xl font-bold",children:q(a)})})]})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{type:"text",placeholder:"Cliente",value:_,onChange:P=>{if(A(P.target.value),!P.target.value)S(null);else{const G=f.find(X=>X.razon_social.toLowerCase().includes(P.target.value.toLowerCase()));G&&(S(G),d(G))}},className:"w-full pl-4 pr-10 py-2 border rounded-lg bg-white focus:ring-2 focus:ring-blue-500 text-sm"}),s.jsx(dt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"})]}),s.jsxs("div",{className:"mt-auto flex gap-2",children:[s.jsxs("button",{onClick:V,className:"flex-1 px-4 py-2 bg-gray-100 rounded flex items-center justify-center text-sm",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),"Cancelar"]}),s.jsxs("button",{onClick:le,disabled:!j||n.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded font-semibold text-base disabled:opacity-50",children:["Despachar ",q(a)]})]})]})]}),s.jsxs("aside",{className:"flex-1 p-6 bg-gray-50 border-l flex flex-col overflow-y-auto",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(sa,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-blue-600 font-semibold text-lg",children:"Clientes"})]}),s.jsxs("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:[f.filter(P=>P.razon_social.toLowerCase().includes(_.toLowerCase())).map(P=>s.jsxs("li",{onClick:()=>{S(P),A(P.razon_social),d(P)},className:`p-3 border rounded hover:bg-gray-50 cursor-pointer flex justify-between items-center ${(j==null?void 0:j.id)===P.id?"bg-blue-50 border-blue-200":"bg-white"}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:P.razon_social}),s.jsx("p",{className:"text-xs text-gray-600",children:P.rut})]}),(j==null?void 0:j.id)===P.id?s.jsx(Qu,{className:"w-4 h-4 text-blue-600"}):s.jsx(qt,{className:"w-4 h-4 text-blue-600"})]},P.id)),f.filter(P=>P.razon_social.toLowerCase().includes(_.toLowerCase())).length===0&&s.jsx("li",{className:"text-gray-500 text-center py-4",children:_?"Sin resultados":"Aquí aparecerán tus clientes"})]})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(yo,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Documentos disponibles"})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[b.map(P=>s.jsx("div",{onClick:()=>K(P),className:"p-3 bg-white border rounded-lg hover:bg-gray-50 cursor-pointer",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:P.label}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:q(P.total)})]})})},P.id)),b.length===0&&s.jsx("div",{className:"text-center text-gray-500 py-4",children:s.jsx("p",{className:"text-sm",children:"No hay documentos disponibles"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caja"}),s.jsxs("select",{value:B,onChange:P=>E(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"",children:"Seleccionar caja"}),U.map(P=>s.jsx("option",{value:P.id,children:P.nombre},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sucursal"}),s.jsxs("select",{value:O,onChange:P=>M(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"",children:"Seleccionar sucursal"}),ee.map(P=>s.jsx("option",{value:P.id,children:P.nombre},P.id))]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:k.fecha,onChange:P=>T(G=>({...G,fecha:P.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),s.jsx(da,{className:"w-4 h-4 text-gray-400"})]})]})})]})]})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm text-center",children:[s.jsx("p",{className:"mb-6 text-gray-800 text-lg font-semibold",children:"Debes seleccionar un cliente antes de despachar."}),s.jsx("button",{onClick:()=>C(!1),className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Entendido"})]})})]})},Si=({label:e,value:t,colorClass:r="text-gray-900",icon:n})=>s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsxs("span",{className:"text-sm text-[#505050] flex items-center",children:[n&&s.jsx(n,{size:14,className:"mr-2 text-[#828282]"}),e]}),s.jsx("span",{className:`text-sm font-medium ${r}`,children:t})]}),TB=()=>{var M,q;const{currentAperturaCaja:e,openCaja:t,closeCaja:r,loading:n}=Dt(),a=En(),{user:i,logout:o}=ze(),[l,c]=g.useState(!1),[u,d]=g.useState([]),[f,h]=g.useState([]),[m,v]=g.useState("0");ze();const[x,y]=g.useState(""),[p,b]=g.useState("caja_principal_001"),[w,j]=g.useState("all"),S=K=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.max(0,K||0)).replace("$","")+"$";g.useEffect(()=>{e&&(e?(async()=>{try{const{data:V,error:le}=await re.from("ventas").select("*").eq("apertura_caja_id",e.id).order("fecha",{ascending:!0});le?(console.error("Error cargando ventas:",le),d([{id:"1",folio:"9",tipo_dte:"boleta",metodo_pago:"efectivo",total:204,fecha:new Date().toISOString()}])):d(V);const{data:ge,error:ce}=await re.from("movimientos_caja").select("*").eq("apertura_caja_id",e.id).order("created_at",{ascending:!0});ce?(console.error("Error cargando movimientos:",ce),h([])):h(ge)}catch(V){console.error("Error general:",V),d([{id:"1",folio:"9",tipo_dte:"boleta",metodo_pago:"efectivo",total:204,fecha:new Date().toISOString()}]),h([])}})():(d([]),h([])))},[e]);const{ventasEfectivo:N,ventasTarjeta:C,totalIngresos:_,totalRetiros:A,totalVentasNeto:k,montoEsperado:T}=g.useMemo(()=>{const K=u.filter(G=>G.metodo_pago.toLowerCase()==="efectivo").reduce((G,X)=>G+X.total,0),V=u.filter(G=>G.metodo_pago.toLowerCase()!=="efectivo").reduce((G,X)=>G+X.total,0),le=K+V,ge=f.filter(G=>G.tipo==="ingreso").reduce((G,X)=>G+X.monto,0),ce=f.filter(G=>G.tipo==="retiro").reduce((G,X)=>G+X.monto,0),P=((e==null?void 0:e.monto_inicial)||0)+K+ge-ce;return{ventasEfectivo:K,ventasTarjeta:V,totalIngresos:ge,totalRetiros:ce,totalVentasNeto:le,montoEsperado:P}},[u,f,e]),U=g.useMemo(()=>{const K=Math.max(0,parseFloat(m)||0),V=Math.max(0,T||0);return K-V},[m,T]),I=async()=>{c(!0);try{if(!e)throw new Error("No hay una caja abierta para cerrar");const K=parseFloat(m);if(isNaN(K))throw new Error("El monto final debe ser un número válido");if(!await r(K))throw new Error("Error al cerrar la caja");D.success("✅ Caja cerrada exitosamente."),setTimeout(async()=>{await o(),a("/login")},2e3)}catch(K){D.error("Error al cerrar la caja: "+K.message)}finally{c(!1)}},ee=async()=>{if(x===""||isNaN(parseFloat(x))){D.error("Debes ingresar un monto inicial válido");return}if(!p){D.error("Debes especificar un ID de caja");return}await t(parseFloat(x))&&D.success("Caja abierta exitosamente. Puedes comenzar a trabajar.")};if(n)return s.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Br,{className:"mx-auto h-12 w-12 text-blue-500 animate-pulse"}),s.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"Cargando información de la caja..."})]})});if(!e)return s.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-md w-full max-w-sm mx-4",children:[s.jsx(t8,{className:"mx-auto h-12 w-12 text-blue-500 mb-4"}),s.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No hay una caja abierta"}),s.jsx("p",{className:"mt-2 text-gray-600 mb-6",children:"Por favor, abre una caja para comenzar a operar."}),s.jsxs("div",{className:"mb-4 text-left",children:[s.jsx("label",{htmlFor:"montoInicialApertura",className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto Inicial"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"$"}),s.jsx("input",{type:"number",id:"montoInicialApertura",className:"w-full pl-7 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",value:x,onChange:K=>y(K.target.value),placeholder:"0"})]})]}),s.jsxs("div",{className:"mb-6 text-left",children:[s.jsx("label",{htmlFor:"cajaIdApertura",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de Caja"}),s.jsx("input",{type:"text",id:"cajaIdApertura",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",value:p,onChange:K=>b(K.target.value),placeholder:"Ej: caja_001"})]}),s.jsxs("button",{onClick:ee,disabled:!x||!p||isNaN(parseFloat(x)),className:"w-full mt-6 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-base shadow-sm",children:[s.jsx(d8,{className:"w-5 h-5 mr-2"})," Abrir Caja"]})]})});const te=n||l,B=new Date().toLocaleDateString("es-CL"),E=new Date().toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"}),O=i!=null&&i.nombre?`${i.nombre} ${(i==null?void 0:i.apellidos)||""}`:"Usuario";return s.jsxs("div",{className:"min-h-screen bg-[#F8F9FB] flex flex-col font-sans",children:[s.jsx(It,{title:"Cierre de caja",icon:s.jsx(Br,{className:"w-6 h-6"}),heightClass:"h-20",userName:((M=i==null?void 0:i.user_metadata)==null?void 0:M.full_name)||(i==null?void 0:i.email)||"Usuario",userAvatarSrc:((q=i==null?void 0:i.user_metadata)==null?void 0:q.avatar_url)||""}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"p-4 md:p-6",children:[" ",s.jsxs("div",{className:"flex bg-white rounded-lg shadow-[0_1px_3px_rgba(0,0,0,0.05)] border border-[#E0E0E0] max-w-7xl mx-auto overflow-hidden",children:[s.jsxs("div",{className:"w-3/5 p-6 border-r border-[#E0E0E0]",children:[s.jsx("h2",{className:"text-xl font-semibold text-[#333333] mb-4"}),s.jsxs("div",{className:"space-y-3 border-b border-[#E0E0E0] pb-4 mb-4 text-sm text-[#505050]",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center text-[#505050]",children:[s.jsx(da,{size:14,className:"mr-2 text-[#828282]"}),"Fecha del cierre"]}),s.jsxs("span",{className:"font-medium text-[#505050] text-right",children:[B,s.jsx("span",{className:"ml-2 inline-flex items-center justify-center w-6 h-6 bg-[#F1F3F5] rounded-full",children:s.jsx(da,{size:12,className:"text-[#828282]"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center text-[#505050]",children:[s.jsx(As,{size:14,className:"mr-2 text-[#828282]"}),"Hora de cierre"]}),s.jsxs("span",{className:"font-medium text-[#505050] text-right",children:[E,s.jsx("span",{className:"ml-2 inline-flex items-center justify-center w-6 h-6 bg-[#F1F3F5] rounded-full",children:s.jsx(As,{size:12,className:"text-[#828282]"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsx("span",{className:"flex items-center text-[#505050]",children:"Caja de"}),s.jsx("span",{className:"font-medium text-[#505050]",children:O})]})]}),s.jsx("h3",{className:"text-sm font-semibold text-[#505050] mb-2",children:"Resumen de ventas"}),s.jsxs("div",{className:"space-y-2 border-b border-[#E0E0E0] pb-4 mb-4",children:[s.jsx(Si,{label:"Tarjeta (1)",value:`+ ${S(C)}`,icon:void 0}),s.jsx(Si,{label:"Efectivo (2)",value:`+ ${S(N)}`,icon:void 0}),s.jsx(Si,{label:"Resumen de ventas",value:S(k),colorClass:"text-[#505050] font-medium",icon:void 0})]}),s.jsx("h3",{className:"text-sm font-semibold text-[#505050] mb-2",children:"Resumen de Caja"}),s.jsxs("div",{className:"space-y-2 border-b border-[#E0E0E0] pb-4 mb-4",children:[s.jsx(Si,{label:"Efectivo (2)",value:`+ ${S(e.monto_inicial+N+_)}`,icon:void 0}),s.jsx(Si,{label:"Tarjeta (1)",value:`+ ${S(C)}`,icon:void 0}),s.jsx(Si,{label:"Retiro de efectivo",value:`- ${S(A)}`,icon:void 0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mt-4",children:[s.jsxs("div",{className:"bg-[#F8F9FB] p-4 rounded-lg border border-[#E0E0E0] flex flex-col justify-between",children:[s.jsx("label",{className:"block text-xs font-normal text-[#828282] mb-1",children:"Total Teórico"}),s.jsx("p",{className:"text-xl font-bold text-[#505050]",children:S(T)})]}),s.jsxs("div",{className:"bg-[#F8F9FB] p-4 rounded-lg border border-[#E0E0E0] flex flex-col justify-between",children:[s.jsx("label",{className:"block text-xs font-normal text-[#828282] mb-1",children:"Total Real"}),s.jsx("input",{type:"number",value:m,onChange:K=>v(K.target.value),className:"w-full text-center text-xl font-bold text-[#505050] bg-transparent focus:outline-none",placeholder:"0"})]}),s.jsxs("div",{className:"bg-[#F8F9FB] p-4 rounded-lg border border-[#E0E0E0] flex flex-col justify-between",children:[s.jsx("label",{className:"block text-xs font-normal text-[#828282] mb-1",children:"Diferencia"}),s.jsx("p",{className:`text-xl font-bold ${U===0?"text-[#2196F3]":U>0?"text-green-500":"text-red-500"}`,children:S(Math.abs(U))})]})]}),s.jsx("button",{onClick:I,disabled:te,className:"w-full mt-6 bg-[#2196F3] text-white py-3 rounded-lg font-semibold hover:bg-[#1976D2] disabled:opacity-50 disabled:cursor-not-allowed transition-all text-base shadow-[0_2px_4px_rgba(33,150,243,0.2)]",children:te?"Cerrando Caja...":"Cerrar caja"})]}),s.jsxs("div",{className:"w-2/5 p-6 bg-gray-50",children:[s.jsxs("h2",{className:"text-lg font-semibold text-[#333333] mb-4 flex items-center",children:[s.jsx(n8,{className:"mr-2 h-5 w-5 text-[#2196F3]"})," Resumen de documentos"]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"filterType",className:"sr-only",children:"Filtrar documentos"}),s.jsxs("select",{id:"filterType",className:" bg-gray-100 block w-full p-2 border border-[#E0E0E0] rounded-md shadow-sm focus:outline-none focus:ring-[#2196F3] focus:border-[#2196F3] text-sm text-[#505050]",value:w,onChange:K=>j(K.target.value),children:[s.jsx("option",{value:"all",children:"Ventas totales"}),s.jsx("option",{value:"boleta",children:"Boleta"}),s.jsx("option",{value:"factura",children:"Factura"}),s.jsx("option",{value:"nota_credito",children:"Nota de Crédito"})]})]}),s.jsx("div",{className:"border border-[#E0E0E0] rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-left divide-y divide-[#E0E0E0]",children:[s.jsx("thead",{className:"bg-[#F8F9FB]",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium text-[#828282] uppercase text-xs tracking-wider",children:"Tipo documento"}),s.jsx("th",{className:"px-4 py-3 font-medium text-[#828282] uppercase text-xs tracking-wider",children:"Hora"}),s.jsx("th",{className:"px-4 py-3 font-medium text-[#828282] uppercase text-xs tracking-wider",children:"Folio"}),s.jsx("th",{className:"px-4 py-3 font-medium text-[#828282] uppercase text-xs tracking-wider",children:"Método de pago"}),s.jsx("th",{className:"px-4 py-3 font-medium text-[#828282] uppercase text-xs tracking-wider text-right",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-[#E0E0E0]",children:u.length>0?u.filter(K=>w==="all"||K.tipo_dte===w).map(K=>s.jsxs("tr",{className:"hover:bg-[#F8F9FB]",children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap capitalize text-[#505050]",children:K.tipo_dte}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-[#505050]",children:new Date(K.fecha).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-[#505050]",children:K.folio}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap capitalize text-[#505050]",children:K.metodo_pago}),s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-right font-mono text-[#505050] font-semibold",children:S(K.total)})]},K.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No se realizaron ventas en este período."})})})]})})})]})]})]})})]})},AB=({isOpen:e,onClose:t,ventaId:r,itemsToReturn:n=[],total:a=0})=>{const[i,o]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(!1),[f,h]=g.useState(!1),[m,v]=g.useState(!1),[x,y]=g.useState({tipoDevolucion:"Tipo de devolución",fecha:"18/05/2025",motivo:"Escribir motivo...",numeroFolio:"342043593"}),{user:p}=ze(),b=En();if(!e)return null;const w=()=>{d(!0)},j=async()=>{if(!r||n.length===0){D.error("No hay ítems para devolver");return}v(!0);try{const{data:S,error:N}=await re.from("devoluciones").insert({venta_id:r,usuario_id:p==null?void 0:p.id,tipo:"parcial",motivo:x.motivo,monto_devuelto:a,fecha:new Date().toISOString()}).select().single();if(N||!S)throw new Error((N==null?void 0:N.message)||"Error al crear la devolución");const C=n.map(A=>({devolucion_id:S.id,venta_item_id:A.id,cantidad_devuelta:A.cantidad})),{error:_}=await re.from("devolucion_items").insert(C);if(_)throw new Error(_.message||"Error al crear los ítems de devolución");h(!0)}catch(S){D.error("Error al procesar la devolución: "+S.message)}finally{v(!1)}};return f?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nota de crédito generada"}),s.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-6",children:"Enviar por correo electrónico (Opcional)"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{className:"flex-1 bg-blue-100 text-blue-700 py-3 rounded-lg font-medium hover:bg-blue-200 transition-colors",children:"Enviar"}),s.jsx("button",{onClick:()=>{h(!1),t(),b("/")},className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Imprimir"})]})]})]})}):u?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Devolución"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[s.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el producto o servicio",value:i,onChange:S=>o(S.target.value),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium text-gray-700 border-b pb-2 mb-4",children:[s.jsx("span",{children:"Producto"}),s.jsx("span",{children:"Cantidad"}),s.jsx("span",{children:"Descuento"}),s.jsx("span",{children:"Importe"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"Ejemplo producto 1"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center hover:bg-gray-300",children:s.jsx("span",{className:"text-xs",children:"-"})}),s.jsx("span",{className:"w-8 text-center",children:"1"}),s.jsx("button",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center hover:bg-gray-300",children:s.jsx("span",{className:"text-xs",children:"+"})})]}),s.jsx("span",{className:"text-sm",children:"0%"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"34 $"}),s.jsx("button",{className:"text-red-500 hover:text-red-700",children:s.jsx(De,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"N° Líneas 1 / Tot. items 1 | Nota de crédito manual (No...)"}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold mb-2",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:"204 $"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Anular venta"})]})]}),s.jsxs("div",{className:"w-96 p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de devolución"}),s.jsx("select",{value:x.tipoDevolucion,onChange:S=>y(N=>({...N,tipoDevolucion:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:s.jsx("option",{children:"Tipo de devolución"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"date",value:"2025-05-18",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx("svg",{className:"ml-2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),s.jsx("textarea",{value:x.motivo,onChange:S=>y(N=>({...N,motivo:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-20 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de folio"}),s.jsx("input",{type:"text",value:x.numeroFolio,onChange:S=>y(N=>({...N,numeroFolio:S.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 text-lg font-semibold",children:[s.jsx("span",{children:"Devolución total"}),s.jsx("span",{children:"204 $"})]}),s.jsx("button",{onClick:j,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Confirmar devolución"})]})]})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Devolución"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[s.jsxs("div",{className:"flex-1 p-6 border-r border-gray-200",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el producto o servicio",value:i,onChange:S=>o(S.target.value),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium text-gray-700 border-b pb-2 mb-4",children:[s.jsx("span",{children:"Producto"}),s.jsx("span",{children:"Cantidad"}),s.jsx("span",{children:"Descuento"}),s.jsx("span",{children:"Importe"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:"Ejemplo producto 1"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center hover:bg-gray-300",children:s.jsx("span",{className:"text-xs",children:"-"})}),s.jsx("span",{className:"w-8 text-center",children:"1"}),s.jsx("button",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center hover:bg-gray-300",children:s.jsx("span",{className:"text-xs",children:"+"})})]}),s.jsx("span",{className:"text-sm",children:"0%"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"34 $"}),s.jsx("button",{className:"text-red-500 hover:text-red-700",children:s.jsx(De,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"N° Líneas 1 / Tot. items 1 | Nota de crédito manual (No...)"}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold mb-2",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:"204 $"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Anular venta"})]})]}),s.jsxs("div",{className:"w-96 p-6 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Folio de documento"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el número de folio",value:l,onChange:S=>c(S.target.value),className:"w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 mb-4",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Folio: 342043593"}),s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})}),s.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),s.jsx("button",{onClick:w,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Devolver"})]})]})]})})},DB=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(""),[a,i]=g.useState(""),{empresaId:o,user:l}=ze(),[c,u]=g.useState([]),[d,f]=g.useState({}),[h,m]=g.useState(!1),[v,x]=g.useState(!0),[y,p]=g.useState("Nota de crédito manual"),[b,w]=g.useState(""),[j,S]=g.useState(!1),[N,C]=g.useState(!1),[_,A]=g.useState({nombre:"",rut:"12.345.678-9",correo:"",tipoReembolso:"efectivo",cuentaTarjeta:""}),[k,T]=g.useState({tipoCuenta:"",numeroCuenta:"",nombreBanco:""});g.useState(!1);const[U,I]=g.useState(""),[ee,te]=g.useState(!1),[B,E]=g.useState(null);g.useEffect(()=>{u([{id:"example-item-1",nombre:"Ejemplo producto 1",cantidad:2,precio:34.5,returnable:2},{id:"example-item-2",nombre:"Ejemplo producto 2",cantidad:1,precio:68.5,returnable:1}]),t("342043593"),f({"example-item-1":1,"example-item-2":1})},[]);const O=Object.entries(d).reduce((P,[G,X])=>{const R=c.find(Y=>Y.id===G);return P+(R?R.precio*X:0)},0),M=P=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(P),q=async()=>{if(!r.trim()){D.error("Por favor, ingresa un número de folio.");return}m(!0);try{if(!o){E({id:"example-venta-"+Date.now(),folio:r||"12345",empresa_id:"example-empresa"}),t(r||"12345"),u([{id:"example-item-1",nombre:"Ejemplo producto 1",cantidad:2,precio:34.5,returnable:2},{id:"example-item-2",nombre:"Ejemplo producto 2",cantidad:1,precio:68.5,returnable:1}]),x(!0);return}try{const{data:P,error:G}=await re.from("ventas").select("*").eq("folio",r).eq("empresa_id",o).single();if(G||!P){E({id:"example-venta-"+Date.now(),folio:r||"12345",empresa_id:o}),t(r||"12345"),u([{id:"example-item-1",nombre:"Ejemplo producto 1",cantidad:2,precio:34.5,returnable:2},{id:"example-item-2",nombre:"Ejemplo producto 2",cantidad:1,precio:68.5,returnable:1}]),x(!0);return}E(P),t(r);const{data:X,error:R}=await re.from("venta_items").select(`
            id,
            cantidad,
            precio_unitario,
            productos (
              id,
              nombre
            )
          `).eq("venta_id",P.id);if(R||!X||X.length===0)u([{id:"example-item-1",nombre:"Ejemplo producto 1",cantidad:2,precio:34.5,returnable:2},{id:"example-item-2",nombre:"Ejemplo producto 2",cantidad:1,precio:68.5,returnable:1}]);else{const Y=X.map(se=>{var z;return{id:se.id,nombre:((z=se.productos)==null?void 0:z.nombre)||"Producto sin nombre",cantidad:se.cantidad,precio:se.precio_unitario,returnable:se.cantidad}});u(Y)}f({}),x(!0)}catch(P){console.error("Error loading venta:",P),E({id:"example-venta-"+Date.now(),folio:r||"12345",empresa_id:o||"example-empresa"}),t(r||"12345"),u([{id:"example-item-1",nombre:"Ejemplo producto 1",cantidad:2,precio:34.5,returnable:2},{id:"example-item-2",nombre:"Ejemplo producto 2",cantidad:1,precio:68.5,returnable:1}]),x(!0)}}catch(P){D.error("Error al cargar la venta: "+P.message),t(""),x(!1)}finally{m(!1)}},K=()=>{if(!v||O===0){D.error("No hay ítems seleccionados para devolver o la venta no ha sido cargada.");return}C(!0)},V=()=>{if(!_.nombre||!_.rut||!_.correo){D.error("Por favor complete todos los campos del cliente");return}if(_.tipoReembolso==="bancario"&&!_.cuentaTarjeta){D.error("Por favor ingrese la cuenta/tarjeta para reembolso bancario");return}C(!1),te(!0)},le=()=>{try{const P=`
        <div style="font-family: 'Courier New', monospace; width: 80mm; margin: 0 auto; padding: 20px;">
          <div style="text-align: center; border-bottom: 1px dashed #000; padding-bottom: 15px; margin-bottom: 15px;">
            <div style="font-size: 16px; font-weight: bold;">ANROLTEC SPA</div>
            <div style="font-size: 10px;">RUT: 78.168.951-3</div>
            <div style="font-size: 10px;">Av. Providencia 1234, Santiago</div>
          </div>
          
          <div style="text-align: center; font-weight: bold; margin: 10px 0;">
            NOTA DE CRÉDITO
          </div>
          <div style="font-size: 10px;">Folio: NC-${e}</div>
          <div style="font-size: 10px;">Cliente: ${_.nombre}</div>
          <div style="font-size: 10px;">RUT: ${_.rut}</div>
          <div style="font-size: 10px;">Email: ${_.correo}</div>
          <div style="font-size: 10px;">Reembolso: ${_.tipoReembolso}</div>
          ${_.tipoReembolso==="bancario"?`<div style="font-size: 10px;">Cuenta: ${_.cuentaTarjeta}</div>`:""}
          <div style="font-size: 10px;">Total: ${M(O)}</div>
          <div style="font-size: 10px;">Fecha: ${new Date().toLocaleDateString("es-CL")}</div>
          
          <div style="text-align: center; margin-top: 20px; border-top: 1px dashed #000; padding-top: 10px;">
            <div style="font-size: 9px;">Nota de crédito generada</div>
            <div style="font-size: 9px;">Powered by Solvendo</div>
          </div>
        </div>
      `,G=window.open("","_blank","width=400,height=600");G&&(G.document.write(`
          <!DOCTYPE html>
          <html>
          <head><title>Nota de Crédito</title></head>
          <body>${P}</body>
          <script>window.onload = function() { window.print(); setTimeout(function() { window.close(); }, 1000); }<\/script>
          </html>
        `),G.document.close())}catch(P){console.error("Error al imprimir:",P)}te(!1),D.success("Devolución procesada correctamente"),Object.entries(d).map(([P,G])=>{const X=c.find(R=>R.id===+P);return{id:+P,nombre:(X==null?void 0:X.nombre)||"Producto desconocido",cantidad:G,precio:(X==null?void 0:X.precio)||0,subtotal:((X==null?void 0:X.precio)||0)*G}}),S(!0)},ge=()=>{t(""),n(""),u([]),f({}),x(!1),p("Nota de crédito manual"),w(""),C(!1),te(!1),D("Devolución cancelada.",{icon:"👋"})},ce=()=>{D.error("La anulación de venta completa no está implementada en este demo.")};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Devolución",icon:s.jsx(Sj,{className:"w-6 h-6 text-gray-600"}),showClock:!0,userName:(l==null?void 0:l.nombre)||"Usuario",userAvatarUrl:l==null?void 0:l.avatar_url}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 bg-white p-6 shadow-md flex flex-col",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el producto o servicio",value:a,onChange:P=>i(P.target.value),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(dt,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium border-b border-gray-200 pb-2 mb-4 text-gray-600",children:[s.jsx("span",{className:"pl-1",children:"Producto"}),s.jsx("span",{className:"text-center",children:"Cantidad"}),s.jsx("span",{className:"text-center",children:"Descuento"}),s.jsx("span",{className:"text-right pr-1",children:"Importe"})]}),s.jsx("div",{className:"space-y-3 pb-4 flex-grow overflow-y-auto",children:c.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Busque un folio para cargar los ítems retornables."}):c.map(P=>{const G=d[P.id]||0;return s.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("span",{className:"text-gray-800",children:P.nombre}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{disabled:G<=0,onClick:()=>f(X=>({...X,[P.id]:G-1})),className:"p-1 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(s0,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center font-semibold text-gray-800",children:G}),s.jsx("button",{disabled:G>=P.returnable,onClick:()=>f(X=>({...X,[P.id]:G+1})),className:"p-1 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(qt,{className:"w-4 h-4"})})]}),s.jsx("span",{className:"text-center text-gray-800",children:"0%"}),s.jsxs("div",{className:"flex items-center justify-between pl-4",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:M(P.precio*G)}),s.jsx("button",{onClick:()=>{const X={...d};delete X[P.id],f(X)},className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-gray-100 transition-colors",children:s.jsx(De,{className:"w-4 h-4"})})]})]},P.id)})}),s.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{className:"text-sm text-gray-600 flex-none",children:["N° Líneas: ",c.length," / Tot. ítems: ",Object.values(d).reduce((P,G)=>P+G,0)]}),s.jsxs("select",{value:y,onChange:P=>p(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm text-gray-700 focus:ring-blue-500 focus:border-blue-500 flex-grow max-w-[200px]",children:[s.jsx("option",{children:"Nota de crédito manual"}),s.jsx("option",{children:"Nota electrónica"})]}),s.jsxs("div",{className:"relative flex-grow min-w-[180px] max-w-[250px]",children:[s.jsx("input",{type:"text",placeholder:"Buscar cliente",value:b,onChange:P=>w(P.target.value),className:"w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg bg-white text-sm text-gray-700 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(dt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-gray-100 rounded-lg flex items-center gap-1 text-sm text-gray-700 hover:bg-gray-200 transition-colors border border-gray-200 shadow-sm",children:[s.jsx(De,{className:"w-4 h-4 text-gray-500"})," Cancelar"]}),s.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-gray-100 rounded-lg flex items-center gap-1 text-sm text-gray-700 hover:bg-gray-200 transition-colors border border-gray-200 shadow-sm",children:[s.jsx(De,{className:"w-4 h-4 text-gray-500"})," Anular venta"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total"}),s.jsx("span",{className:"text-xl font-bold text-gray-900",children:M(O)}),s.jsx("button",{onClick:K,disabled:!v||O===0||h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors shadow-md text-base",children:h?"Procesando...":"Devolver"})]})]})]})]}),s.jsxs("aside",{className:"w-96 bg-white p-6 flex flex-col shadow-md border-l border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center text-blue-800 font-medium mb-3",children:[s.jsx(dt,{className:"w-4 h-4 mr-2"})," Folio de documento"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Ingresa aquí el número de folio",value:clientSearchTerm,onChange:P=>setClientSearchTermMain(P.target.value),value:r,onChange:P=>n(P.target.value),onKeyPress:P=>{P.key==="Enter"&&q()},className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{onClick:q,disabled:h,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-blue-600 focus:outline-none",children:s.jsx(dt,{className:"w-5 h-5"})})]})]}),e&&s.jsxs("div",{className:"flex flex-col gap-1 mb-4 text-gray-700",children:[s.jsx("span",{className:"text-sm",children:"Folio:"}),s.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-3 rounded-lg border border-gray-200",children:[s.jsx("span",{className:"font-semibold text-base",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-600",children:s.jsx(Qu,{className:"w-5 h-5"})}),s.jsx("span",{className:"text-gray-400",children:s.jsx(o0,{className:"w-5 h-5"})})]})]})]}),s.jsx("div",{className:"mt-auto"})]})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Datos del Cliente"}),s.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sa,{className:"w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:_.nombre,onChange:P=>A(G=>({...G,nombre:P.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Nombre del cliente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUT *"}),s.jsx("input",{type:"text",value:_.rut,onChange:P=>A(G=>({...G,rut:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"12.345.678-9",disabled:!1})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de devolución *"}),s.jsx("textarea",{value:U,onChange:P=>I(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-20 resize-none",placeholder:"Ingrese el motivo de la devolución..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electrónico *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l8,{className:"w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:_.correo,onChange:P=>A(G=>({...G,correo:P.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",placeholder:"cliente@ejemplo.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de reembolso *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i0,{className:"w-4 h-4 text-gray-400"}),s.jsxs("select",{value:_.tipoReembolso,onChange:P=>A(G=>({...G,tipoReembolso:P.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"efectivo",children:"Efectivo"}),s.jsx("option",{value:"bancario",children:"Bancario"})]})]})]}),_.tipoReembolso==="bancario"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de cuenta *"}),s.jsxs("select",{value:k.tipoCuenta,onChange:P=>T(G=>({...G,tipoCuenta:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Seleccionar tipo"}),s.jsx("option",{value:"corriente",children:"Cuenta Corriente"}),s.jsx("option",{value:"ahorro",children:"Cuenta de Ahorro"}),s.jsx("option",{value:"vista",children:"Cuenta Vista"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de cuenta *"}),s.jsx("input",{type:"text",value:k.numeroCuenta,onChange:P=>T(G=>({...G,numeroCuenta:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Número de cuenta"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del banco *"}),s.jsxs("select",{value:k.nombreBanco,onChange:P=>T(G=>({...G,nombreBanco:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Seleccionar banco"}),s.jsx("option",{value:"banco_chile",children:"Banco de Chile"}),s.jsx("option",{value:"banco_estado",children:"Banco Estado"}),s.jsx("option",{value:"santander",children:"Santander"}),s.jsx("option",{value:"bci",children:"BCI"}),s.jsx("option",{value:"scotiabank",children:"Scotiabank"}),s.jsx("option",{value:"itau",children:"Itaú"}),s.jsx("option",{value:"security",children:"Security"}),s.jsx("option",{value:"falabella",children:"Falabella"})]})]})]})]}),s.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>C(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:V,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Continuar"})]})]})}),ee&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nota de crédito generada"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Enviar por correo electrónico (Opcional)"}),s.jsxs("div",{className:"flex mb-4",children:[s.jsx("input",{type:"email",placeholder:"Email",defaultValue:_.correo,className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>D.success("Nota de crédito enviada por email"),className:"bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700",children:"Enviar"})]}),s.jsx("button",{onClick:le,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700",children:"Imprimir"})]})})}),s.jsx(AB,{isOpen:j,onClose:()=>S(!1),ventaId:B==null?void 0:B.id,itemsToReturn:Object.entries(d).map(([P,G])=>{const X=c.find(R=>R.id===+P);return{id:P,nombre:(X==null?void 0:X.nombre)||"Producto desconocido",cantidad:G,precio:(X==null?void 0:X.precio)||0,subtotal:((X==null?void 0:X.precio)||0)*G}}),total:O})]})},IB=({onClose:e})=>{const[t,r]=g.useState({fecha:new Date().toISOString().split("T")[0],efectivoSistema:15e4,efectivoContado:148500,diferencia:-1500,observaciones:""}),n=i=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(i),a=()=>{console.log("Guardando arqueo:",t),e()};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Arqueo de caja",icon:s.jsx(Br,{className:"w-6 h-6 text-gray-600"})}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del arqueo"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha del arqueo"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:t.fecha,onChange:i=>r(o=>({...o,fecha:i.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx(da,{className:"w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caja"}),s.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:s.jsx("option",{children:"Caja Principal"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Efectivo según sistema"}),s.jsx("div",{className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",children:n(t.efectivoSistema)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Efectivo contado físicamente"}),s.jsx("input",{type:"number",value:t.efectivoContado,onChange:i=>r(o=>({...o,efectivoContado:parseFloat(i.target.value),diferencia:parseFloat(i.target.value)-o.efectivoSistema})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diferencia"}),s.jsx("div",{className:`px-3 py-2 border border-gray-300 rounded-lg ${t.diferencia===0?"bg-green-50 text-green-800":t.diferencia>0?"bg-blue-50 text-blue-800":"bg-red-50 text-red-800"}`,children:n(t.diferencia)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),s.jsx("textarea",{value:t.observaciones,onChange:i=>r(o=>({...o,observaciones:i.target.value})),placeholder:"Ingrese observaciones sobre el arqueo...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-24 resize-none"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:a,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Guardar arqueo"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen del día"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Ventas en efectivo"}),s.jsx("span",{className:"font-semibold",children:n(85e3)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Ingresos adicionales"}),s.jsx("span",{className:"font-semibold",children:n(15e3)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Retiros de efectivo"}),s.jsxs("span",{className:"font-semibold",children:["-",n(5e3)]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Efectivo inicial"}),s.jsx("span",{className:"font-semibold",children:n(55e3)})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-100 rounded-lg",children:[s.jsx("span",{className:"font-semibold",children:"Total esperado"}),s.jsx("span",{className:"font-bold text-lg",children:n(t.efectivoSistema)})]})}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Estado del arqueo"}),s.jsx("div",{className:`p-4 rounded-lg text-center ${t.diferencia===0?"bg-green-100 text-green-800":Math.abs(t.diferencia)<=1e3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.diferencia===0?"✅ Caja cuadrada":Math.abs(t.diferencia)<=1e3?"⚠️ Diferencia menor":"❌ Diferencia significativa"})]})]})]})]})})})]})},MB=({onClose:e})=>{const[t,r]=g.useState([]),[n,a]=g.useState(!1),[i,o]=g.useState({fechaInicio:new Date().toISOString().split("T")[0],fechaFin:new Date().toISOString().split("T")[0],tipo:"todos"}),{empresaId:l}=ze();g.useEffect(()=>{c()},[i]);const c=async()=>{if(l){a(!0);try{const{data:x,error:y}=await re.from("movimientos_caja").select(`
          *,
          usuarios!inner(nombre, apellidos)
        `).gte("fecha::date",i.fechaInicio).lte("fecha::date",i.fechaFin).order("fecha",{ascending:!1});if(y)throw y;const p=(x||[]).map(b=>({id:b.id,tipo:b.tipo,monto:b.monto,observacion:b.observacion,fecha:b.fecha,usuario_nombre:`${b.usuarios.nombre} ${b.usuarios.apellidos}`}));r(p)}catch(x){console.error("Error loading movements:",x),D.error("Error al cargar movimientos")}finally{a(!1)}}},u=async x=>{if(confirm("¿Está seguro de eliminar este movimiento?"))try{const{error:y}=await re.from("movimientos_caja").delete().eq("id",x);if(y)throw y;D.success("Movimiento eliminado correctamente"),c()}catch(y){console.error("Error deleting movement:",y),D.error("Error al eliminar movimiento")}},d=()=>{c(),D.success("Filtros aplicados correctamente")},f=x=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(x),h=x=>new Date(x).toLocaleString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=(t||[]).filter(x=>i.tipo==="todos"||x.tipo===i.tipo),v=m.reduce((x,y)=>(y.tipo==="ingreso"||y.tipo==="venta"?x.ingresos+=y.monto:x.egresos+=y.monto,x),{ingresos:0,egresos:0});return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Historial de movimientos",icon:s.jsx(i8,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(wj,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha inicio"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:i.fechaInicio,onChange:x=>o(y=>({...y,fechaInicio:x.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx(da,{className:"w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha fin"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:i.fechaFin,onChange:x=>o(y=>({...y,fechaFin:x.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx(da,{className:"w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de movimiento"}),s.jsxs("select",{value:i.tipo,onChange:x=>o(y=>({...y,tipo:x.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"todos",children:"Todos"}),s.jsx("option",{value:"ingreso",children:"Ingresos"}),s.jsx("option",{value:"retiro",children:"Retiros"}),s.jsx("option",{value:"venta",children:"Ventas"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Aplicar filtros"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Nj,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Total Ingresos"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:f(v.ingresos)})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(p8,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"text-sm font-medium text-red-800",children:"Total Egresos"})]}),s.jsx("p",{className:"text-2xl font-bold text-red-900",children:f(v.egresos)})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Saldo Neto"})}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:f(v.ingresos-v.egresos)})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Movimientos (",m.length,")"]})}),n?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando movimientos..."}):m.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay movimientos en el período seleccionado"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha y Hora"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Observación"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h(x.fecha)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.tipo==="ingreso"?"bg-green-100 text-green-800":x.tipo==="retiro"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:x.tipo.charAt(0).toUpperCase()+x.tipo.slice(1)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("span",{className:x.tipo==="retiro"?"text-red-600":"text-green-600",children:[x.tipo==="retiro"?"-":"+",f(x.monto)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.usuario_nombre||"N/A"}),s.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 flex items-center justify-between",children:[s.jsx("span",{children:x.observacion||"-"}),s.jsx("button",{onClick:()=>u(x.id),className:"text-red-500 hover:text-red-700",children:s.jsx(nl,{className:"w-4 h-4"})})]})]},x.id))})]})})]})]})]})},$B=({onClose:e})=>{const[t,r]=g.useState([]),[n,a]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[f,h]=g.useState({nombre:"",descripcion:"",activo:!0}),{empresaId:m}=ze();g.useEffect(()=>{v()},[]);const v=async()=>{if(m){a(!0);try{const{data:w,error:j}=await re.from("categorias").select("*").eq("empresa_id",m).eq("activo",!0).order("created_at",{ascending:!1});if(j)throw j;r(w||[])}catch(w){console.error("Error loading categories:",w),toast.error("Error al cargar categorías")}finally{a(!1)}}},x=async()=>{if(!(!m||!f.nombre.trim())){a(!0);try{if(l){const{error:w}=await re.from("categorias").update(f).eq("id",l.id);if(w)throw w;toast.success("Categoría actualizada correctamente")}else{const{error:w}=await re.from("categorias").insert([{empresa_id:m,...f}]);if(w)throw w;toast.success("Categoría creada correctamente")}o(!1),c(null),h({nombre:"",descripcion:"",activo:!0}),v()}catch(w){console.error("Error saving category:",w),toast.error("Error al guardar categoría")}finally{a(!1)}}},y=w=>{c(w),h({nombre:w.nombre,descripcion:w.descripcion,activo:w.activo}),o(!0)},p=async w=>{if(confirm("¿Está seguro de eliminar esta categoría?")){a(!0);try{const{error:j}=await re.from("categorias").update({activo:!1}).eq("id",w);if(j)throw j;toast.success("Categoría eliminada correctamente"),v()}catch(j){console.error("Error deleting category:",j),toast.error("Error al eliminar categoría")}finally{a(!1)}}},b=t.filter(w=>{var j;return w.nombre.toLowerCase().includes(u.toLowerCase())||((j=w.descripcion)==null?void 0:j.toLowerCase().includes(u.toLowerCase()))});return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Gestión de categorías",icon:s.jsx(qc,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 mr-4",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar categorías...",value:u,onChange:w=>d(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(qt,{className:"w-4 h-4"}),"Nueva categoría"]})]}),n?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cargando categorías..."}):b.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:u?"No se encontraron categorías":"No hay categorías registradas"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(w=>s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:w.nombre}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.descripcion||"Sin descripción"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>y(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(l0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p(w.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(nl,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.activo?"Activa":"Inactiva"}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(w.created_at).toLocaleDateString("es-CL")})]})]},w.id))})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l?"Editar categoría":"Nueva categoría"}),s.jsx("button",{onClick:()=>{o(!1),c(null),h({nombre:"",descripcion:"",activo:!0})},className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),s.jsx("input",{type:"text",value:f.nombre,onChange:w=>h(j=>({...j,nombre:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nombre de la categoría"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("textarea",{value:f.descripcion,onChange:w=>h(j=>({...j,descripcion:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-20 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripción de la categoría"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"activo",checked:f.activo,onChange:w=>h(j=>({...j,activo:w.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"activo",className:"ml-2 text-sm text-gray-700",children:"Categoría activa"})]})]}),s.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{o(!1),c(null),h({nombre:"",descripcion:"",activo:!0})},className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:x,disabled:!f.nombre.trim(),className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Actualizar":"Crear"})]})]})})]})},LB=({onClose:e})=>{const{empresaId:t,user:r}=ze(),[n,a]=g.useState(""),[i,o]=g.useState(!1),[l,c]=g.useState(""),[u,d]=g.useState(!1),[f,h]=g.useState(null),[m,v]=g.useState(!1),[x,y]=g.useState({codigo:"",nombre:"",precio:0,barcode:""}),[p,b]=g.useState([]);g.useEffect(()=>{t&&w()},[t]);const w=async()=>{v(!0);try{const{data:k,error:T}=await re.from("productos").select("id, codigo, nombre, precio, codigo_barras").eq("empresa_id",t).order("nombre",{ascending:!0});if(T)throw T;const U=(k||[]).map(I=>({id:I.id,codigo:I.codigo,nombre:I.nombre,precio:I.precio,barcode:I.codigo_barras||""}));b(U)}catch(k){console.error("Error loading products:",k),D.error("Error al cargar productos")}finally{v(!1)}},j=k=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(k),S=()=>{o(!0);try{setTimeout(()=>{const k="7891234567892";c(k),o(!1);const T=p.find(U=>U.barcode===k);T?D.success(`Producto encontrado: ${T.nombre}`):(y(U=>({...U,barcode:k})),d(!0))},2e3)}catch{o(!1),D.error("Error al escanear código de barras")}},N=async()=>{if(!(!x.codigo||!x.nombre||!x.barcode)){v(!0);try{if(f){const{error:k}=await re.from("productos").update({codigo:x.codigo,nombre:x.nombre,precio:x.precio,codigo_barras:x.barcode}).eq("id",f.id);if(k)throw k;D.success("Producto actualizado correctamente")}else{const{error:k}=await re.from("productos").insert({empresa_id:t,codigo:x.codigo,nombre:x.nombre,precio:x.precio,codigo_barras:x.barcode,stock:0,activo:!0});if(k)throw k;D.success("Producto creado correctamente")}await w(),d(!1),h(null),y({codigo:"",nombre:"",precio:0,barcode:""})}catch(k){console.error("Error saving product:",k),D.error("Error al guardar producto")}finally{v(!1)}}},C=k=>{h(k),y({codigo:k.codigo,nombre:k.nombre,precio:k.precio,barcode:k.barcode}),d(!0)},_=async k=>{if(confirm("¿Está seguro de eliminar este producto?")){v(!0);try{const{error:T}=await re.from("productos").update({activo:!1}).eq("id",k);if(T)throw T;D.success("Producto eliminado correctamente"),await w()}catch(T){console.error("Error deleting product:",T),D.error("Error al eliminar producto")}finally{v(!1)}}},A=p.filter(k=>k.nombre.toLowerCase().includes(n.toLowerCase())||k.codigo.toLowerCase().includes(n.toLowerCase())||k.barcode.includes(n));return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Gestión de códigos de barras",icon:s.jsx(Df,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 mr-4",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, código o código de barras...",value:n,onChange:k=>a(k.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[s.jsx(Df,{className:"w-4 h-4"}),i?"Escaneando...":"Escanear código"]}),s.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(qt,{className:"w-4 h-4"}),"Agregar código"]})]})]}),i&&s.jsx("div",{className:"bg-white rounded-lg p-8 mb-6 shadow-sm text-center",children:s.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[s.jsx(Df,{className:"w-16 h-16 text-blue-600 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Escaneando código de barras"}),s.jsx("p",{className:"text-gray-600",children:"Acerque el código de barras al escáner..."})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Productos con código de barras (",A.length,")"]})}),A.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:n?"No se encontraron productos":"No hay productos con códigos de barras"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código de barras"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(k=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.codigo}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.nombre}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(k.precio)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:k.barcode}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>C(k),className:"text-blue-600 hover:text-blue-900 mr-3",children:s.jsx(l0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_(k.id),className:"text-red-600 hover:text-red-900",children:s.jsx(nl,{className:"w-4 h-4"})})]})]},k.id))})]})})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f?"Editar producto":"Nuevo producto con código de barras"}),s.jsx("button",{onClick:()=>{d(!1),h(null),y({codigo:"",nombre:"",precio:0,barcode:""})},className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código de barras *"}),s.jsx("input",{type:"text",value:x.barcode,onChange:k=>y(T=>({...T,barcode:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Código de barras"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código interno *"}),s.jsx("input",{type:"text",value:x.codigo,onChange:k=>y(T=>({...T,codigo:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Código interno del producto"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del producto *"}),s.jsx("input",{type:"text",value:x.nombre,onChange:k=>y(T=>({...T,nombre:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nombre del producto"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio"}),s.jsx("input",{type:"number",value:x.precio,onChange:k=>y(T=>({...T,precio:parseFloat(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Precio del producto",min:"0",step:"0.01"})]})]}),s.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{d(!1),h(null),y({codigo:"",nombre:"",precio:0,barcode:""})},className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:N,disabled:!x.codigo||!x.nombre||!x.barcode,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Actualizar":"Guardar"})]})]})})]})},RB=({onClose:e})=>{const[t,r]=g.useState(""),[n,a]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState(!1),[u,d]=g.useState({start:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),{empresaId:f}=ze(),h=p=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(p),m=async()=>{if(!(!t||!f)){c(!0);try{const{data:p,error:b}=await re.from("clientes").select("*").eq("empresa_id",f).or(`razon_social.ilike.%${t}%,rut.ilike.%${t}%`).limit(1);if(b)throw b;p&&p.length>0?(a(p[0]),v(p[0].id)):(a(null),o([]))}catch(p){console.error("Error searching client:",p)}finally{c(!1)}}},v=async p=>{if(f){c(!0);try{const{data:b,error:w}=await re.from("ventas").select("*").eq("empresa_id",f).eq("cliente_id",p).gte("fecha",`${u.start}T00:00:00`).lte("fecha",`${u.end}T23:59:59`).order("fecha",{ascending:!1});if(w)throw w;o(b||[])}catch(b){console.error("Error loading client sales:",b)}finally{c(!1)}}};g.useEffect(()=>{n&&v(n.id)},[u]);const x=i.reduce((p,b)=>p+b.total,0),y=i.length>0?x/i.length:0;return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Historial de cliente",icon:s.jsx(sa,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(sa,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Buscar cliente"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre o RUT...",value:t,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("button",{onClick:m,disabled:!t||l,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Buscando...":"Buscar"})]})]}),n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.razon_social}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["RUT: ",n.rut]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Cliente desde"}),s.jsx("span",{className:"font-medium",children:new Date(n.created_at).toLocaleDateString("es-CL")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm text-blue-800",children:"Dirección"}),s.jsxs("p",{className:"font-medium text-blue-900",children:[n.direccion||"No registrada",n.comuna&&`, ${n.comuna}`]})]}),s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm text-green-800",children:"Contacto"}),s.jsx("p",{className:"font-medium text-green-900",children:n.telefono||"No registrado"})]}),s.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm text-purple-800",children:"Email"}),s.jsx("p",{className:"font-medium text-purple-900",children:n.email||"No registrado"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(da,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Período"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha inicio"}),s.jsx("input",{type:"date",value:u.start,onChange:p=>d(b=>({...b,start:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha fin"}),s.jsx("input",{type:"date",value:u.end,onChange:p=>d(b=>({...b,end:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(yo,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Total ventas"})]}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:i.length})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Monto total"})}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:h(x)})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Ticket promedio"})}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:h(y)})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Historial de compras (",i.length,")"]}),s.jsxs("button",{className:"flex items-center gap-2 text-blue-600 hover:text-blue-800",children:[s.jsx(yj,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Exportar"})]})]}),l?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando historial..."}):i.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay compras en el período seleccionado"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Folio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(p=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(p.fecha).toLocaleDateString("es-CL")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:p.folio}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.tipo_dte==="boleta"?"Boleta":p.tipo_dte==="factura"?"Factura":"Nota de crédito"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:h(p.total)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.estado==="completada"?"bg-green-100 text-green-800":p.estado==="pendiente"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:p.estado.charAt(0).toUpperCase()+p.estado.slice(1)})})]},p.id))})]})})]})]}):s.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-sm text-center",children:[s.jsx(sa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay cliente seleccionado"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Busque un cliente para ver su historial de compras"})]})]})]})},zB=({onClose:e})=>{const[t,r]=g.useState([]),[n,a]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState({nombre:"",descripcion:"",tipo:"descuento_porcentaje",valor:0,fecha_inicio:"",fecha_fin:"",activo:!0}),{empresaId:f}=ze();g.useEffect(()=>{h()},[]);const h=async()=>{if(f){a(!0);try{const{data:y,error:p}=await re.from("promociones").select("*").eq("empresa_id",f).eq("activo",!0).order("created_at",{ascending:!1});if(p)throw p;r(y||[])}catch(y){console.error("Error loading promotions:",y),D.error("Error al cargar promociones")}finally{a(!1)}}},m=async()=>{if(!(!f||!u.nombre)){a(!0);try{if(l){const{error:y}=await re.from("promociones").update(u).eq("id",l.id);if(y)throw y;D.success("Promoción actualizada correctamente")}else{const{error:y}=await re.from("promociones").insert([{empresa_id:f,...u}]);if(y)throw y;D.success("Promoción creada correctamente")}o(!1),c(null),d({nombre:"",descripcion:"",tipo:"descuento_porcentaje",valor:0,fecha_inicio:"",fecha_fin:"",activo:!0}),h()}catch(y){console.error("Error saving promotion:",y),D.error("Error al guardar promoción")}finally{a(!1)}}},v=y=>{c(y),d({nombre:y.nombre,descripcion:y.descripcion,tipo:y.tipo,valor:y.valor,fecha_inicio:y.fecha_inicio,fecha_fin:y.fecha_fin,activo:y.activo}),o(!0)},x=async y=>{if(confirm("¿Está seguro de eliminar esta promoción?")){a(!0);try{const{error:p}=await re.from("promociones").update({activo:!1}).eq("id",y);if(p)throw p;h(),D.success("Promoción eliminada correctamente")}catch(p){console.error("Error deleting promotion:",p),D.error("Error al eliminar promoción")}finally{a(!1)}}};return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Promociones",icon:s.jsx(Ds,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"flex-1 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 mr-4",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar promociones...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(qt,{className:"w-4 h-4"}),"Nueva promoción"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 border-b border-gray-200 text-sm font-medium text-gray-700",children:[s.jsx("span",{children:"Nombre"}),s.jsx("span",{children:"Tipo"}),s.jsx("span",{children:"Valor"}),s.jsx("span",{children:"Fecha inicio"}),s.jsx("span",{children:"Fecha fin"}),s.jsx("span",{children:"Acciones"})]}),n?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando promociones..."}):t.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay promociones registradas"}):s.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>s.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 items-center",children:[s.jsx("span",{className:"font-medium",children:y.nombre}),s.jsx("span",{className:"capitalize",children:y.tipo.replace("_"," ")}),s.jsxs("span",{children:[y.valor,"%"]}),s.jsx("span",{children:y.fecha_inicio}),s.jsx("span",{children:y.fecha_fin}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>v(y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(l0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(nl,{className:"w-4 h-4"})})]})]},y.id))})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l?"Editar promoción":"Nueva promoción"}),s.jsx("button",{onClick:()=>{o(!1),c(null),d({nombre:"",descripcion:"",tipo:"descuento_porcentaje",valor:0,fecha_inicio:"",fecha_fin:"",activo:!0})},className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),s.jsx("input",{type:"text",value:u.nombre,onChange:y=>d(p=>({...p,nombre:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("textarea",{value:u.descripcion,onChange:y=>d(p=>({...p,descripcion:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-20 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:u.tipo,onChange:y=>d(p=>({...p,tipo:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"descuento_porcentaje",children:"Descuento porcentaje"}),s.jsx("option",{value:"descuento_monto",children:"Descuento monto"}),s.jsx("option",{value:"2x1",children:"2x1"}),s.jsx("option",{value:"3x2",children:"3x2"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),s.jsx("input",{type:"number",value:u.valor,onChange:y=>d(p=>({...p,valor:parseFloat(y.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha inicio"}),s.jsx("input",{type:"date",value:u.fecha_inicio,onChange:y=>d(p=>({...p,fecha_inicio:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha fin"}),s.jsx("input",{type:"date",value:u.fecha_fin,onChange:y=>d(p=>({...p,fecha_fin:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{o(!1),c(null),d({nombre:"",descripcion:"",tipo:"descuento_porcentaje",valor:0,fecha_inicio:"",fecha_fin:"",activo:!0})},className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:m,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:l?"Actualizar":"Crear"})]})]})})]})},FB=({isOpen:e,onClose:t,onClientSelect:r})=>{const[n,a]=g.useState("empresa"),[i,o]=g.useState({razon_social:"",rut:"",direccion:"",comuna:"",ciudad:"",giro:"",telefono:"",email:"",contacto:"",nombres:"",apellidos:"",clienteExtranjero:"No"}),[l,c]=g.useState(!1),{crearCliente:u}=Dt();if(!e)return null;const d=async()=>{if(n==="persona"&&(i.razon_social=`${i.nombres} ${i.apellidos}`.trim()),n==="empresa"){if(!i.razon_social||!i.rut){alert('Para clientes de tipo "Empresa", Razón Social y RUT son obligatorios.');return}}else if(!i.nombres||!i.apellidos||!i.rut){alert('Para clientes de tipo "Persona", Nombres, Apellidos y RUT son obligatorios.');return}c(!0);const f=await u(i);f.success&&f.data?(r(f.data),t()):f.error?alert("Error al crear cliente: "+f.error.message):alert("Error desconocido al crear cliente."),c(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Registrar nuevo cliente"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Tipo de Cliente"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"clientType",value:"empresa",checked:n==="empresa",onChange:f=>{a(f.target.value)},className:"text-blue-600"}),s.jsx("span",{children:"Empresa"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"clientType",value:"persona",checked:n==="persona",onChange:f=>{a(f.target.value)},className:"text-blue-600"}),s.jsx("span",{children:"Persona"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente Extranjero"}),s.jsxs("select",{value:i.clienteExtranjero,onChange:f=>o(h=>({...h,clienteExtranjero:f.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"No",children:"No"}),s.jsx("option",{value:"Sí",children:"Sí"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["RUT ",i.clienteExtranjero==="No"?"*":""]}),s.jsx("input",{type:"text",value:i.rut,onChange:f=>o(h=>({...h,rut:f.target.value})),placeholder:"Ej: 12.345.678-9",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n==="empresa"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razón Social *"}),s.jsx("input",{type:"text",value:i.razon_social,onChange:f=>o(h=>({...h,razon_social:f.target.value})),placeholder:"Razón Social o Nombre de Empresa",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giro"}),s.jsx("input",{type:"text",value:i.giro,onChange:f=>o(h=>({...h,giro:f.target.value})),placeholder:"Giro comercial",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombres *"}),s.jsx("input",{type:"text",value:i.nombres,onChange:f=>o(h=>({...h,nombres:f.target.value})),placeholder:"Nombres de la persona",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),s.jsx("input",{type:"text",value:i.apellidos,onChange:f=>o(h=>({...h,apellidos:f.target.value})),placeholder:"Apellidos de la persona",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),s.jsx("input",{type:"text",value:i.telefono,onChange:f=>o(h=>({...h,telefono:f.target.value})),placeholder:"Ej: +56912345678",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:i.email,onChange:f=>o(h=>({...h,email:f.target.value})),placeholder:"Ej: correo@ejemplo.com",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),s.jsx("input",{type:"text",value:i.direccion,onChange:f=>o(h=>({...h,direccion:f.target.value})),placeholder:"Dirección completa",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comuna"}),s.jsx("input",{type:"text",value:i.comuna,onChange:f=>o(h=>({...h,comuna:f.target.value})),placeholder:"Comuna",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),s.jsx("input",{type:"text",value:i.ciudad,onChange:f=>o(h=>({...h,ciudad:f.target.value})),placeholder:"Ciudad",className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-4 justify-end flex-shrink-0 mt-2",children:[s.jsx("button",{onClick:t,disabled:l,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:d,disabled:l||n==="empresa"&&(!i.razon_social||!i.rut)||n==="persona"&&(!i.nombres||!i.apellidos||!i.rut),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Guardando...":"Guardar cliente"})]})]})})},UB=({onClose:e})=>{const[t,r]=g.useState(null),[n,a]=g.useState(!1),[i,o]=g.useState({tipoDte:"boleta",metodoPago:"efectivo",envioInmediato:!0,despacho:!1,documentos:!1,cupon:!1,descuentoGlobal:0,montoRecibido:0}),[l,c]=g.useState(!1),[u,d]=g.useState(!1),{user:f}=ze(),h=En(),{carrito:m,total:v,clearCart:x,procesarVenta:y,currentCliente:p,selectClient:b,clientes:w,loadClientes:j}=Dt(),S=I=>Math.max(0,I||0);g.useEffect(()=>{p&&r(p),j()},[p]),g.useEffect(()=>{m.length===0&&h("/")},[m,h]);const N=I=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(S(I)),C=I=>{r(I),I&&b(I),a(!1)},_=async()=>{if(m.length===0){D.error("No hay productos en el carrito");return}c(!0);try{const I=await y(i.metodoPago,i.tipoDte,t==null?void 0:t.id);I.success?d(!0):D.error(I.error||"Error al procesar la venta")}catch(I){console.error("Error processing payment:",I),D.error("Error al procesar el pago")}finally{c(!1)}},A=()=>{try{const I=`
        <div style="font-family: 'Courier New', monospace; width: 80mm; margin: 0 auto; padding: 20px;">
          <div style="text-align: center; border-bottom: 1px dashed #000; padding-bottom: 15px; margin-bottom: 15px;">
            <div style="font-size: 16px; font-weight: bold;">ANROLTEC SPA</div>
            <div style="font-size: 10px;">RUT: 78.168.951-3</div>
            <div style="font-size: 10px;">Av. Providencia 1234, Santiago</div>
          </div>
          
          <div style="text-align: center; font-weight: bold; margin: 10px 0;">
            ${i.tipoDte.toUpperCase()}
          </div>
          <div style="font-size: 10px;">Folio: V${Date.now()}</div>
          <div style="font-size: 10px;">Cliente: ${(t==null?void 0:t.razon_social)||"Consumidor Final"}</div>
          <div style="font-size: 10px;">RUT: ${(t==null?void 0:t.rut)||"66.666.666-6"}</div>
          <div style="font-size: 10px;">Método: ${i.metodoPago}</div>
          <div style="font-size: 10px;">Total: ${N(T)}</div>
          <div style="font-size: 10px;">Fecha: ${new Date().toLocaleDateString("es-CL")}</div>
          
          <div style="border-top: 1px dashed #000; margin-top: 15px; padding-top: 10px;">
            <div style="font-size: 10px; font-weight: bold;">PRODUCTOS:</div>
            ${m.map(te=>`
              <div style="font-size: 9px; margin: 5px 0;">
                ${te.nombre} x${te.quantity} - ${N(te.precio*te.quantity)}
              </div>
            `).join("")}
          </div>
          
          <div style="border-top: 1px dashed #000; margin-top: 15px; padding-top: 10px;">
            <div style="font-size: 10px; font-weight: bold;">RESUMEN:</div>
            <div style="font-size: 9px; margin: 3px 0;">Subtotal: ${N(v)}</div>
            ${i.descuentoGlobal>0?`<div style="font-size: 9px; margin: 3px 0; color: red;">Descuento (${i.descuentoGlobal}%): -${N(v*(i.descuentoGlobal/100))}</div>`:""}
            <div style="font-size: 10px; font-weight: bold; margin: 5px 0; border-top: 1px solid #000; padding-top: 5px;">TOTAL: ${N(T)}</div>
            ${i.metodoPago==="efectivo"?`
              <div style="font-size: 9px; margin: 3px 0;">Recibido: ${N(i.montoRecibido)}</div>
              <div style="font-size: 9px; margin: 3px 0;">Vuelto: ${N(U)}</div>
            `:""}
          </div>
          
          <div style="text-align: center; margin-top: 20px; border-top: 1px dashed #000; padding-top: 10px;">
            <div style="font-size: 9px;">¡Gracias por su compra!</div>
            <div style="font-size: 9px;">Powered by Solvendo</div>
          </div>
        </div>
      `,ee=window.open("","_blank","width=400,height=600");ee&&(ee.document.write(`
          <!DOCTYPE html>
          <html>
          <head><title>Boleta Solvendo</title></head>
          <body>${I}</body>
          <script>window.onload = function() { window.print(); setTimeout(function() { window.close(); }, 1000); }<\/script>
          </html>
        `),ee.document.close())}catch(I){console.error("Error al imprimir:",I)}x(),e?e():h("/")},k=()=>{D.success("Documento enviado por correo"),x(),e?e():h("/")},T=S(v*(1-S(i.descuentoGlobal)/100)),U=i.metodoPago==="efectivo"?Math.max(0,S(i.montoRecibido)-T):0;return u?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Boleta generada"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Enviar por correo electrónico (Opcional)"}),s.jsxs("div",{className:"flex mb-4",children:[s.jsx("input",{type:"email",placeholder:"Email",defaultValue:(t==null?void 0:t.email)||"",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700",children:"Enviar"})]}),s.jsx("button",{onClick:A,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700",children:"Imprimir"})]})})}):s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Facturación",icon:s.jsx(yo,{className:"w-6 h-6 text-gray-600"}),userName:(f==null?void 0:f.nombre)||"Usuario"}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Facturación"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"dte",value:"boleta",checked:i.tipoDte==="boleta",onChange:()=>o(I=>({...I,tipoDte:"boleta"})),className:"text-blue-600"}),s.jsx("span",{children:"Boleta electrónica"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"dte",value:"factura",checked:i.tipoDte==="factura",onChange:()=>o(I=>({...I,tipoDte:"factura"})),className:"text-blue-600"}),s.jsx("span",{children:"Factura electrónica"})]})]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-4 h-4 ${i.envioInmediato?"bg-blue-600":"border border-gray-300"} rounded-full flex items-center justify-center`,children:i.envioInmediato&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("span",{className:"text-sm",children:"Envío inmediato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ju,{className:`w-4 h-4 ${i.despacho?"text-blue-600":"text-gray-400"} cursor-pointer`,onClick:()=>o(I=>({...I,despacho:!I.despacho}))}),s.jsx("span",{className:`text-sm ${i.despacho?"text-blue-600":"text-gray-600"}`,children:"Despacho"})]})]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i.documentos,onChange:()=>o(I=>({...I,documentos:!I.documentos})),className:"rounded border-gray-300 text-blue-600"}),s.jsx("span",{className:"text-sm",children:"Documentos"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qt,{className:`w-4 h-4 ${i.cupon?"text-blue-600":"text-gray-400"} cursor-pointer`,onClick:()=>o(I=>({...I,cupon:!I.cupon}))}),s.jsx("span",{className:`text-sm ${i.cupon?"text-blue-600":"text-gray-600"}`,children:"Agregar cupón"})]})]})]}),(i.tipoDte==="factura"||i.tipoDte==="Factura electrónica")&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Cliente"}),t?s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:t.razon_social}),s.jsxs("p",{className:"text-xs text-blue-700",children:["RUT: ",t.rut]})]}),s.jsx("button",{onClick:()=>r(null),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Cambiar"})]})}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{onChange:I=>{const ee=I.target.value;if(ee){const te=w.find(B=>B.id===ee);te&&C(te)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Seleccionar cliente existente"}),w.map(I=>s.jsxs("option",{value:I.id,children:[I.razon_social," - ",I.rut]},I.id))]}),s.jsx("button",{onClick:()=>a(!0),className:"w-full bg-gray-100 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors text-sm",children:"+ Registrar nuevo cliente"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Descuento global"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"number",value:i.descuentoGlobal,onChange:I=>{const ee=Math.min(100,Math.max(0,parseFloat(I.target.value)||0));o(te=>({...te,descuentoGlobal:ee}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0",max:"100"}),s.jsx(Ds,{className:"ml-2 w-5 h-5 text-gray-400"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Métodos de pago"}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("button",{onClick:()=>o(I=>({...I,metodoPago:"efectivo"})),className:`flex items-center gap-2 px-4 py-3 rounded-lg ${i.metodoPago==="efectivo"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:[s.jsx(Br,{className:"w-5 h-5"}),s.jsx("span",{children:"Efectivo"})]}),s.jsxs("button",{onClick:()=>o(I=>({...I,metodoPago:"tarjeta"})),className:`flex items-center gap-2 px-4 py-3 rounded-lg ${i.metodoPago==="tarjeta"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,children:[s.jsx(i0,{className:"w-5 h-5"}),s.jsx("span",{children:"Tarjeta"})]}),i.metodoPago==="tarjeta"&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terminal POS"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{children:"Terminal Principal - SumUp"}),s.jsx("option",{children:"Terminal Secundaria - SumUp"}),s.jsx("option",{children:"Terminal Móvil - SumUp"})]})]})]})]}),i.metodoPago==="efectivo"&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Monto recibido"}),s.jsx("input",{type:"number",value:i.montoRecibido,onChange:I=>{const ee=Math.max(0,parseFloat(I.target.value)||0);o(te=>({...te,montoRecibido:ee}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0",step:"1"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen"}),s.jsx("div",{className:"space-y-3 mb-6",children:m.map(I=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:I.nombre}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[s.jsxs("span",{children:["Cantidad: ",I.quantity]}),s.jsxs("span",{children:["Precio: ",N(I.precio)]})]})]}),s.jsx("span",{className:"font-medium",children:N(I.precio*I.quantity)})]},I.id))}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:N(v)})]}),i.descuentoGlobal>0&&s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsxs("span",{className:"text-sm",children:["Descuento (",i.descuentoGlobal,"%)"]}),s.jsxs("span",{className:"font-medium",children:["-",N(v*(i.descuentoGlobal/100))]})]}),s.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t border-gray-200",children:[s.jsx("span",{className:"text-sm",children:"Total a pagar"}),s.jsx("span",{children:N(T)})]}),i.metodoPago==="efectivo"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Monto recibido"}),s.jsx("span",{children:N(i.montoRecibido)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Vuelto"}),s.jsx("span",{children:N(U)})]})]})]})}),s.jsx("button",{onClick:_,disabled:l||m.length===0,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Procesando...":"Confirmar pago"})]})]})})}),s.jsx(FB,{isOpen:n,onClose:()=>a(!1),onClientSelect:C})]})},BB=()=>{const{user:e,empresaId:t}=ze(),{cajaAbierta:r,productos:n,clientes:a,carrito:i,loading:o}=Dt(),[l,c]=g.useState({database:"disconnected",supabase:"disconnected",authentication:"inactive",cashRegister:"closed",products:"loading",clients:"loading",cart:"empty"}),[u,d]=g.useState([]),[f,h]=g.useState({loadTime:0,dbResponseTime:0,lastUpdate:new Date().toISOString(),memoryUsage:0,activeConnections:0}),[m,v]=g.useState(!0),[x,y]=g.useState(5e3),[p,b]=g.useState([]),w=g.useCallback((E,O,M,q)=>{const K={id:Date.now().toString(),timestamp:new Date().toISOString(),level:E,component:O,message:M,details:q};d(V=>[K,...V.slice(0,99)])},[]),j=g.useCallback(async()=>{const E=Date.now();try{const{data:O,error:M}=await re.from("empresas").select("id").limit(1),q=Date.now()-E;return M?(c(K=>({...K,database:"error",supabase:"error"})),w("error","Database",`Connection failed: ${M.message}`,M),!1):(c(K=>({...K,database:"connected",supabase:"connected"})),h(K=>({...K,dbResponseTime:q})),w("success","Database",`Connection successful (${q}ms)`),!0)}catch(O){return c(M=>({...M,database:"error",supabase:"error"})),w("error","Database",`Connection error: ${O.message}`,O),!1}},[w]),S=g.useCallback(()=>{e&&t?(c(E=>({...E,authentication:"active"})),w("success","Auth",`User authenticated: ${e.nombre} (${t})`)):(c(E=>({...E,authentication:"inactive"})),w("warning","Auth","User not authenticated or missing empresa"))},[e,t,w]),N=g.useCallback(()=>{r?(c(E=>({...E,cashRegister:"open"})),w("success","Cash Register","Cash register is open")):(c(E=>({...E,cashRegister:"closed"})),w("warning","Cash Register","Cash register is closed"))},[r,w]),C=g.useCallback(()=>{o?c(E=>({...E,products:"loading"})):n.length>0?(c(E=>({...E,products:"loaded"})),w("success","Products",`${n.length} products loaded`)):(c(E=>({...E,products:"error"})),w("error","Products","No products loaded"))},[o,n,w]),_=g.useCallback(()=>{a.length>0?(c(E=>({...E,clients:"loaded"})),w("success","Clients",`${a.length} clients loaded`)):(c(E=>({...E,clients:"error"})),w("warning","Clients","No clients loaded"))},[a,w]),A=g.useCallback(()=>{i.length>0?(c(E=>({...E,cart:"active"})),w("info","Cart",`${i.length} items in cart`)):c(E=>({...E,cart:"empty"}))},[i,w]),k=g.useCallback(()=>{const E=performance.memory;h(O=>({...O,lastUpdate:new Date().toISOString(),memoryUsage:E?Math.round(E.usedJSHeapSize/1024/1024):0,activeConnections:Object.values(l).filter(M=>M==="connected"||M==="active"||M==="open").length}))},[l]),T=g.useCallback(()=>{const E=[];(e==null?void 0:e.rut)==="78.168.951-3"&&E.push("⚠️ Usuario hardcoded detectado (RUT: 78.168.951-3)"),l.database!=="connected"&&E.push("🔴 Base de datos desconectada"),n.length===0&&E.push("⚠️ No hay productos cargados"),r||E.push("⚠️ Caja registradora cerrada"),f.memoryUsage>100&&E.push("⚠️ Alto uso de memoria detectado"),f.dbResponseTime>2e3&&E.push("⚠️ Respuesta lenta de base de datos"),["/protect/status-pos","/movimiento","/reimprimir","/reportes","/despacho","/cierre","/devolucion"].forEach(M=>{window.location.pathname===M&&!document.querySelector('[data-testid="page-content"]')&&E.push(`🔗 Posible enlace roto: ${M}`)}),b(E)},[e,l,n,r,f]),U=g.useCallback(async()=>{const E=Date.now();w("info","System","Running system checks..."),await j(),S(),N(),C(),_(),A(),k();const O=Date.now()-E;h(M=>({...M,loadTime:O})),w("info","System",`System checks completed in ${O}ms`)},[j,S,N,C,_,A,k,w]);g.useEffect(()=>{if(m){const E=setInterval(U,x);return()=>clearInterval(E)}},[m,x,U,T]),g.useEffect(()=>{U(),T()},[U,T]);const I=E=>{switch(E){case"connected":case"active":case"open":case"loaded":return s.jsx(r8,{className:"w-5 h-5 text-green-500"});case"loading":return s.jsx(Hi,{className:"w-5 h-5 text-blue-500 animate-spin"});case"disconnected":case"inactive":case"closed":case"empty":return s.jsx(lm,{className:"w-5 h-5 text-yellow-500"});case"error":return s.jsx(Fy,{className:"w-5 h-5 text-red-500"});default:return s.jsx(zy,{className:"w-5 h-5 text-gray-500"})}},ee=E=>{switch(E){case"connected":case"active":case"open":case"loaded":return"bg-green-50 border-green-200";case"loading":return"bg-blue-50 border-blue-200";case"disconnected":case"inactive":case"closed":case"empty":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},te=E=>{switch(E){case"success":return"text-green-600 bg-green-50";case"info":return"text-blue-600 bg-blue-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},B=E=>new Date(E).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsx(It,{title:"Status POS - Monitoreo en Tiempo Real",icon:s.jsx(Ly,{className:"w-6 h-6 text-gray-600"}),userName:(e==null?void 0:e.nombre)||"Usuario",showClock:!0}),s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:U,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Hi,{className:"w-4 h-4"}),"Actualizar"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:E=>v(E.target.checked),className:"rounded border-gray-300 text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Auto-actualizar"})]}),s.jsxs("select",{value:x,onChange:E=>y(Number(E.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",disabled:!m,children:[s.jsx("option",{value:1e3,children:"1 segundo"}),s.jsx("option",{value:5e3,children:"5 segundos"}),s.jsx("option",{value:1e4,children:"10 segundos"}),s.jsx("option",{value:3e4,children:"30 segundos"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Última actualización: ",B(f.lastUpdate)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(v8,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tiempo de Carga"})]}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[f.loadTime,"ms"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ry,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Respuesta BD"})]}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[f.dbResponseTime,"ms"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(zy,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Memoria"})]}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[f.memoryUsage,"MB"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(g8,{className:"w-4 h-4 text-orange-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Conexiones"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.activeConnections})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(h8,{className:"w-5 h-5 text-blue-600"}),"Estado del Sistema"]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[Object.entries(l).map(([E,O])=>{const M={database:"Base de Datos",supabase:"Supabase",authentication:"Autenticación",cashRegister:"Caja Registradora",products:"Productos",clients:"Clientes",cart:"Carrito"};return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${ee(O)}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[I(O),s.jsx("span",{className:"font-medium text-gray-900",children:M[E]})]}),s.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:O==="connected"?"Conectado":O==="active"?"Activo":O==="open"?"Abierta":O==="loaded"?"Cargado":O==="loading"?"Cargando...":O==="closed"?"Cerrada":O==="empty"?"Vacío":O==="error"?"Error":O==="disconnected"?"Desconectado":O==="inactive"?"Inactivo":O})]},E)}),p.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-800 mb-2 flex items-center gap-2",children:[s.jsx(lm,{className:"w-4 h-4"}),"Advertencias del Sistema"]}),s.jsx("div",{className:"space-y-1",children:p.map((E,O)=>s.jsx("div",{className:"text-xs text-yellow-700",children:E},O))})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(Ly,{className:"w-5 h-5 text-green-600"}),"Logs en Tiempo Real"]}),s.jsx("button",{onClick:()=>d([]),className:"text-sm text-gray-600 hover:text-gray-800",children:"Limpiar"})]})}),s.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:u.length===0?s.jsxs("div",{className:"text-center text-gray-500 py-8",children:[s.jsx(As,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No hay logs disponibles"})]}):s.jsx("div",{className:"space-y-2",children:u.map(E=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-gray-100",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${te(E.level)}`,children:E.level.toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.component}),s.jsx("span",{className:"text-xs text-gray-500",children:B(E.timestamp)})]}),s.jsx("p",{className:"text-sm text-gray-700",children:E.message}),E.details&&s.jsxs("details",{className:"mt-1",children:[s.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Ver detalles"}),s.jsx("pre",{className:"text-xs text-gray-600 mt-1 bg-gray-50 p-2 rounded overflow-x-auto",children:JSON.stringify(E.details,null,2)})]})]})]},E.id))})})]})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Hi,{className:"w-4 h-4"}),"Recargar Aplicación"]}),s.jsxs("button",{onClick:()=>localStorage.clear(),className:"flex items-center gap-2 bg-yellow-100 text-yellow-700 px-4 py-3 rounded-lg hover:bg-yellow-200 transition-colors",children:[s.jsx(Fy,{className:"w-4 h-4"}),"Limpiar Cache"]}),s.jsxs("button",{onClick:()=>{const E={status:l,metrics:f,logs:u.slice(0,10),timestamp:new Date().toISOString()},O=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),M=URL.createObjectURL(O),q=document.createElement("a");q.href=M,q.download=`pos-status-${Date.now()}.json`,q.click(),URL.revokeObjectURL(M)},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-3 rounded-lg hover:bg-blue-200 transition-colors",children:[s.jsx(Ry,{className:"w-4 h-4"}),"Exportar Diagnóstico"]})]})]})]})]})},WB=({isOpen:e,onClose:t,onSuccess:r,type:n})=>{var v;const[a,i]=g.useState(""),[o,l]=g.useState(!1),{openCaja:c}=Dt(),{user:u,sucursalId:d}=ze(),f=En();if(!e)return null;const h=async()=>{if(!a||parseFloat(a)<=0){D.error("Ingrese un monto válido");return}if(!u||!d){D.error("Usuario o sucursal no válidos");return}l(!0);try{await c(parseFloat(a),"default-caja-id")&&(D.success("Caja aperturada correctamente"),r&&r(),t(),f("/"))}catch(x){console.error("Error opening cash register:",x),D.error("Error al abrir caja")}finally{l(!1)}},m=()=>new Date().toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",hour12:!1});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-full w-full h-full flex flex-col",children:[s.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"w-6 h-6 flex flex-col justify-center",children:[s.jsx("div",{className:"h-0.5 bg-gray-600 mb-1"}),s.jsx("div",{className:"h-0.5 bg-gray-600 mb-1"}),s.jsx("div",{className:"h-0.5 bg-gray-600"})]}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"POS"})]})}),s.jsx("div",{className:"flex items-center justify-center flex-1",children:s.jsx("svg",{className:"w-32 h-8",viewBox:"0 0 195 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm text-gray-600",children:m()}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:((v=u==null?void 0:u.email)==null?void 0:v.substring(0,2).toUpperCase())||"U"})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:(u==null?void 0:u.email)||"Usuario"})]})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Efectivo inicial"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Ingresar efectivo"}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"number",value:a,onChange:x=>i(x.target.value),placeholder:"0",className:"w-full px-4 py-3 text-center text-lg border-2 border-blue-200 rounded-full focus:outline-none focus:border-blue-500 transition-colors",autoFocus:!0,min:"0",step:"1"})}),s.jsx("button",{onClick:h,disabled:!a||o,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors h-12",children:o?"Procesando...":"Aperturar"})]})})]})})},qB=()=>{const{isOpen:e,closeSidebar:t,items:r,handleSidebarAction:n}=c0();return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),s.jsxs("div",{className:`fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50
          transform transition-transform duration-300 ease-in-out
          ${e?"translate-x-0":"-translate-x-full"}
          overflow-y-auto`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Módulos"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(De,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"p-6",children:s.jsx("div",{className:"space-y-2",children:r.map(a=>s.jsxs("button",{onClick:()=>n(a.id),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[a.icon,s.jsx("span",{className:"font-medium",children:a.label})]},a.id))})})]})]})},HB=({children:e})=>{const[t,r]=g.useState(!1),[n,a]=g.useState("open"),{cajaAbierta:i,checkCajaStatus:o,loading:l}=Dt(),{isOpen:c}=c0();g.useEffect(()=>{o()},[o]),g.useEffect(()=>{!l&&!i?(r(!0),a("open")):i&&r(!1)},[i,l]);const u=()=>{i&&r(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(qB,{isOpen:c}),e,s.jsx(WB,{onClose:u,type:n})]})},KB=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(""),[a,i]=g.useState(""),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,f]=g.useState(!1),{login:h}=ze(),m=En(),v=()=>{t(y=>!y)},x=async y=>{if(y.preventDefault(),!r||!a){D.error("Por favor ingrese RUT y contraseña");return}f(!0);try{if(r==="78.168.951-3"&&a==="123456"){const p=await h(r,a);p.success?m("/"):D.error(p.error||"Error en el login")}else D.error("Credenciales incorrectas")}catch{D.error("Error de conexión")}finally{f(!1)}};return s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white p-4",children:[s.jsxs("div",{className:"text-center mb-8",children:[" ",s.jsx(u0,{size:"lg",className:"mx-auto mb-6"})," "]}),s.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Inicia sesión"}),s.jsxs("div",{className:"mb-6 relative",children:[s.jsx("input",{type:"email",id:"email",value:r,onChange:y=>n(y.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),className:"w-full px-4 py-3 border border-gray-200 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base peer"}),s.jsx("label",{htmlFor:"email",className:`
              absolute left-4 transition-all duration-300 ease-in-out pointer-events-none
              ${o||r?"top-0 text-xs text-blue-600 bg-white px-1 -translate-y-1/2":"top-1/2 -translate-y-1/2 text-base text-gray-500"}
            `,children:"RUT"})]}),s.jsxs("div",{className:"mb-6 relative",children:[s.jsx("input",{type:e?"text":"password",id:"password",value:a,onChange:y=>i(y.target.value),onFocus:()=>u(!0),onBlur:()=>u(!1),className:"w-full px-4 py-3 pr-10 border border-gray-200 rounded-lg bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base peer"}),s.jsx("label",{htmlFor:"password",className:`
              absolute left-4 transition-all duration-300 ease-in-out pointer-events-none
              ${c||a?"top-0 text-xs text-blue-600 bg-white px-1 -translate-y-1/2":"top-1/2 -translate-y-1/2 text-base text-gray-500"}
            `,children:"Contraseña"}),s.jsx("button",{type:"button",onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer p-3 rounded-full hover:bg-gray-100","aria-label":e?"Ocultar contraseña":"Mostrar contraseña",children:e?s.jsx(xj,{className:"w-5 h-5"}):s.jsx(bj,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"text-right mb-6",children:s.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"¿Olvidaste tu contraseña?"})}),s.jsx("button",{onClick:x,disabled:d,className:"w-full bg-blue-600 text-white py-3.5 rounded-lg font-semibold hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-lg flex items-center justify-center disabled:opacity-50",children:d?"Ingresando...":"Ingresar"})]})]})},VB=()=>{const{user:e,loading:t}=ze();return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})}):e?s.jsx(JP,{children:s.jsx(y8,{children:s.jsx(HB,{children:s.jsxs(gy,{children:[s.jsx(qe,{path:"/",element:s.jsx(k8,{})}),s.jsx(qe,{path:"/movimiento",element:s.jsx(E8,{onClose:()=>{}})}),s.jsx(qe,{path:"/reimprimir",element:s.jsx(P8,{onClose:()=>{}})}),s.jsx(qe,{path:"/reportes",element:s.jsx(PB,{onClose:()=>{}})}),s.jsx(qe,{path:"/despacho",element:s.jsx(OB,{onClose:()=>{}})}),s.jsx(qe,{path:"/cierre",element:s.jsx(TB,{onClose:()=>{}})}),s.jsx(qe,{path:"/devolucion",element:s.jsx(DB,{onClose:()=>{}})}),s.jsx(qe,{path:"/arqueo",element:s.jsx(IB,{onClose:()=>{}})}),s.jsx(qe,{path:"/historial-movimientos",element:s.jsx(MB,{onClose:()=>{}})}),s.jsx(qe,{path:"/categorias",element:s.jsx($B,{onClose:()=>{}})}),s.jsx(qe,{path:"/codigos-barras",element:s.jsx(LB,{onClose:()=>{}})}),s.jsx(qe,{path:"/historial-cliente",element:s.jsx(RB,{onClose:()=>{}})}),s.jsx(qe,{path:"/promociones",element:s.jsx(zB,{onClose:()=>{}})}),s.jsx(qe,{path:"/facturacion",element:s.jsx(UB,{onClose:()=>{}})}),s.jsx(qe,{path:"/protect/status-pos",element:s.jsx(BB,{})}),s.jsx(qe,{path:"*",element:s.jsx(py,{to:"/",replace:!0})})]})})})}):s.jsxs(gy,{children:[" ",s.jsx(qe,{path:"/login",element:s.jsx(KB,{})}),s.jsx(qe,{path:"/loginform",element:s.jsx(x8,{})})," ",s.jsx(qe,{path:"*",element:s.jsx(py,{to:"/login",replace:!0})})," "]})};function GB(){return s.jsx(Bk,{children:s.jsx(D6,{children:s.jsx(VB,{})})})}E2(document.getElementById("root")).render(s.jsxs(g.StrictMode,{children:[s.jsx(GB,{}),s.jsx(A6,{position:"top-right"})]}));
